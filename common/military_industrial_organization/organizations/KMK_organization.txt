#################### 
KMK_arsenal_organization = {
	name = KMK_arsenal
	include = generic_tank_organization
	icon = GFX_idea_generic_industrial_concern_1
	allowed = {	
		tag = KMK
	}
	available = {
	}

	initial_trait = {
		name = USA_mio_trait_dedicated_tank_factory
		
		equipment_bonus = {
			armor_value = -0.05
			defense =-0.05
			build_cost_ic = -0.05
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.1
		}
	}

	add_trait = { 
		token = KMK_mio_trait_arsenal_of_neutrality
		name = KMK_mio_trait_arsenal_of_neutrality
		icon = GFX_generic_mio_department_icon_tank_medium_tank_line_efficiency
		special_trait_background = yes

		position = { x=-1 y=1 }
		relative_position_id = generic_mio_trait_standardized_components

		all_parents = { generic_mio_trait_standardized_components }
		production_bonus = {
			production_efficiency_cap_factor = 0.15
		}
	}

	add_trait = { 
		token = KMK_mio_trait_Forbidden_Knight
		name = KMK_mio_trait_Forbidden_Knight
		icon = GFX_generic_mio_trait_icon_hard_attack
		special_trait_background = yes

		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_standardized_components

		all_parents = { generic_mio_trait_standardized_components }
		equipment_bonus = {
			soft_attack = 0.08
			defense = 0.1
			hardness = 0.05
			hard_attack = 0.1
		}
	}

	add_trait = { 
		token = KMK_mio_trait_Improve_artillery
		name = KMK_mio_trait_Improve_artillery
		icon = GFX_generic_mio_department_icon_tank_general_line_efficiency
		special_trait_background = yes
		position = { x=6 y=1 }
		relative_position_id = generic_mio_trait_standardized_components
		equipment_bonus = {
			soft_attack = 0.1
			hard_attack = 0.1
		}
	}

	add_trait = { 
		token = KMK_mio_trait_Improve_speed
		name = KMK_mio_trait_Improve_speed
		icon = GFX_generic_mio_trait_icon_maximum_speed
		special_trait_background = yes
		position = { x=6 y=0 }
		relative_position_id = generic_mio_trait_standardized_components
		equipment_bonus = {
			maximum_speed = 0.10
			defense = 0.02
			hardness = 0.05
		}
	}

	add_trait = { 
		token = KMK_mio_trait_Improve_armor
		name = KMK_mio_trait_Improve_armor
		icon = GFX_generic_mio_department_icon_facilities
		special_trait_background = yes
		position = { x=6 y=-1 }
		relative_position_id = generic_mio_trait_standardized_components
		equipment_bonus = {
			build_cost_ic = -0.05
		}
	}

}

#####################
KMK_naval_yard_organization = {
	include = generic_task_force_ship_organization
	icon = GFX_idea_newport_news_shipbuilding
	allowed = {
			tag = kmk 
		}
	available = {
	}

	initial_trait = {
		name = USA_mio_trait_carrier_specialists
		
		equipment_bonus = {
			build_cost_ic = -0.1
			surface_visibility = -0.1
		}
		

		
		production_bonus = {
			production_capacity_factor = 0.05
		}

	}

	add_trait = { 
		token = USA_mio_trait_north_carolina_shipbuilding_company
		name = USA_mio_trait_north_carolina_shipbuilding_company
		icon = GFX_generic_mio_department_icon_ship_screen_ship_production
		special_trait_background = yes

		limit_to_equipment_type = {
			screen_ship
		}

		all_parents = {  }

		position = { x=3 y=0 }

		production_bonus = {
			production_capacity_factor = 0.05
		}
	}

}

###########################
KMK_messerschmitt_organization = {
	include = generic_light_aircraft_organization
	icon = GFX_idea_messerschmitt
	
	allowed = {	
		tag = KMK
	}

	equipment_type = {
		mio_cat_eq_all_small_plane
		maritime_patrol_plane
	}

	add_trait = {
		token = GER_mio_trait_maintenance_first_design
		name = GER_mio_trait_maintenance_first_design

		icon = GFX_generic_mio_department_icon_plane_fighter_line_efficiency
		special_trait_background = yes
		
		position = { x=-2 y=1 }
		relative_position_id = generic_mio_trait_expanded_production_facilities

		all_parents = { generic_mio_trait_expanded_production_facilities }

		equipment_bonus = {
			build_cost_ic = -0.05
			reliability = 0.05
		}
	}

	add_trait = {
		token = GER_mio_trait_maintenance_first_design1
		name = KMK_mio_trait_maintenance_first_design

		icon = GFX_generic_mio_department_icon_plane_fighter_line_efficiency
		special_trait_background = yes
		
		position = { x=0 y=1 }
		relative_position_id = GER_mio_trait_maintenance_first_design

		all_parents = { GER_mio_trait_maintenance_first_design }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		production_bonus = {
			production_efficiency_cap_factor = 0.1
		}
	}

	add_trait = {
		token = GER_mio_trait_fuselage_based_weapons
		name = GER_mio_trait_fuselage_based_weapons

		icon = GFX_generic_mio_trait_icon_anti_air_attack
		special_trait_background = yes
		
		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_gun_pods

		any_parent = { generic_mio_trait_heavier_airframe generic_mio_trait_maximum_wing_loads generic_mio_trait_gun_pods }

		equipment_bonus = {
			air_attack = 0.05
			air_agility = 0.05
		} 
	}
	add_trait = { 
		token = ENG_mio_trait_elliptical_wings
		name = ENG_mio_trait_elliptical_wings
		icon = GFX_generic_mio_trait_icon_defense
		special_trait_background = yes

		position = { x=0 y=1 }
		relative_position_id = generic_mio_trait_expanded_production_facilities

		any_parent = { generic_mio_trait_expanded_production_facilities }

		equipment_bonus = {
			air_defence = 0.1	
		}
		production_bonus = {
			production_cost_factor = -0.15
		}
	}

	add_trait = { 
		token = KMK_mio_trait_elliptical_wings
		name = KMK_mio_trait_elliptical_wings
		icon = GFX_generic_mio_trait_icon_build_cost_ic
		special_trait_background = yes

		position = { x=0 y=1 }
		relative_position_id = ENG_mio_trait_elliptical_wings

		any_parent = { ENG_mio_trait_elliptical_wings }

		equipment_bonus = {
			air_defence = 0.1	
			build_cost_ic = -0.05
		}
	}
}

KMK_supermarine_organization = {
	include = generic_high_agility_fighter_aircraft_organization
	icon = GFX_idea_supermarine
	
	allowed = {	
		tag = KMK
		has_dlc = "Arms Against Tyranny"
	}

	available = {
		KMK = { not = { has_war_with = ENG } }
	}

	equipment_type = {
		mio_cat_eq_all_small_plane
		maritime_patrol_plane
	}	

	research_categories = {	
		mio_cat_all_light_fighter_and_modules 
#		mio_cat_all_naval_bomber_and_modules 
			#Could be used to allow Supermarine to research naval bombs, but this could overpower English fighter MIO trait gain early on.
	}

	override_trait = {
		token = generic_mio_trait_fuel_injection_engines
		
		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_bigger_engines
	}

	override_trait = {
		token = generic_mio_trait_high_octane_fuels
		
		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_bigger_engines
	}

	override_trait = {
		token = generic_mio_trait_subsidiary_suppliers
		
		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_fuel_injection_engines
	}

	add_trait = { 
		token = ENG_mio_trait_seaplane_origins
		name = ENG_mio_trait_seaplane_origins
		icon = GFX_generic_mio_trait_icon_detection
		special_trait_background = yes

		position = { x=2 y=0 }
		relative_position_id = generic_mio_trait_minimum_weapon_requirements

		#any_parent = { generic_mio_trait_super_heavy_shells generic_mio_trait_semi_armor_piercing_shells generic_mio_trait_high_velocity_guns }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane mio_cat_eq_all_large_plane }

		equipment_bonus = {
			sub_detection = 0.05
			surface_detection = 0.05
			naval_strike_targetting = 0.1
		}
	}

	add_trait = { 
		token = ENG_mio_trait_elliptical_wings
		name = ENG_mio_trait_elliptical_wings
		icon = GFX_generic_mio_trait_icon_defense
		special_trait_background = yes

		position = { x=0 y=1 }
		relative_position_id = generic_mio_trait_cantilever_wing_structure

		any_parent = { generic_mio_trait_cantilever_wing_structure }

		equipment_bonus = {
			air_defence = 0.1	
		}
	}

	add_trait = { 
		token = ENG_mio_trait_supercharger
		name = ENG_mio_trait_supercharger
		icon = GFX_generic_mio_trait_icon_defense
		special_trait_background = yes

		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_fuel_injection_engines

		all_parents = { generic_mio_trait_fuel_injection_engines generic_mio_trait_high_octane_fuels }

		equipment_bonus = {
			air_defence = 0.1	
		}
	}
}

