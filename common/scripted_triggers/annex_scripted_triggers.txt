is_ally_of_ROOT = {
	custom_trigger_tooltip = {
		tooltip = AH_is_an_ally
		exists = yes
		is_ally_with = ROOT
		NOT = {
			tag = ROOT
		}
	}
}

is_independent_ally_of_ROOT = {
	custom_trigger_tooltip = {
		tooltip = AH_is_an_ally
		exists = yes
		is_ally_with = ROOT
		is_subject = no
		NOT = {
			tag = ROOT
		}
	}
}

# in state scope
is_claim_or_core_of_ROOT = {
	OR = {
		is_claimed_by = ROOT
		is_core_of = ROOT
		ROOT = { has_variable = can_integrate_@PREV }
	}
}

is_claim_or_core_of_FROM = {
	OR = {
		is_claimed_by = FROM
		is_core_of = FROM
	}
}

# Useful triggers for the annexation codebase
is_valid_annexation_state = {
	is_owned_by = ROOT
	is_claim_or_core_of_ROOT = no
	# hidden_trigger = {
	# 	NOT = {
	# 		has_state_flag = occupied_by_@ROOT
	# 	}
	# 	NOT = {
	# 		has_variable = occupied_by_@THIS
	# 	}
	# }
}
#####  德国   ####
	##德国
	can_release_germany = {
		OR = {
			state = 64		#Brandenburg
			state = 781		#Western Rhineland
		}
		NOT = {
			is_claimed_by = ROOT
		}
		count_triggers = {
			amount = 2
			52 = {
				is_valid_annexation_state = yes
			}
			#Upper Bavaria
			59 = {
				is_valid_annexation_state = yes
			}
			#Hanover
			AND = {
				state = 64			#Brandenburg
				781 = {
					is_valid_annexation_state = yes
				}
				#Western Rhineland
			}
			AND = {
				state = 781			#Western Rhineland
				64 = {
					is_valid_annexation_state = yes
				}
				#Brandenburg
			}
		}
		ROOT = {
			NOT = {
				is_germany_tag = yes
				has_country_flag = GER_CONQ
			}
		}
	}
	should_release_germany_first = {
		OR = {
			is_germany_tag = yes
			country_exists = GER
			country_exists = GEU
			country_exists = WUR
			has_country_flag = GER_CONQ
			AND = {
				64 = {
					is_valid_annexation_state = no
				}
				#Brandenburg
				781 = {
					is_valid_annexation_state = no
				}
				#Western Rhineland
			}
			NOT = {
				count_triggers = {
					amount = 2
					52 = {
						is_valid_annexation_state = yes
					}
					#Upper Bavaria
					59 = {
						is_valid_annexation_state = yes
					}
					#Hanover
					AND = {
						PREV = {
							state = 64
						}
						#Brandenburg
						781 = {
							is_valid_annexation_state = yes
						}
						#Western Rhineland
					}
					AND = {
						PREV = {
							state = 781
						}
						#Western Rhineland
						64 = {
							is_valid_annexation_state = yes
						}
						#Brandenburg
					}
				}
			}
		}
	}
	#普鲁士
	can_release_Prussia = {
		is_Prussia = yes
		NOT = {
			is_claimed_by = ROOT
		}
		count_triggers = {
			amount = 2
			5 = {
				is_valid_annexation_state = yes
			}
			777 = {
				is_valid_annexation_state = yes
			}
			776 = {
				is_valid_annexation_state = yes
			}
			86 = {
				is_valid_annexation_state = yes
			}
		}
		ROOT = {
			should_release_germany_first = yes
			NOT = {
				is_germany_tag = yes
				has_country_flag = PRE_CONQ
			}
		}
	}
	#莱茵兰
	can_release_rhineland = {
		state = 781	#Western Rhineland
		NOT = {
			is_claimed_by = ROOT
		}
		ROOT = {
			should_release_germany_first = yes
			should_release_north_germany_first = yes
			NOT = {
				is_germany_tag = yes
				has_country_flag = RHI_CONQ
			}
		}
	}
	should_release_rhineland_first = {
		OR = {
			is_germany_tag = yes
			has_country_flag = RHI_CONQ
			781 = {is_valid_annexation_state = no}
		}
	}
	#北德
	can_release_north_germany = {
		state = 64
		count_triggers = {
			amount = 2
			56 = { is_valid_annexation_state = yes }
			58 = { is_valid_annexation_state = yes }
			68 = { is_valid_annexation_state = yes }
			55 = { is_valid_annexation_state = yes }
		}
		NOT = { is_claimed_by = ROOT }
		ROOT = {
			should_release_germany_first = yes
			NOT = {
				is_germany_tag = yes
				has_country_flag = NORTH_GER_CONQ
			}
		}
	}
	should_release_north_germany_first = {
		if = {
			limit = {
				64 = { is_valid_annexation_state = yes }
				count_triggers = {
					amount = 2
					56 = { is_valid_annexation_state = yes }
					58 = { is_valid_annexation_state = yes }
					68 = { is_valid_annexation_state = yes }
					55 = { is_valid_annexation_state = yes }
				}
			}
			has_country_flag = NORTH_GER_CONQ
		}
		else = {
			always = yes
		}
	}
	#南德
	can_release_SGER = {
		state = 4
		4 = { is_valid_annexation_state = yes }
		52 = { is_valid_annexation_state = yes }
		50 = { is_valid_annexation_state = yes }
		NOT = { is_claimed_by = ROOT }
		ROOT = {
			should_release_germany_first = yes
			NOT = {
				is_germany_tag = yes
				has_country_flag = South_GER_CONQ
			}
		}
	}
	should_release_south_germany_first = {
		or = {
			AND = {
				4 = { is_valid_annexation_state = yes }
				52 = { is_valid_annexation_state = yes }
				50 = { is_valid_annexation_state = yes }
				has_country_flag = South_GER_CONQ
			}
			not = {
				and = {
					4 = { is_valid_annexation_state = yes }
					52 = { is_valid_annexation_state = yes }
					50 = { is_valid_annexation_state = yes }
				}
			}
		}
	}
	can_release_AUS = {
		state = 4
		4 = { is_valid_annexation_state = yes }
		775 = { is_valid_annexation_state = yes }
		NOT = { is_claimed_by = ROOT }
		ROOT = {
			should_release_germany_first = yes
			should_release_south_germany_first = yes
			NOT = {
				is_germany_tag = yes
				has_country_flag = AUS_CONQ
			}
		}
	}
	should_release_AUS_first = {
		or = {
			and = {
				4 = { is_valid_annexation_state = yes }
				775 = { is_valid_annexation_state = yes }
				has_country_flag = AUS_CONQ
			}
			not = {
				4 = { is_valid_annexation_state = yes }
				775 = { is_valid_annexation_state = yes }
			}
		}
	}
	can_release_BAY = {
		state = 52
		53 = { is_valid_annexation_state = yes }
		52 = { is_valid_annexation_state = yes }
		NOT = { is_claimed_by = ROOT }
		ROOT = {
			should_release_germany_first = yes
			should_release_south_germany_first = yes
			NOT = {
				is_germany_tag = yes
				has_country_flag = BAY_CONQ
			}
		}
	}
	can_release_SIL = {
		state = 66
		66 = { is_valid_annexation_state = yes }
		67 = { is_valid_annexation_state = yes }
		NOT = { is_claimed_by = ROOT }
		ROOT = {
			should_release_germany_first = yes
			should_release_north_germany_first = yes
			NOT = {
				is_germany_tag = yes
				has_country_flag = SIL_CONQ
			}
		}
	}
	can_release_KSH = {
		state = 62
		62 = { is_valid_annexation_state = yes }
		63 = { is_valid_annexation_state = yes }
		NOT = { is_claimed_by = ROOT }
		ROOT = {
			should_release_germany_first = yes
			should_release_north_germany_first = yes
			NOT = {
				is_germany_tag = yes
				has_country_flag = KSH_CONQ
			}
		}
	}
	can_release_SHL = {
		state = 58
		58 = { is_valid_annexation_state = yes }
		NOT = { is_claimed_by = ROOT }
		ROOT = {
			should_release_germany_first = yes
			should_release_north_germany_first = yes
			NOT = {
				is_germany_tag = yes
				has_country_flag = SHL_CONQ
			}
		}
	}
	can_release_HAN = {
		state = 56
		56 = { is_valid_annexation_state = yes }
		#57 = { is_valid_annexation_state = yes }
		59 = { is_valid_annexation_state = yes }
		NOT = { is_claimed_by = ROOT }
		ROOT = {
			should_release_germany_first = yes
			should_release_north_germany_first = yes
			NOT = {
				is_germany_tag = yes
				has_country_flag = HAN_CONQ
			}
		}
	}
	can_release_SAX = {
		state = 60
		60 = { is_valid_annexation_state = yes }
		65 = { is_valid_annexation_state = yes }
		147 = { is_valid_annexation_state = yes }
		NOT = { is_claimed_by = ROOT }
		ROOT = {
			should_release_germany_first = yes
			should_release_north_germany_first = yes
			NOT = {
				is_germany_tag = yes
				has_country_flag = SAX_CONQ
			}
		}
	}
	can_release_MEK = {
		state = 61
		61 = { is_valid_annexation_state = yes }
		NOT = { is_claimed_by = ROOT }
		ROOT = {
			should_release_germany_first = yes
			should_release_north_germany_first = yes
			NOT = {
				is_germany_tag = yes
				has_country_flag = MEK_CONQ
			}
		}
	}
	can_release_DDR = {
		state = 64
		64 = { is_valid_annexation_state = yes }
		NOT = { is_claimed_by = ROOT }
		ROOT = {
			should_release_germany_first = yes
			should_release_north_germany_first = yes
			NOT = {
				is_germany_tag = yes
				has_country_flag = DDR_CONQ
			}
		}
	}
	can_release_AUS_TRENT = {
		state = 39
		39 = { is_valid_annexation_state = yes }
		783 = { is_valid_annexation_state = yes }
		NOT = { is_claimed_by = ROOT }
		ROOT = {
			should_release_germany_first = yes
			should_release_south_germany_first = yes
			should_release_AUS_first = yes
			should_release_ITA_first = yes
			NOT = {
				or = {
					tag = ITA
					tag = ALS
				}
				is_germany_tag = yes
				has_country_flag = AUS_TRENT_CONQ
			}
		}
		or = {
			var:4.owner = {
				is_germany_tag = yes
				is_ally_with = ROOT
			}
			var:2.owner = {
				or = {
					tag = ITA
					tag = ALS
				}
				is_ally_with = ROOT
			}
		}
	}
#####  幻想乡   ####
	#幻想乡
	can_release_france = {
		OR = {
			AND = {
				state = 16 #Paris
				NOT = { is_claimed_by = ROOT }
			}
		}
		NOT = {
			is_claimed_by = ROOT
		}
		16 = {
			is_valid_annexation_state = yes
		}
		25 = {
			is_valid_annexation_state = yes
		}
		32 = {
			is_valid_annexation_state = yes
		}
		ROOT = {
			is_french_tag = no
			NOT = { has_country_flag = FRA_CONQ }
		}
	}

#####  枫丹   ####
	can_release_FOT = {
		OR = {
			AND = {
				state = 1157
				NOT = { is_claimed_by = ROOT }
			}
		}
		NOT = { is_claimed_by = ROOT }
		1157 = { is_valid_annexation_state = yes }
		ROOT = {
			NOT = { has_country_flag = FOT_CONQ }
		}
	}

#####  伊比利亚   ####
	can_release_NPT = {
		or = {
			state = 41
			state = 112
		}
		NOT = {
			is_claimed_by = ROOT
		}
		41 = {
			is_valid_annexation_state = yes
		}
		112 = {
			is_valid_annexation_state = yes
		}
		ROOT = {
			NOT = {
				tag = NPT
				has_country_flag = NPT_CONQ
			}
		}
	}

#####  不列颠   ####
	can_release_ENG = {
		or = {
			state = 126
			state = 132
		}
		NOT = {
			is_claimed_by = ROOT
		}
		126 = { is_valid_annexation_state = yes }
		132 = { is_valid_annexation_state = yes }
		128 = { is_valid_annexation_state = yes }
		133 = { is_valid_annexation_state = yes }
		ROOT = {
			NOT = {
				tag = ENG
				has_country_flag = ENG_CONQ
			}
		}
	}

#####  火车   ####
	can_release_TRB = {
		or = {
			state = 3
		}
		NOT = {
			is_claimed_by = ROOT
		}
		count_triggers = {
			amount = 2
			3 = {
				is_valid_annexation_state = yes
			}
			1091 = {
				is_valid_annexation_state = yes
			}
			943 = {
				is_valid_annexation_state = yes
			}
			151 = {
				is_valid_annexation_state = yes
			}
		}
		ROOT = {
			NOT = {
				tag = TRB
				has_country_flag = TRB_CONQ
			}
		}
	}

#####  意大利   ####
	can_release_ITA = {
		or = {
			state = 2
			state = 159
		}
		NOT = {
			is_claimed_by = ROOT
		}
		count_triggers = {
			amount = 2
			2 = { is_valid_annexation_state = yes }
			159 = { is_valid_annexation_state = yes }
			160 = { is_valid_annexation_state = yes }
			838 = { is_valid_annexation_state = yes }
			117 = { is_valid_annexation_state = yes }
		}
		ROOT = {
			NOT = {
				or = {
					tag = ITA
					tag = ALS
				}
				has_country_flag = ITA_CONQ
			}
		}
	}
	should_release_ITA_first = {
		or = {
			and = {
				or = {
					2 = { is_valid_annexation_state = yes }
					159 = { is_valid_annexation_state = yes }
				}
				count_triggers = {
					amount = 2
					2 = { is_valid_annexation_state = yes }
					159 = { is_valid_annexation_state = yes }
					160 = { is_valid_annexation_state = yes }
					838 = { is_valid_annexation_state = yes }
					117 = { is_valid_annexation_state = yes }
				}
				has_country_flag = ITA_CONQ
			}
			not = {
				and = {
					or = {
						2 = { is_valid_annexation_state = yes }
						159 = { is_valid_annexation_state = yes }
					}
					count_triggers = {
						amount = 2
						2 = { is_valid_annexation_state = yes }
						159 = { is_valid_annexation_state = yes }
						160 = { is_valid_annexation_state = yes }
						838 = { is_valid_annexation_state = yes }
						117 = { is_valid_annexation_state = yes }
					}
				}
			}
		}
	}
#####  JK   ####
	can_release_CZE = {
		or = {
			state = 9
		}
		NOT = {
			is_claimed_by = ROOT
		}
		9 = { is_valid_annexation_state = yes }
		ROOT = {
			NOT = {
				tag = CZE
				has_country_flag = CZE_CONQ
			}
		}
	}
#####  斯连教国   ####
	can_release_SLO = {
		or = {
			state = 70
		}
		NOT = {
			is_claimed_by = ROOT
		}
		70 = { is_valid_annexation_state = yes }
		73 = { is_valid_annexation_state = yes }
		ROOT = {
			NOT = {
				tag = SLO
				has_country_flag = SLO_CONQ
			}
		}
	}

#####  宝石之国   ####
	can_release_HUN = {
		or = {
			state = 43
		}
		NOT = {
			is_claimed_by = ROOT
		}
		count_triggers = {
			amount = 2
			43 = {
				is_valid_annexation_state = yes
			}
			155 = {
				is_valid_annexation_state = yes
			}
			154 = {
				is_valid_annexation_state = yes
			}
			664 = {
				is_valid_annexation_state = yes
			}
		}
		ROOT = {
			NOT = {
				tag = HUN
				has_country_flag = HUN_CONQ
			}
		}
	}
#####  基沃托斯   ####
	can_release_KVO = {
		or = {
			state = 107
			state = 766
		}
		NOT = {
			is_claimed_by = ROOT
		}
		or = {
			107 = { is_valid_annexation_state = yes }
			766 = { is_valid_annexation_state = yes }
		}
		count_triggers = {
			amount = 2
			109 = {
				is_valid_annexation_state = yes
			}
			765 = {
				is_valid_annexation_state = yes
			}
			1139 = {
				is_valid_annexation_state = yes
			}
			794 = {
				is_valid_annexation_state = yes
			}
		}
		ROOT = {
			NOT = {
				Kivotos_is_kivotos_country = yes
				has_country_flag = KVO_CONQ
			}
		}
	}
#####  北欧   ####
 #杜伦布
	can_release_DEN = {
		or = {
			state = 37
		}
		NOT = {
			is_claimed_by = ROOT
		}
		37 = { is_valid_annexation_state = yes }
		ROOT = {
			NOT = {
				tag = DEN
				has_country_flag = DEN_CONQ
			}
		}
	}
 #瑞典
	can_release_SWE = {
		or = { state = 1097 }
		NOT = {
			is_claimed_by = ROOT
		}
		1097 = { is_valid_annexation_state = yes }
		count_triggers = {
			amount = 2
			139 = { is_valid_annexation_state = yes }
			140 = { is_valid_annexation_state = yes }
			778 = { is_valid_annexation_state = yes }
			909 = { is_valid_annexation_state = yes }
			139 = { is_valid_annexation_state = yes }
		}
		ROOT = {
			NOT = {
				tag = SWE
				has_country_flag = SWE_CONQ
			}
		}
	}
 #卡尔马
	can_release_DEN = {
		or = {
			state = 37
		}
		NOT = {
			is_claimed_by = ROOT
		}
		37 = { is_valid_annexation_state = yes }
		ROOT = {
			NOT = {
				or = {
					tag = DEN
					tag = SWE
				}
				has_country_flag = DEN_CONQ
			}
		}
	}
 #索米
	can_release_DEN = {
		or = {
			state = 37
		}
		NOT = {
			is_claimed_by = ROOT
		}
		37 = { is_valid_annexation_state = yes }
		ROOT = {
			NOT = {
				tag = FIN
				has_country_flag = DEN_CONQ
			}
		}
	}
 #挪威
	can_release_DEN = {
		or = {
			state = 37
		}
		NOT = {
			is_claimed_by = ROOT
		}
		37 = { is_valid_annexation_state = yes }
		ROOT = {
			NOT = {
				tag = NOR
				has_country_flag = DEN_CONQ
			}
		}
	}
 #冰岛
	can_release_DEN = {
		or = {
			state = 37
		}
		NOT = {
			is_claimed_by = ROOT
		}
		37 = { is_valid_annexation_state = yes }
		ROOT = {
			NOT = {
				tag = ICE
				has_country_flag = DEN_CONQ
			}
		}
	}
#####  巴尔干   ####
##保加利亚
can_release_BUL = {
	or = {
		state = 48
	}
	NOT = {
		is_claimed_by = ROOT
	}
	48 = {
		is_valid_annexation_state = yes
	}
	771 = {
		is_valid_annexation_state = yes
	}
	ROOT = {
		NOT = {
			tag = BUL
			has_country_flag = BUL_CONQ
		}
	}
}
##阿尔巴尼亚
can_release_ALB = {
	or = {
		state = 44
	}
	NOT = {
		is_claimed_by = ROOT
	}
	44 = {
		is_valid_annexation_state = yes
	}
	ROOT = {
		NOT = {
			tag = ALB
			has_country_flag = ALB_CONQ
		}
	}
}
##马其顿
can_release_MAC = {
	or = {
		state = 106
	}
	NOT = {
		is_claimed_by = ROOT
	}
	106 = {
		is_valid_annexation_state = yes
	}
	ROOT = {
		NOT = {
			tag = MAC
			has_country_flag = MAC_CONQ
		}
	}
}
##特兰西瓦尼亚
can_release_TRA = {
	or = {
		state = 45
	}
	NOT = {
		is_claimed_by = ROOT
	}
	45 = {
		is_valid_annexation_state = yes
	}
	875 = {
		is_valid_annexation_state = yes
	}
	ROOT = {
		NOT = {
			tag = TRA
			has_country_flag = TRA_CONQ
		}
	}
}
#####  东欧   ####
#####  中东   ####
#####  樱花   ####
#####  中国   ####
	can_release_CHI = {
		or = {
			state = 608
			state = 613
			state = 743
			state = 1048
			state = 592
			state = 650
			state = 799
			state = 1072
			state = 1047
		}
		NOT = { is_claimed_by = ROOT }
		count_triggers = {
			amount = 3
			608 = { is_valid_annexation_state = yes }
			613 = { is_valid_annexation_state = yes }
			743 = { is_valid_annexation_state = yes }
			1048 = { is_valid_annexation_state = yes }
			592 = { is_valid_annexation_state = yes }
			650 = { is_valid_annexation_state = yes }
			799 = { is_valid_annexation_state = yes }
			1072 = { is_valid_annexation_state = yes }
			1047 = { is_valid_annexation_state = yes }
		}
		ROOT = {
			NOT = {
				is_chinese_country = yes
				has_country_flag = Participate_in_the_competition_for_China_reunification
				has_country_flag = CHI_CONQ
			}
		}
	}
	should_release_china_first = {
		if = {
			limit = {
				count_triggers = {
					amount = 3
					608 = { is_valid_annexation_state = yes }
					613 = { is_valid_annexation_state = yes }
					743 = { is_valid_annexation_state = yes }
					1048 = { is_valid_annexation_state = yes }
					592 = { is_valid_annexation_state = yes }
					650 = { is_valid_annexation_state = yes }
					799 = { is_valid_annexation_state = yes }
					1072 = { is_valid_annexation_state = yes }
					1047 = { is_valid_annexation_state = yes }
				}
			}
			has_country_flag = CHI_CONQ
		}
		else = {
			always = yes
		}
	}
	can_release_SIK = {
		state = 617
		NOT = { is_claimed_by = ROOT }
		617 = { is_valid_annexation_state = yes }
		ROOT = {
			should_release_china_first = yes
			NOT = {
				is_chinese_country = yes
				has_country_flag = Participate_in_the_competition_for_China_reunification
				has_country_flag = SIK_CONQ
			}
		}
	}
	can_release_MON = {
		state = 330
		NOT = { is_claimed_by = ROOT }
		330 = { is_valid_annexation_state = yes }
		ROOT = {
			should_release_china_first = yes
			NOT = {
				is_chinese_country = yes
				has_country_flag = Participate_in_the_competition_for_China_reunification
				has_country_flag = MON_CONQ
			}
		}
	}
	can_release_MAN = {
		state = 716
		NOT = { is_claimed_by = ROOT }
		716 = { is_valid_annexation_state = yes }
		885 = { is_valid_annexation_state = yes }
		ROOT = {
			should_release_china_first = yes
			NOT = {
				is_chinese_country = yes
				has_country_flag = Participate_in_the_competition_for_China_reunification
				has_country_flag = MAN_CONQ
			}
		}
	}
	can_release_TIB = {
		state = 322
		NOT = { is_claimed_by = ROOT }
		322 = { is_valid_annexation_state = yes }
		ROOT = {
			should_release_china_first = yes
			NOT = {
				is_chinese_country = yes
				has_country_flag = Participate_in_the_competition_for_China_reunification
				has_country_flag = TIB_CONQ
			}
		}
	}

#####  其它亚洲国家   ####

#####  北美   ####

#####  南美   ####

#####  非洲   ####

#####
