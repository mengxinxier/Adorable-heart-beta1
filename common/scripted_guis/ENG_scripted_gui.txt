scripted_gui = {

	ENG_sbgpzc_ui = {
		context_type = decision_category
		window_name = "ENG_sbgpzc_ui_window"
		effects = {			
			ENG_gpzc_shuaxin_click = {
				ENG_jisuan_all_support = yes
				VAR_ENG_all_influence_clamp = yes
				VAR_ENG_all_jijindu_clamp = yes
			}
			ENG_Parliament_button_click = {
				ENG_Seat_calculation = yes
				if = {
					limit = {
						has_country_flag = ENG_Parliament_visble
					}
					clr_country_flag = ENG_Parliament_visble
				}
				else = {
					set_country_flag = ENG_Parliament_visble
				}
				set_variable = {
					ENG_Parliament_window_var = 1
				}
			}
		}
		properties = {
			lianhezhenxian_icon = {
				image = "[GET_VAR_ENG_red_icon_txt]"
			}

			gongdang_baoshoudang_icon = {
				image = "[GET_VAR_ENG_blue_icon_txt]"
			}
		}
	}
	
	ENG_yihui_ui = {
		context_type = decision_category
		window_name = "ENG_yihui_ui_window"
		effects = {			
			ENG_yihui_shuaxin_click = {				
				ENG_jisuan_VAR_ewzc_xyyxw = yes 
				ENG_jisuan_VAR_ewzc_dqzcl = yes
				VAR_ENG_syy_support_clamp = yes
				VAR_ENG_xyy_support_clamp = yes
			}
			ENG_Parliament_button_click = {
				ENG_Seat_calculation = yes
				if = {
					limit = {
						has_country_flag = ENG_Parliament_visble
					}
					clr_country_flag = ENG_Parliament_visble
				}
				else = {
					set_country_flag = ENG_Parliament_visble
				}
				set_variable = {
					ENG_Parliament_window_var = 3
				}
			}
			OPEN_hitory_motion_window_click = {
				if = {
					limit = {
						has_country_flag = ENG_Parliament_hitory_motion_window_visible
					}
					clr_country_flag = ENG_Parliament_hitory_motion_window_visible
				}
				else = {
					set_country_flag = ENG_Parliament_hitory_motion_window_visible
				}	
			}
			
		}
		properties = {
			ENG_shangyiyuan_icon = {
				frame = ENG_current_shangyiyuan_icon_frame
			}

			ENG_xiayiyuan_icon = {
				frame = ENG_current_xiayiyuan_icon_frame
			}

			lianhezhenxian_icon = {
				image = "[GET_VAR_ENG_red_icon_txt]"
			}

			gongdang_baoshoudang_icon = {
				image = "[GET_VAR_ENG_blue_icon_txt]"
			}
		}		
	}
}

scripted_gui = { #伦敦危机
	ENG_London_BUTTON_WINDOW = { #开关
		window_name = "ENG_London_BUTTON_WINDOW"
		parent_window_token = top_bar #用处是固定在主界面，不会在国策界面显示
		visible = {
			tag = ENG
			has_country_flag = FLAG_ENG_London_crisis_start
		}
		properties = {

		}
		triggers = {
			ENG_London_button_tishijiantou_1_visible = {
				not = {
					has_country_flag = FLAG_ENG_London_button_tishijiantou_visible
				}
			}
			ENG_London_button_tishijiantou_2_visible = {
				not = {
					has_country_flag = FLAG_ENG_London_button_tishijiantou_visible
				}
			}
		}
		effects = {
			ENG_London_button_click = {
				if = {
					limit = {
						has_country_flag = ENG_London_map_gui_visble
					}
					clr_country_flag = ENG_London_map_gui_visble
					ENG_London_close_manpower_defense_window = yes
				}
				else = {
					set_country_flag = ENG_London_map_gui_visble
				}
				if = {
					limit = {
						not = {
							has_country_flag = FLAG_ENG_London_button_tishijiantou_visible
						}
					}	
					set_country_flag = FLAG_ENG_London_button_tishijiantou_visible
				}
			}
		}
	}


	ENG_London_map_gui_window = { #地图gui
		window_name = "ENG_London_map_gui_window"
		visible = {
			tag = ENG
			has_country_flag = ENG_London_map_gui_visble
		}
		effects = {
			close_button_click = { #关闭按钮
				clr_country_flag = ENG_London_map_gui_visble 
				ENG_London_close_manpower_defense_window = yes
			}
			#操作模块按钮效果
				ENG_London_state_police_button_click = { #加强区域警备 
					add_political_power = -30
					random_list = {
						20 = {
							var:ENG_London_map_selected_state = {
								add_to_variable = { var_gui_control_degree = 8  }
							}	
							custom_effect_tooltip = ENG_tooltip_var_control_degree_add_8
						}
						60 = {
							var:ENG_London_map_selected_state = {
								add_to_variable = { var_gui_control_degree = 10  }
							}	
							custom_effect_tooltip = ENG_tooltip_var_control_degree_add_10
						}
						20 = {
							var:ENG_London_map_selected_state = {
								add_to_variable = { var_gui_control_degree = 12  }
							}	
							custom_effect_tooltip = ENG_tooltip_var_control_degree_add_12
						}
					}
					ENG_jisuan_London_control = yes 
					custom_effect_tooltip = ENG_tooltip_var_control_degree_add_10
					clr_country_flag = FLAG_london_police_click

					hidden_effect = {
						country_event = {
							id = ENG_event.11401
							days = 20
						}
					}
				}
				ENG_London_state_seal_up_button_click = { #查封左翼据点 
					add_political_power = -5
					var:ENG_London_map_selected_state = {
						add_to_variable = { var_gui_control_degree = 10  }
					}	
					ENG_jisuan_London_control = yes
					custom_effect_tooltip = ENG_tooltip_var_control_degree_add_10

					random_list = {
						50 = {
							add_to_variable = { ENG_lianhezhenxian_jijindu = 8  }
							custom_effect_tooltip = ENG_tooltip_var_lhzx_jijindu_add_8
 
						}
						40 = {
							add_to_variable = { ENG_lianhezhenxian_jijindu = 10  }
							custom_effect_tooltip = ENG_tooltip_var_lhzx_jijindu_add_10
						}
						10 = {
							add_to_variable = { ENG_lianhezhenxian_jijindu = 20  }
							custom_effect_tooltip = ENG_tooltip_var_lhzx_jijindu_add_20
						}
					}
					VAR_ENG_all_jijindu_clamp = yes
					ENG_jisuan_VAR_ewzc_dqzcl = yes	
					
					clr_country_flag = FLAG_london_seal_up_click

					hidden_effect = {
						country_event = {
							id = ENG_event.11402
							days = 40
						}
					}
				}
				ENG_London_state_build_fortress_button_click = { #修建防御工事
					add_political_power = -50
					var:ENG_London_map_selected_state = {
						add_to_variable = { var_gui_fortress_level = 1  }
					}	
					ENG_jisuan_London_fortress = yes
					custom_effect_tooltip = ENG_tooltip_var_build_fortress_add_1

					clr_country_flag = FLAG_london_build_fortress_click

					hidden_effect = {
						country_event = {
							id = ENG_event.11403
							days = 40
						}
					}
				}

				ENG_London_state_defense_button_click = { #防御
					ENG_London_close_manpower_defense_window = yes
					set_country_flag = FLAG_ENG_London_defense_gui_visble
				}
				
				ENG_London_state_attack_button_click = { #进攻
					ENG_London_close_manpower_defense_window = yes
					ENG_jisuan_London_fortress_effect = yes
					set_country_flag = FLAG_ENG_London_attack_gui_visble
				}
				ENG_London_state_action_button_click = { #特殊行动
					ENG_London_close_manpower_defense_window = yes
					ENG_jisuan_London_fortress_effect = yes
					set_country_flag = FLAG_ENG_London_action_gui_visble
				}
			#作弊按钮
				ENG_London_state_info_control_debug_button_add_click = { #
					var:ENG_London_map_selected_state = {
						add_to_variable = { var_gui_control_degree = 10  }
					}	
					ENG_jisuan_London_control = yes
				}
				ENG_London_state_info_control_debug_button_sub_click = { #
					var:ENG_London_map_selected_state = {
						add_to_variable = { var_gui_control_degree = -10  }
					}	
					ENG_jisuan_London_control = yes
				}

				ENG_London_state_info_defense_debug_button_add_click = { #
					var:ENG_London_map_selected_state = {
						add_to_variable = { var_gui_defense_power = 10  }
					}	
					ENG_jisuan_London_defense = yes
				}
				ENG_London_state_info_defense_debug_button_sub_click = { #
					var:ENG_London_map_selected_state = {
						add_to_variable = { var_gui_defense_power = -10  }
					}	
					ENG_jisuan_London_defense = yes
				}

				ENG_London_state_info_fortress_debug_button_add_click = { #
					var:ENG_London_map_selected_state = {
						add_to_variable = { var_gui_fortress_level = 1  }
					}	
					ENG_jisuan_London_fortress = yes
				}
				ENG_London_state_info_fortress_debug_button_sub_click = { #
					var:ENG_London_map_selected_state = {
						add_to_variable = { var_gui_fortress_level = -1  }
					}	
					ENG_jisuan_London_fortress = yes
				}
				#转变地块颜色的按钮
				ENG_London_state_debug_become_red_button_click = { #
					var:ENG_London_map_selected_state = {
						set_variable = { gui_display_frame = 1 }
					}	
				}
				ENG_London_state_debug_become_blue_button_click = { #
					var:ENG_London_map_selected_state = {
						set_variable = { gui_display_frame = 2 }
					}	
				}
				ENG_London_state_debug_become_white_button_click = { #
					var:ENG_London_map_selected_state = {
						set_variable = { gui_display_frame = 3 }
					}	
				}
				ENG_London_state_debug_become_black_button_click = { #
					var:ENG_London_map_selected_state = {
						set_variable = { gui_display_frame = 4 }
					}	
				}

			#地块按钮
				ENG_London_map_election_state_01_click = { #
					set_country_flag = ENG_London_map_info_window_Visible
					set_variable = { ENG_London_map_selected_state = 01 }
					ENG_London_close_manpower_defense_window = yes
				}
				ENG_London_map_election_state_02_click = { #
					set_country_flag = ENG_London_map_info_window_Visible
					set_variable = { ENG_London_map_selected_state = 02 }
					ENG_London_close_manpower_defense_window = yes
				}
				ENG_London_map_election_state_03_click = { #
					set_country_flag = ENG_London_map_info_window_Visible
					set_variable = { ENG_London_map_selected_state = 03 }
					ENG_London_close_manpower_defense_window = yes
				}
				ENG_London_map_election_state_04_click = { #
					set_country_flag = ENG_London_map_info_window_Visible
					set_variable = { ENG_London_map_selected_state = 04 }
					ENG_London_close_manpower_defense_window = yes
				}
				ENG_London_map_election_state_05_click = { #
					set_country_flag = ENG_London_map_info_window_Visible
					set_variable = { ENG_London_map_selected_state = 05 }
					ENG_London_close_manpower_defense_window = yes
				}
				ENG_London_map_election_state_06_click = { #
					set_country_flag = ENG_London_map_info_window_Visible
					set_variable = { ENG_London_map_selected_state = 06 }
					ENG_London_close_manpower_defense_window = yes
				}
				ENG_London_map_election_state_07_click = { #
					set_country_flag = ENG_London_map_info_window_Visible
					set_variable = { ENG_London_map_selected_state = 07 }
					ENG_London_close_manpower_defense_window = yes
				}
				ENG_London_map_election_state_08_click = { #
					set_country_flag = ENG_London_map_info_window_Visible
					set_variable = { ENG_London_map_selected_state = 08 }
					ENG_London_close_manpower_defense_window = yes
				}
				ENG_London_map_election_state_09_click = { #
					set_country_flag = ENG_London_map_info_window_Visible
					set_variable = { ENG_London_map_selected_state = 09 }
					ENG_London_close_manpower_defense_window = yes
				}
				ENG_London_map_election_state_10_click = { #
					set_country_flag = ENG_London_map_info_window_Visible
					set_variable = { ENG_London_map_selected_state = 10 }
					ENG_London_close_manpower_defense_window = yes
				}
				ENG_London_map_election_state_11_click = { #
					set_country_flag = ENG_London_map_info_window_Visible
					set_variable = { ENG_London_map_selected_state = 11 }
					ENG_London_close_manpower_defense_window = yes
				}
				ENG_London_map_election_state_12_click = { #
					set_country_flag = ENG_London_map_info_window_Visible
					set_variable = { ENG_London_map_selected_state = 12 }
					ENG_London_close_manpower_defense_window = yes
				}
				ENG_London_map_election_state_13_click = { #
					set_country_flag = ENG_London_map_info_window_Visible
					set_variable = { ENG_London_map_selected_state = 13 }
					ENG_London_close_manpower_defense_window = yes
				}
				ENG_London_map_election_state_14_click = { #
					set_country_flag = ENG_London_map_info_window_Visible
					set_variable = { ENG_London_map_selected_state = 14 }
					ENG_London_close_manpower_defense_window = yes
				}

		}
		triggers = {
		 #地块高亮	
			ENG_London_map_state_outline_01_visible = {
				check_variable = { ENG_London_map_selected_state = 01 }
			}
			ENG_London_map_state_outline_02_visible = {
				check_variable = { ENG_London_map_selected_state = 02 }
			}
			ENG_London_map_state_outline_03_visible = {
				check_variable = { ENG_London_map_selected_state = 03 }
			}
			ENG_London_map_state_outline_04_visible = {
				check_variable = { ENG_London_map_selected_state = 04 }
			}
			ENG_London_map_state_outline_05_visible = {
				check_variable = { ENG_London_map_selected_state = 05 }
			}
			ENG_London_map_state_outline_06_visible = {
				check_variable = { ENG_London_map_selected_state = 06 }
			}
			ENG_London_map_state_outline_07_visible = {
				check_variable = { ENG_London_map_selected_state = 07 }
			}
			ENG_London_map_state_outline_08_visible = {
				check_variable = { ENG_London_map_selected_state = 08 }
			}
			ENG_London_map_state_outline_09_visible = {
				check_variable = { ENG_London_map_selected_state = 09 }
			}
			ENG_London_map_state_outline_10_visible = {
				check_variable = { ENG_London_map_selected_state = 10 }
			}
			ENG_London_map_state_outline_11_visible = {
				check_variable = { ENG_London_map_selected_state = 11 }
			}
			ENG_London_map_state_outline_12_visible = {
				check_variable = { ENG_London_map_selected_state = 12 }
			}
			ENG_London_map_state_outline_13_visible = {
				check_variable = { ENG_London_map_selected_state = 13 }
			}
			ENG_London_map_state_outline_14_visible = {
				check_variable = { ENG_London_map_selected_state = 14 }
			}
		 #地块标题
			ENG_London_state_info_title_01_visible = {
				check_variable = { ENG_London_map_selected_state = 01 }
			}
			ENG_London_state_info_title_02_visible = {
				check_variable = { ENG_London_map_selected_state = 02 }
			}
			ENG_London_state_info_title_03_visible = {
				check_variable = { ENG_London_map_selected_state = 03 }
			}
			ENG_London_state_info_title_04_visible = {
				check_variable = { ENG_London_map_selected_state = 04 }
			}
			ENG_London_state_info_title_05_visible = {
				check_variable = { ENG_London_map_selected_state = 05 }
			}
			ENG_London_state_info_title_06_visible = {
				check_variable = { ENG_London_map_selected_state = 06 }
			}
			ENG_London_state_info_title_07_visible = {
				check_variable = { ENG_London_map_selected_state = 07 }
			}
			ENG_London_state_info_title_08_visible = {
				check_variable = { ENG_London_map_selected_state = 08 }
			}
			ENG_London_state_info_title_09_visible = {
				check_variable = { ENG_London_map_selected_state = 09 }
			}
			ENG_London_state_info_title_10_visible = {
				check_variable = { ENG_London_map_selected_state = 10 }
			}
			ENG_London_state_info_title_11_visible = {
				check_variable = { ENG_London_map_selected_state = 11 }
			}
			ENG_London_state_info_title_12_visible = {
				check_variable = { ENG_London_map_selected_state = 12 }
			}
			ENG_London_state_info_title_13_visible = {
				check_variable = { ENG_London_map_selected_state = 13 }
			}
			ENG_London_state_info_title_14_visible = {
				check_variable = { ENG_London_map_selected_state = 14 }
			}

		 #地块标题图片
			ENG_London_info_title_picture_01_visible = {
				check_variable = { ENG_London_map_selected_state = 01 }
			}
			ENG_London_info_title_picture_02_visible = {
				check_variable = { ENG_London_map_selected_state = 02 }
			}
			ENG_London_info_title_picture_03_visible = {
				check_variable = { ENG_London_map_selected_state = 03 }
			}
			ENG_London_info_title_picture_04_visible = {
				check_variable = { ENG_London_map_selected_state = 04 }
			}
			ENG_London_info_title_picture_05_visible = {
				check_variable = { ENG_London_map_selected_state = 05 }
			}
			ENG_London_info_title_picture_06_visible = {
				check_variable = { ENG_London_map_selected_state = 06 }
			}
			ENG_London_info_title_picture_07_visible = {
				check_variable = { ENG_London_map_selected_state = 07 }
			}
			ENG_London_info_title_picture_08_visible = {
				check_variable = { ENG_London_map_selected_state = 08 }
			}
			ENG_London_info_title_picture_09_visible = {
				check_variable = { ENG_London_map_selected_state = 09 }
			}
			ENG_London_info_title_picture_10_visible = {
				check_variable = { ENG_London_map_selected_state = 10 }
			}
			ENG_London_info_title_picture_11_visible = {
				check_variable = { ENG_London_map_selected_state = 11 }
			}
			ENG_London_info_title_picture_12_visible = {
				check_variable = { ENG_London_map_selected_state = 12 }
			}
			ENG_London_info_title_picture_13_visible = {
				check_variable = { ENG_London_map_selected_state = 13 }
			}
			ENG_London_info_title_picture_14_visible = {
				check_variable = { ENG_London_map_selected_state = 14 }
			}
		 
		 #按钮框出现限制
		 	ENG_London_state_police_button_visible = {
				not = {
					has_country_flag = FLAG_ENG_London_second_stage_start
				}
			}
			ENG_London_state_seal_up_button_visible = {
				not = {
					has_country_flag = FLAG_ENG_London_second_stage_start
				}
			}
			ENG_London_state_build_fortress_button_visible = {
				not = {
					has_country_flag = FLAG_ENG_London_second_stage_start
				}
			}

			ENG_London_state_attack_button_visible = {
				has_country_flag = FLAG_ENG_London_second_stage_start
			}
			ENG_London_state_defense_button_visible = {
				has_country_flag = FLAG_ENG_London_second_stage_start
			}
			ENG_London_state_action_button_visible = {
				has_country_flag = FLAG_ENG_London_second_stage_start
			}

		 #信息模块切换阶段显示(及作弊按钮显示条件)
			ENG_London_state_info_control_force_visible = {
				not = {
					has_country_flag = FLAG_ENG_London_second_stage_start
				}
			}
			ENG_London_state_info_control_var_visible = {
				not = {
					has_country_flag = FLAG_ENG_London_second_stage_start
				}
			}
			ENG_London_state_info_control_debug_button_add_visible = {
				not = {
					has_country_flag = FLAG_ENG_London_second_stage_start
				}
				is_debug = yes
			}
			ENG_London_state_info_control_debug_button_sub_visible = {
				not = {
					has_country_flag = FLAG_ENG_London_second_stage_start
				}
				is_debug = yes
			}
			ENG_London_state_info_fortress_debug_button_add_visible = {
				is_debug = yes
			}
			ENG_London_state_info_fortress_debug_button_sub_visible = {
				is_debug = yes
			}


			ENG_London_state_info_defense_force_visible = {
				has_country_flag = FLAG_ENG_London_second_stage_start
			}
			ENG_London_state_info_defense_var_visible = {
				has_country_flag = FLAG_ENG_London_second_stage_start
			}
			ENG_London_state_info_defense_debug_button_add_visible = {
				has_country_flag = FLAG_ENG_London_second_stage_start
				is_debug = yes
			}
			ENG_London_state_info_defense_debug_button_sub_visible = {
				has_country_flag = FLAG_ENG_London_second_stage_start
				is_debug = yes
			}
			#转变地块颜色的按钮
			ENG_London_state_debug_become_red_button_visible = {
				is_debug = yes
			}
			ENG_London_state_debug_become_blue_button_visible = {
				is_debug = yes
			}
			ENG_London_state_debug_become_white_button_visible = {
				is_debug = yes
			}
			ENG_London_state_debug_become_black_button_visible = {
				is_debug = yes
			}

		 #按钮条件限制
		 	ENG_London_state_police_button_click_enabled = {
				has_political_power > 30 
				has_country_flag = FLAG_london_police_click
				has_completed_focus = ENG_17_ldwj 
			}
			ENG_London_state_seal_up_button_click_enabled = {
				has_political_power > 5 
				has_country_flag = FLAG_london_seal_up_click
				has_completed_focus = ENG_18_sglc
			}
			ENG_London_state_build_fortress_button_click_enabled = {
				has_political_power > 50 
				has_country_flag = FLAG_london_build_fortress_click
				has_completed_focus = ENG_17_ldwj 
			}

			ENG_London_state_attack_button_click_enabled = {
				has_country_flag = FLAG_ENG_cywjhh #处于己方回合

				custom_trigger_tooltip = {
					tooltip = ENG_tooltip_cdqydfkz #此地区由敌方控制
					if = {
						limit = {
							has_country_flag = FLAG_ENG_London_player_select_blue
						}
					
						var:ENG_London_map_selected_state = {
							or = {
								check_variable = {
									gui_display_frame = 1
								}
								check_variable = {
									gui_display_frame = 4
								}
							}
							
						}
					}
				}
				#判定是否有相邻地块可供进攻
					custom_trigger_tooltip = {
						tooltip = ENG_tooltip_zskzlj #我方控制至少一个邻近地区
						if = { #
							limit = {
								check_variable = {
									ENG_London_map_selected_state = 01
								}
							}	
							or = {
								check_variable = {
									02:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									11:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									06:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									07:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									08:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									09:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									10:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}						
							}			
						}

						if = { #
							limit = {
								check_variable = {
									ENG_London_map_selected_state = 02
								}
							}	
							or = {
								check_variable = {
									01:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									11:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									10:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									06:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									05:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									03:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
							}			
						}

						if = { #
							limit = {
								check_variable = {
									ENG_London_map_selected_state = 03
								}
							}	
							or = {
								check_variable = {
									02:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									05:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									04:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
							}			
						}

						if = { #
							limit = {
								check_variable = {
									ENG_London_map_selected_state = 04
								}
							}	
							or = {
								check_variable = {
									03:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									05:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
							}			
						}

						if = { #
							limit = {
								check_variable = {
									ENG_London_map_selected_state = 05
								}
							}	
							or = {
								check_variable = {
									02:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									03:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									04:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									06:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
							}			
						}

						if = { #
							limit = {
								check_variable = {
									ENG_London_map_selected_state = 06
								}
							}	
							or = {
								check_variable = {
									01:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									02:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									05:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									07:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
							}			
						}

						if = { #
							limit = {
								check_variable = {
									ENG_London_map_selected_state = 07
								}
							}	
							or = {
								check_variable = {
									01:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									14:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									08:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									06:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
							}			
						}

						if = { #
							limit = {
								check_variable = {
									ENG_London_map_selected_state = 08
								}
							}	
							or = {
								check_variable = {
									01:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									07:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									09:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									12:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									13:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									14:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
							}			
						}

						if = { #
							limit = {
								check_variable = {
									ENG_London_map_selected_state = 09
								}
							}	
							or = {
								check_variable = {
									01:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									08:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									10:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									12:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
							}			
						}

						if = { #
							limit = {
								check_variable = {
									ENG_London_map_selected_state = 10
								}
							}	
							or = {
								check_variable = {
									01:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									02:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									09:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									11:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
							}			
						}

						if = { #
							limit = {
								check_variable = {
									ENG_London_map_selected_state = 11
								}
							}	
							or = {
								check_variable = {
									01:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									02:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									10:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
							}			
						}

						if = { #
							limit = {
								check_variable = {
									ENG_London_map_selected_state = 12
								}
							}	
							or = {
								check_variable = {
									08:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									09:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									13:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
							}			
						}

						if = { #
							limit = {
								check_variable = {
									ENG_London_map_selected_state = 13
								}
							}	
							or = {
								check_variable = {
									08:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									12:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									14:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
							}			
						}

						if = { #
							limit = {
								check_variable = {
									ENG_London_map_selected_state = 14
								}
							}	
							or = {
								check_variable = {
									07:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									08:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
								check_variable = {
									13:gui_display_frame = VAR_ENG_London_player_gui_display_frame
								}
							}			
						}
					}	

				#
			}
			ENG_London_state_defense_button_click_enabled = {
				has_country_flag = FLAG_ENG_cywjhh #处于己方回合
				
				custom_trigger_tooltip = {
					tooltip = ENG_tooltip_dqwfkz #此地区由己方控制
					if = {
						limit = {
							has_country_flag = FLAG_ENG_London_player_select_blue
						}
						var:ENG_London_map_selected_state = {
							check_variable = {
								gui_display_frame = 2
							}
						}	
					}
				}
			}
			ENG_London_state_action_button_click_enabled = {

			}
		 #驻守部队图标显示
		 	ENG_London_state_info_army_icon_gh_visible = { #工会
				has_country_flag = FLAG_ENG_London_second_stage_start
				check_variable = {
					ENG_London_map_selected_state:gui_display_frame = 1
				}	
			}
			ENG_London_state_info_army_icon_jdbd_visible = { #快反部队
				has_country_flag = FLAG_ENG_London_second_stage_start
				check_variable = {
					ENG_London_map_selected_state:gui_display_frame = 4
				}	
			}
			ENG_London_state_info_army_icon_sjs_visible = { #首警司
				or = {
					and = { #阶段二
						has_country_flag = FLAG_ENG_London_second_stage_start
						check_variable = {
							ENG_London_map_selected_state:gui_display_frame = 2
						}	
					}
					and = { #阶段一
						not = {
							has_country_flag = FLAG_ENG_London_second_stage_start
						}
						check_variable = {
							ENG_London_map_selected_state:army_icon = 2
						}	
					}
				}

			}
			ENG_London_state_info_army_icon_wswd_visible = { #王室卫队
				or = {
					and = { #阶段二
						has_country_flag = FLAG_ENG_London_second_stage_start
						check_variable = {
							ENG_London_map_selected_state:gui_display_frame = 3
						}
					}
					and = {
						not = { #阶段一
							has_country_flag = FLAG_ENG_London_second_stage_start
						}
						check_variable = {
							ENG_London_map_selected_state:army_icon = 3
						}	
					}
				}
			}
			ENG_London_state_info_army_icon_police_visible = { #苏格兰场(阶段一)
				not = {
					has_country_flag = FLAG_ENG_London_second_stage_start
				}
				check_variable = {
					ENG_London_map_selected_state:army_icon = 1
				}	
			}

		 #指挥官图标显示
			ENG_London_state_info_commander_Altria_Pendragon_visible = { #呆毛
				always = no
			}
			ENG_London_state_info_commander_Togawa_Sakiko_visible = { #丰川祥子
				has_country_flag = FLAG_ENG_London_second_stage_start
				check_variable = {
					ENG_London_map_selected_state:gui_display_frame = 1
				}	
			}
			ENG_London_state_info_commander_dajiling_visible = { #大吉岭
				has_country_flag = FLAG_ENG_London_second_stage_start
				check_variable = {
					ENG_London_map_selected_state:gui_display_frame = 4
				}	
			}
			ENG_London_state_info_commander_Shiina_Taki_visible = { #椎名立希
				or = {
					and = { #阶段二
						has_country_flag = FLAG_ENG_London_second_stage_start
						check_variable = {
							ENG_London_map_selected_state:gui_display_frame = 2
						}	
					}
					and = { #阶段一
						not = {
							has_country_flag = FLAG_ENG_London_second_stage_start
						}
						check_variable = {
							ENG_London_map_selected_state:army_icon = 2
						}	
					}
				}

			}
			ENG_London_state_info_commander_gaowen_visible = { #高文
				or = {
					and = { #阶段二
						has_country_flag = FLAG_ENG_London_second_stage_start
						check_variable = {
							ENG_London_map_selected_state:gui_display_frame = 3
						}
					}
					and = {
						not = { #阶段一
							has_country_flag = FLAG_ENG_London_second_stage_start
						}
						check_variable = {
							ENG_London_map_selected_state:army_icon = 3
						}	
					}
				}
			}
			ENG_London_state_info_commander_Chihaya_Anon_visible = { #千早爱音(阶段一)
				not = {
					has_country_flag = FLAG_ENG_London_second_stage_start
				}
				check_variable = {
					ENG_London_map_selected_state:army_icon = 1
				}	
			}
		 #
		 #
		}
		properties = {
			ENG_London_map_election_state_01 = {
				frame = 01:gui_display_frame
			}
			ENG_London_map_election_state_02 = {
				frame = 02:gui_display_frame
			}
			ENG_London_map_election_state_03 = {
				frame = 03:gui_display_frame
			}
			ENG_London_map_election_state_04 = {
				frame = 04:gui_display_frame
			}
			ENG_London_map_election_state_05 = {
				frame = 05:gui_display_frame
			}
			ENG_London_map_election_state_06 = {
				frame = 06:gui_display_frame
			}
			ENG_London_map_election_state_07 = {
				frame = 07:gui_display_frame
			}
			ENG_London_map_election_state_08 = {
				frame = 08:gui_display_frame
			}
			ENG_London_map_election_state_09 = {
				frame = 09:gui_display_frame
			}
			ENG_London_map_election_state_10 = {
				frame = 10:gui_display_frame
			}
			ENG_London_map_election_state_11 = {
				frame = 11:gui_display_frame
			}
			ENG_London_map_election_state_12 = {
				frame = 12:gui_display_frame
			}
			ENG_London_map_election_state_13 = {
				frame = 13:gui_display_frame
			}
			ENG_London_map_election_state_14 = {
				frame = 14:gui_display_frame
			}
		}
	}

	ENG_London_defense_window = { #部署防御操作框
		window_name = "ENG_London_defense_window"
		visible = {
			tag = ENG
			has_country_flag = FLAG_ENG_London_defense_gui_visble
		}
		properties = {

		}
		triggers = {
			ENG_London_manpower_select_button_irregular_add_click_enabled = {
				check_variable = {
					VAR_ENG_London_gui_action_point_cost < VAR_ENG_London_current_action_point
				}				
			}
			ENG_London_manpower_select_button_infantry_add_click_enabled = {
				check_variable = {
					VAR_ENG_London_gui_action_point_cost < VAR_ENG_London_current_action_point
				}
			}
			ENG_London_manpower_select_button_tank_add_click_enabled = {
				check_variable = {
					VAR_ENG_London_gui_action_point_cost < VAR_ENG_London_current_action_point
				}
			}
			ENG_London_manpower_select_button_yes_click_enabled = {
				has_country_flag = FLAG_ENG_cywjhh
			}
		}
		effects = {
			close_button_click = { #关闭按钮
				clr_country_flag = FLAG_ENG_London_defense_gui_visble 
				#重置数据
				set_variable = {
					VAR_ENG_London_gui_manpower_select_player_irregular = 0
				}
				set_variable = {
					VAR_ENG_London_gui_manpower_select_player_infantry = 0
				}
				set_variable = {
					VAR_ENG_London_gui_manpower_select_player_tank = 0
				}
				ENG_jisuan_London_manpower_select_defense_effect = yes
			}
			#部队选择按钮
				ENG_London_manpower_select_button_irregular_sub_click = { #民兵减
					add_to_variable = { 
						VAR_ENG_London_gui_manpower_select_player_irregular = -1 
					}
					clamp_variable = {
						var = VAR_ENG_London_gui_manpower_select_player_irregular
						min = 0
						max = VAR_ENG_London_gui_manpower_player_number_irregular
					}
					ENG_jisuan_London_manpower_select_defense_effect = yes
				}
				ENG_London_manpower_select_button_irregular_add_click = { #民兵加
					add_to_variable = { 
						VAR_ENG_London_gui_manpower_select_player_irregular = 1 
					}
					clamp_variable = {
						var = VAR_ENG_London_gui_manpower_select_player_irregular
						min = 0
						max = VAR_ENG_London_gui_manpower_player_number_irregular
					}
					ENG_jisuan_London_manpower_select_defense_effect = yes
				}

				ENG_London_manpower_select_button_infantry_sub_click = { #步兵减
					add_to_variable = { 
						VAR_ENG_London_gui_manpower_select_player_infantry = -1 
					}
					clamp_variable = {
						var = VAR_ENG_London_gui_manpower_select_player_infantry
						min = 0
						max = VAR_ENG_London_gui_manpower_player_number_infantry
					}
					ENG_jisuan_London_manpower_select_defense_effect = yes
				}
				ENG_London_manpower_select_button_infantry_add_click = { #步兵加
					add_to_variable = { 
						VAR_ENG_London_gui_manpower_select_player_infantry = 1 
					}
					clamp_variable = {
						var = VAR_ENG_London_gui_manpower_select_player_infantry
						min = 0
						max = VAR_ENG_London_gui_manpower_player_number_infantry
					}
					ENG_jisuan_London_manpower_select_defense_effect = yes
				}

				ENG_London_manpower_select_button_tank_sub_click = { #坦克减
					add_to_variable = { 
						VAR_ENG_London_gui_manpower_select_player_tank = -1 
					}
					clamp_variable = {
						var = VAR_ENG_London_gui_manpower_select_player_tank
						min = 0
						max = VAR_ENG_London_gui_manpower_player_number_tank
					}
					ENG_jisuan_London_manpower_select_defense_effect = yes
				}
				ENG_London_manpower_select_button_tank_add_click = { #坦克加
					add_to_variable = { 
						VAR_ENG_London_gui_manpower_select_player_tank = 1 
					}
					clamp_variable = {
						var = VAR_ENG_London_gui_manpower_select_player_tank
						min = 0
						max = VAR_ENG_London_gui_manpower_player_number_tank
					}
					ENG_jisuan_London_manpower_select_defense_effect = yes
				}
			#重置和确定	
				ENG_London_manpower_select_button_reset_click = { #重置
					set_variable = {
						VAR_ENG_London_gui_manpower_select_player_irregular = 0
					}
					set_variable = {
						VAR_ENG_London_gui_manpower_select_player_infantry = 0
					}
					set_variable = {
						VAR_ENG_London_gui_manpower_select_player_tank = 0
					}
					ENG_jisuan_London_manpower_select_defense_effect = yes
				}

				ENG_London_manpower_select_button_yes_click = { #确定
					#加上防御力
					var:ENG_London_map_selected_state = {
						add_to_variable = { 
							var_gui_defense_power = ENG:VAR_ENG_London_gui_manpower_select_defense_effect  
						}
					}						

					ENG_jisuan_London_defense = yes
					#从玩家可用兵力变量中扣除消耗的兵力
					subtract_from_variable = {
						VAR_ENG_London_gui_manpower_player_number_irregular = VAR_ENG_London_gui_manpower_select_player_irregular
					}
					subtract_from_variable = {
						VAR_ENG_London_gui_manpower_player_number_infantry = VAR_ENG_London_gui_manpower_select_player_infantry
					}
					subtract_from_variable = {
						VAR_ENG_London_gui_manpower_player_number_tank = VAR_ENG_London_gui_manpower_select_player_tank
					}
					#扣除行动力
					subtract_from_variable = {
						VAR_ENG_London_current_action_point = VAR_ENG_London_gui_action_point_cost
					}
					#重置数据
					set_variable = {
						VAR_ENG_London_gui_manpower_select_player_irregular = 0
					}
					set_variable = {
						VAR_ENG_London_gui_manpower_select_player_infantry = 0
					}
					set_variable = {
						VAR_ENG_London_gui_manpower_select_player_tank = 0
					}
					ENG_jisuan_London_manpower_select_defense_effect = yes
					#关闭窗口
					clr_country_flag = FLAG_ENG_London_defense_gui_visble 
				}

			#	

		}
	}

	ENG_London_attack_window = { #进攻地区操作框
		window_name = "ENG_London_attack_window"
		visible = {
			tag = ENG
			has_country_flag = FLAG_ENG_London_attack_gui_visble
		}
		properties = {

		}
		triggers = {
			ENG_London_manpower_select_button_irregular_add_click_enabled = {
				check_variable = {
					VAR_ENG_London_gui_action_point_cost < VAR_ENG_London_current_action_point
				}				
			}
			ENG_London_manpower_select_button_infantry_add_click_enabled = {
				check_variable = {
					VAR_ENG_London_gui_action_point_cost < VAR_ENG_London_current_action_point
				}
			}
			ENG_London_manpower_select_button_tank_add_click_enabled = {
				check_variable = {
					VAR_ENG_London_gui_action_point_cost < VAR_ENG_London_current_action_point
				}
			}
			ENG_London_manpower_attack_button_yes_click_enabled = {
				has_country_flag = FLAG_ENG_cywjhh #处于玩家回合
			}
		}
		effects = {
			close_button_click = { #关闭按钮
				clr_country_flag = FLAG_ENG_London_attack_gui_visble 
				#重置数据
				set_variable = {
					VAR_ENG_London_gui_manpower_select_player_irregular = 0
				}
				set_variable = {
					VAR_ENG_London_gui_manpower_select_player_infantry = 0
				}
				set_variable = {
					VAR_ENG_London_gui_manpower_select_player_tank = 0
				}
				ENG_jisuan_London_manpower_select_defense_effect = yes
			}
			#部队选择按钮
				ENG_London_manpower_select_button_irregular_sub_click = { #民兵减
					add_to_variable = { 
						VAR_ENG_London_gui_manpower_select_player_irregular = -1 
					}
					clamp_variable = {
						var = VAR_ENG_London_gui_manpower_select_player_irregular
						min = 0
						max = VAR_ENG_London_gui_manpower_player_number_irregular
					}
					ENG_jisuan_London_manpower_select_defense_effect = yes
				}
				ENG_London_manpower_select_button_irregular_add_click = { #民兵加
					add_to_variable = { 
						VAR_ENG_London_gui_manpower_select_player_irregular = 1 
					}
					clamp_variable = {
						var = VAR_ENG_London_gui_manpower_select_player_irregular
						min = 0
						max = VAR_ENG_London_gui_manpower_player_number_irregular
					}
					ENG_jisuan_London_manpower_select_defense_effect = yes
				}

				ENG_London_manpower_select_button_infantry_sub_click = { #步兵减
					add_to_variable = { 
						VAR_ENG_London_gui_manpower_select_player_infantry = -1 
					}
					clamp_variable = {
						var = VAR_ENG_London_gui_manpower_select_player_infantry
						min = 0
						max = VAR_ENG_London_gui_manpower_player_number_infantry
					}
					ENG_jisuan_London_manpower_select_defense_effect = yes
				}
				ENG_London_manpower_select_button_infantry_add_click = { #步兵加
					add_to_variable = { 
						VAR_ENG_London_gui_manpower_select_player_infantry = 1 
					}
					clamp_variable = {
						var = VAR_ENG_London_gui_manpower_select_player_infantry
						min = 0
						max = VAR_ENG_London_gui_manpower_player_number_infantry
					}
					ENG_jisuan_London_manpower_select_defense_effect = yes
				}

				ENG_London_manpower_select_button_tank_sub_click = { #坦克减
					add_to_variable = { 
						VAR_ENG_London_gui_manpower_select_player_tank = -1 
					}
					clamp_variable = {
						var = VAR_ENG_London_gui_manpower_select_player_tank
						min = 0
						max = VAR_ENG_London_gui_manpower_player_number_tank
					}
					ENG_jisuan_London_manpower_select_defense_effect = yes
				}
				ENG_London_manpower_select_button_tank_add_click = { #坦克加
					add_to_variable = { 
						VAR_ENG_London_gui_manpower_select_player_tank = 1 
					}
					clamp_variable = {
						var = VAR_ENG_London_gui_manpower_select_player_tank
						min = 0
						max = VAR_ENG_London_gui_manpower_player_number_tank
					}
					ENG_jisuan_London_manpower_select_defense_effect = yes
				}
			#	
				ENG_London_manpower_attack_button_reset_click = { #重置
					set_variable = {
						VAR_ENG_London_gui_manpower_select_player_irregular = 0
					}
					set_variable = {
						VAR_ENG_London_gui_manpower_select_player_infantry = 0
					}
					set_variable = {
						VAR_ENG_London_gui_manpower_select_player_tank = 0
					}
					ENG_jisuan_London_manpower_select_defense_effect = yes
				}
				ENG_London_manpower_attack_button_yes_click = { #确定
					#造成伤害，并判定
					var:ENG_London_map_selected_state = {
						subtract_from_variable = { 
							var_gui_defense_power = ENG:VAR_ENG_London_gui_manpower_select_attack_effect  
						}
					}	
					if = {
						limit = { #如果伤害够了
							check_variable = {
								ENG_London_map_selected_state:var_gui_defense_power < 1
							}
						}
						multiply_variable = { #把溢出伤害转化为防御力
							var = ENG_London_map_selected_state:var_gui_defense_power
							value = -1
						}
						ENG_panding_London_state_owner_to_player = yes #将当前地块归属划归玩家
					}

					ENG_jisuan_London_defense = yes

					#从玩家可用兵力变量中扣除消耗的兵力
					subtract_from_variable = {
						VAR_ENG_London_gui_manpower_player_number_irregular = VAR_ENG_London_gui_manpower_select_player_irregular
					}
					subtract_from_variable = {
						VAR_ENG_London_gui_manpower_player_number_infantry = VAR_ENG_London_gui_manpower_select_player_infantry
					}
					subtract_from_variable = {
						VAR_ENG_London_gui_manpower_player_number_tank = VAR_ENG_London_gui_manpower_select_player_tank
					}
					#扣除行动力
					subtract_from_variable = {
						VAR_ENG_London_current_action_point = VAR_ENG_London_gui_action_point_cost
					}
					#重置数据
					set_variable = {
						VAR_ENG_London_gui_manpower_select_player_irregular = 0
					}
					set_variable = {
						VAR_ENG_London_gui_manpower_select_player_infantry = 0
					}
					set_variable = {
						VAR_ENG_London_gui_manpower_select_player_tank = 0
					}
					ENG_jisuan_London_manpower_select_defense_effect = yes
					#关闭窗口
					clr_country_flag = FLAG_ENG_London_attack_gui_visble 
				}

			#	

		}
	}

	ENG_London_action_window = { #特殊行动操作框
		window_name = "ENG_London_action_window"
		visible = {
			tag = ENG
			has_country_flag = FLAG_ENG_London_action_gui_visble
		}
		properties = {

		}
		triggers = {
			#火炮支援
				ENG_London_artillery_support_title_visible = { #标题可见
					has_country_flag = FLAG_ENG_London_artillery_support_visible
				}
				ENG_London_artillery_support_effect_visible = { #详情可见
					has_country_flag = FLAG_ENG_London_artillery_support_visible
				}
				ENG_London_artillery_support_yes_button_visible = { #确定键可见
					has_country_flag = FLAG_ENG_London_artillery_support_visible
				}
			#修筑工事
				ENG_London_defensive_works_title_visible = { #标题可见
					has_country_flag = FLAG_ENG_London_defensive_works_visible
				}
				ENG_London_defensive_works_effect_visible = { #详情可见
					has_country_flag = FLAG_ENG_London_defensive_works_visible
				}
				ENG_London_defensive_works_yes_button_visible = { #确定键可见
					has_country_flag = FLAG_ENG_London_defensive_works_visible
				}
			#发动空袭
				ENG_London_air_strike_title_visible = { #标题可见
					has_country_flag = FLAG_ENG_London_air_strike_visible
				}
				ENG_London_air_strike_effect_visible = { #详情可见
					has_country_flag = FLAG_ENG_London_air_strike_visible
				}
				ENG_London_air_strike_yes_button_visible = { #确定键可见
					has_country_flag = FLAG_ENG_London_air_strike_visible
				}
			#垂直进攻
				ENG_London_vertical_attack_title_visible = { #标题可见
					has_country_flag = FLAG_ENG_London_vertical_attack_visible
				}
				ENG_London_vertical_attack_effect_visible = { #详情可见
					has_country_flag = FLAG_ENG_London_vertical_attack_visible
				}
				ENG_London_vertical_attack_yes_button_visible = { #确定键可见
					has_country_flag = FLAG_ENG_London_vertical_attack_visible
				}

			#确定键点击条件	
				ENG_London_artillery_support_yes_button_click_enabled = { #火炮支援
					has_country_flag = FLAG_ENG_cywjhh
					custom_trigger_tooltip = {
						tooltip = ENG_tooltip_cdqydfkz #此地区由敌方控制
						if = {
							limit = {
								has_country_flag = FLAG_ENG_London_player_select_blue
							}
						
							var:ENG_London_map_selected_state = {
								or = {
									check_variable = {
										gui_display_frame = 1
									}
									check_variable = {
										gui_display_frame = 4
									}
								}
								
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = ENG_tooltip_xdlcz #行动力充足
						check_variable = {
							VAR_ENG_London_current_action_point > 1
						}
					}
					custom_trigger_tooltip = {
						tooltip = ENG_tooltip_kycsdy0 #可用次数大于0
						check_variable = {
							VAR_ENG_London_artillery_support_num > 0
						}
					}
					custom_trigger_tooltip = {
						tooltip = ENG_tooltip_kzczq #我方或盟友控制炮兵阵地
						or = {
							check_variable = {
								04:gui_display_frame = 2
							}
							check_variable = {
								04:gui_display_frame = 3
							}
							and = {
								check_variable = {
									14:gui_display_frame = 2
								}
								has_country_flag = FLAG_ENG_yulysjs #快反部队已经于刘易斯区架设炮兵阵地
							}
							and = {
								check_variable = {
									14:gui_display_frame = 3
								}
								has_country_flag = FLAG_ENG_yulysjs #快反部队已经于刘易斯区架设炮兵阵地
							}						
						}
						
					}
				}

				ENG_London_defensive_works_yes_button_click_enabled = { #修筑工事
					has_country_flag = FLAG_ENG_cywjhh
					custom_trigger_tooltip = {
						tooltip = ENG_tooltip_dqwfkz #此地区由我方控制
						if = {
							limit = {
								has_country_flag = FLAG_ENG_London_player_select_blue
							}
						
							var:ENG_London_map_selected_state = {
								check_variable = {
									gui_display_frame = 2
								}
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = ENG_tooltip_xdlcz #行动力充足
						check_variable = {
							VAR_ENG_London_current_action_point > 9
						}
					}
				}

				ENG_London_air_strike_yes_button_click_enabled = { #发动空袭
					has_country_flag = FLAG_ENG_cywjhh
					custom_trigger_tooltip = {
						tooltip = ENG_tooltip_cdqydfkz #此地区由敌方控制
						if = {
							limit = {
								has_country_flag = FLAG_ENG_London_player_select_blue
							}
						
							var:ENG_London_map_selected_state = {
								or = {
									check_variable = {
										gui_display_frame = 1
									}
									check_variable = {
										gui_display_frame = 4
									}
								}
								
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = ENG_tooltip_xdlcz #行动力充足
						check_variable = {
							VAR_ENG_London_current_action_point > 1
						}
					}
					custom_trigger_tooltip = {
						tooltip = ENG_tooltip_kycsdy0 #可用次数大于0
						check_variable = {
							VAR_ENG_London_air_strike_num > 0
						}
					}
					custom_trigger_tooltip = {
						tooltip = ENG_tooltip_kzjcq #我方或盟友控制机场区
						or = {
							check_variable = {
								09:gui_display_frame = 2
							}
							check_variable = {
								09:gui_display_frame = 3
							}
						}
						
					}
					not = {
						has_country_flag = FLAG_ENG_jcpdbph
					}
				}

				ENG_London_vertical_attack_yes_button_click_enabled = { #垂直进攻	
					has_country_flag = FLAG_ENG_cywjhh	
					custom_trigger_tooltip = {
						tooltip = ENG_tooltip_kycsdy0 #可用次数大于0
						check_variable = {
							VAR_ENG_London_vertical_attack_num > 0
						}
					}
				}


			#	
		}

		effects = {
			close_button_click = { #关闭按钮
				clr_country_flag = FLAG_ENG_London_action_gui_visble 
			}
			ENG_London_manpower_action_button_cancel_click = { #取消按钮
				clr_country_flag = FLAG_ENG_London_action_gui_visble 
			}

			#选择行动按钮效果
			ENG_London_artillery_support_button_click = { #火炮支援
				set_country_flag = FLAG_ENG_London_artillery_support_visible 

				clr_country_flag = FLAG_ENG_London_defensive_works_visible
				clr_country_flag = FLAG_ENG_London_air_strike_visible
				clr_country_flag = FLAG_ENG_London_vertical_attack_visible
			}
			ENG_London_defensive_works_button_click = { #修筑工事
				set_country_flag = FLAG_ENG_London_defensive_works_visible 

				clr_country_flag = FLAG_ENG_London_artillery_support_visible
				clr_country_flag = FLAG_ENG_London_air_strike_visible
				clr_country_flag = FLAG_ENG_London_vertical_attack_visible
			}
			ENG_London_air_strike_button_click = { #空中打击
				set_country_flag = FLAG_ENG_London_air_strike_visible 

				clr_country_flag = FLAG_ENG_London_artillery_support_visible
				clr_country_flag = FLAG_ENG_London_defensive_works_visible
				clr_country_flag = FLAG_ENG_London_vertical_attack_visible
			}
			ENG_London_vertical_attack_button_click = { #空中打击
				set_country_flag = FLAG_ENG_London_vertical_attack_visible 

				clr_country_flag = FLAG_ENG_London_artillery_support_visible
				clr_country_flag = FLAG_ENG_London_defensive_works_visible
				clr_country_flag = FLAG_ENG_London_air_strike_visible
			}

			#确认执行效果
			ENG_London_artillery_support_yes_button_click = { #火炮支援
				add_to_variable = { #扣掉行动力
					VAR_ENG_London_current_action_point = -2
				}
				add_to_variable = { #扣掉可用次数
					VAR_ENG_London_artillery_support_num = -1
				}
				var:ENG_London_map_selected_state = {
					add_to_variable = { var_gui_fortress_level = -1  }
				}	
				ENG_jisuan_London_fortress = yes
			}

			ENG_London_defensive_works_yes_button_click = { #修筑工事
				add_to_variable = { #扣掉行动力
					VAR_ENG_London_current_action_point = -10
				}
				var:ENG_London_map_selected_state = {
					add_to_variable = { var_gui_fortress_level = 1  }
				}	
				ENG_jisuan_London_fortress = yes
			}

			ENG_London_air_strike_yes_button_click = { #空中打击
				add_to_variable = { #扣掉行动力
					VAR_ENG_London_current_action_point = -2
				}
				add_to_variable = { #扣掉可用次数
					VAR_ENG_London_air_strike_num = -1
				}
				var:ENG_London_map_selected_state = {
					add_to_variable = { var_gui_defense_power = -10  }
				}	
				ENG_jisuan_London_defense = yes
			}

			ENG_London_vertical_attack_yes_button_click = { #垂直进攻
				add_to_variable = { #扣掉可用次数
				VAR_ENG_London_vertical_attack_num = -1
				}
				if = {
					limit = { #敌方
						var:ENG_London_map_selected_state = { #
							or = {
								check_variable = {
									gui_display_frame = 1
								}
								check_variable = {
									gui_display_frame = 4
								}
							}
						}
					}
					if = {
						limit = {
							var:ENG_London_map_selected_state = { 
								check_variable = {
									var_gui_defense_power < 30
								}
							}
						}
						var:ENG_London_map_selected_state = {
							set_variable = { gui_display_frame = 2 }
						}	
						var:ENG_London_map_selected_state = {
							set_variable = { var_gui_defense_power = 0 }
						}
					}
					else = {
						var:ENG_London_map_selected_state = {
							add_to_variable = { var_gui_defense_power = -10  }
						}	
					}
				}
				else = {
					var:ENG_London_map_selected_state = {
						add_to_variable = { var_gui_defense_power = 20  }
					}
				}
				ENG_jisuan_London_defense = yes
			}

		}
	}
	ENG_London_decision_ui_window = { #决议gui
		context_type = decision_category
		window_name = "ENG_London_decision_ui_window"

		properties = {
		}

		triggers = {
			ENG_London_date_txt_visible = {
				has_country_flag = FLAG_ENG_London_second_stage_start
			}
			ENG_London_action_point_txt_visible = {
				has_country_flag = FLAG_ENG_London_second_stage_start
			}
		}
		effects = {
			ENG_London_button_click = {
				if = {
					limit = {
						has_country_flag = ENG_London_map_gui_visble
					}
					clr_country_flag = ENG_London_map_gui_visble
					ENG_London_close_manpower_defense_window = yes
				}
				else = {
					set_country_flag = ENG_London_map_gui_visble
				}
			}
		}
		
	}
}





###议会gui
	scripted_gui = {
		ENG_Parliament = {
			window_name = "ENG_Parliament"
			visible = {
				tag = ENG
				has_country_flag = ENG_Parliament_visble
			}
			properties = {
				ENG_Parliament_icon_of_motion = {
					image = "[ENG_Parliament_Icon_of_motion]"
				}
			#党派支持率进度条
				Kings_Party_Support_rate = {
					frame = Kings_Party_Support_rate_var
					x = Kings_Party_Support_rate_progress_x
				}
				Conservative_party_Support_rate = {
					frame = Conservative_party_Support_rate_var
					x = Conservative_party_Support_rate_progress_x
				}
				Labour_party_Support_rate = {
					frame = Labour_party_Support_rate_var
				}
				Holy_Grail_Forward_Alliance_Support_rate = {
					frame = Holy_Grail_Forward_Alliance_Support_rate_var
					x = Holy_Grail_Forward_Alliance_Support_rate_progress_x
				}
			#首相图片
				leader_icon_of_Holy_Grail_Forward_Alliance = {
					image = "[Leader_icon_of_Holy_Grail_Forward_Alliance]"
				}
				leader_icon_of_Kings_Party = {
					image = "[Leader_Icon_of_Kings_Party]"
				}
				leader_icon_of_Conservative_party = {
					image = "[Leader_icon_of_Conservative_party]"
				}
				leader_icon_of_Labour_party = {
					image = "[Leader_icon_of_Labour_party]"
				}
			#党徽图片	
				leader_icon_of_Holy_Grail_Forward_Alliance_dh = {
					image = "GFX_ideology_fascism_group"
				} 
				leader_icon_of_Kings_party_dh = {
					image = "GFX_ideology_Monarchical_socialism"
				}
				leader_icon_of_Conservative_party_dh = {
					image = "[GET_ENG_Icon_of_Conservative_party_dh_txt]"
				}
				leader_icon_of_Labour_party_dh = {
					image = "[GET_ENG_Icon_of_Labour_party_dh_txt]"
				}
			#席位介绍党派标志	
				lianhezhenxian_icon = {
					image = "[GET_VAR_ENG_red_icon_txt]"
				}
	
				gongdang_baoshoudang_icon = {
					image = "[GET_VAR_ENG_blue_icon_txt]"
				}
			#席位gui
				ENG_hounse_of_common_MP_icon = {
					frame = ENG_hounse_of_commons_window_array^i
				}
			#激进度
				Labour_party_Aggressiveness = {
					frame = ENG_lianhezhenxian_jijindu
				}
				Conservative_party_Aggressiveness = {
					frame = ENG_gongdang_baoshoudang_jijindu
				}
				Kings_Party_Aggressiveness = {
					frame = ENG_sbhs_jijindu
				}
				Holy_Grail_Forward_Alliance_Aggressiveness = {
					frame = ENG_qjlm_jijindu
				}
			#法案半圆gui
				ENG_shangyiyuan_icon = {
					frame = ENG_current_shangyiyuan_icon_frame
				}
				ENG_xiayiyuan_icon = {
					frame = ENG_current_xiayiyuan_icon_frame
				}
			#支持率饼图，暂时没用
				Holy_Grail_Forward_Alliance_support = {
					frame = Holy_Grail_Forward_Alliance_support_var
				}
				Kings_Party_support = {
					frame = Kings_Party_support_var
				}
				Conservative_party_support = {
					frame = Conservative_party_support_var
				}
				Labour_party_support = {
					frame = Labour_party_support_var
				}
			}
			dynamic_lists = { #席位gui
				ENG_hounse_of_common_MP = {
					array = ENG_hounse_of_commons_window_array
					index = i
					change_scope = no
					#value = v
					entry_container = ENG_hounse_of_common_MP_entry
				}
			}
			triggers = {
			#议案按钮
				OPEN_hitory_motion_window_visible = {
					check_variable = {
						ENG_Parliament_window_var = 3
					}
				}
			#法案投票界面
				ENG_gui_icon_syy_bz_visible = {
					check_variable = {
						ENG_Parliament_window_var = 3
					}
				}
				ENG_gui_icon_xyy_bz_visible = {
					check_variable = {
						ENG_Parliament_window_var = 3
					}
				}

				ENG_shangyiyuan_icon_visible = {
					check_variable = {
						ENG_Parliament_window_var = 3
					}
				}
				ENG_shangyiyuan_support_header_visible = {
					check_variable = {
						ENG_Parliament_window_var = 3
					}
				}
				ENG_status_shangyiyuan_visible = {
					check_variable = {
						ENG_Parliament_window_var = 3
					}
				}
				ENG_syy_gui_zcfatgdrs_txt_visible = {
					check_variable = {
						ENG_Parliament_window_var = 3
					}
				}
				ENG_shangyiyuan_support_xx_header_visible = {
					check_variable = {
						ENG_Parliament_window_var = 3
					}
				}


				ENG_xiayiyuan_icon_visible = {
					check_variable = {
						ENG_Parliament_window_var = 3
					}
				}
				ENG_status_xiayiyuan_visible = {
					check_variable = {
						ENG_Parliament_window_var = 3
					}
				}
				ENG_xiayiyuan_support_header_visible = {
					check_variable = {
						ENG_Parliament_window_var = 3
					}
				}
				ENG_xyy_gui_zcfatgdrs_txt_visible = {
					check_variable = {
						ENG_Parliament_window_var = 3
					}
				}
				ENG_xiayiyuan_support_xx_header_visible = {
					check_variable = {
						ENG_Parliament_window_var = 3
					}
				}


				ENG_yhzt_header_visible = {
					check_variable = {
						ENG_Parliament_window_var = 3
					}
				}
				ENG_zzd_header_visible = {
					check_variable = {
						ENG_Parliament_window_var = 3
					}
				}
				ENG_yian_mingcheng_header_visible = {
					check_variable = {
						ENG_Parliament_window_var = 3
					}
				}
				ENG_yian_sftg_header_visible = {
					check_variable = {
						ENG_Parliament_window_var = 3
					}
				}


			#席位分配点状图
				ENG_hounse_of_common_MP_icon_visible = {
					check_variable = {
						ENG_Parliament_window_var = 0
					}
				}
			#下议院席位分配
				ENG_xyy_xwfp_header_3_visible = {
					check_variable = {
						ENG_Parliament_window_var = 0
					}
				}
				gongdang_baoshoudang_icon_visible = {
					check_variable = {
						ENG_Parliament_window_var = 0
					}
				}
				ENG_gdbsd_csxw_visible = {
					check_variable = {
						ENG_Parliament_window_var = 0
					}
				}
				ENG_gdbsd_csxw_amount_visible = {
					check_variable = {
						ENG_Parliament_window_var = 0
					}
				}
				lianhezhenxian_icon_visible = {
					check_variable = {
						ENG_Parliament_window_var = 0
					}
				}
				ENG_lhzx_csxw_visible = {
					check_variable = {
						ENG_Parliament_window_var = 0
					}
				}
				ENG_lhzx_csxw_amount_visible = {
					check_variable = {
						ENG_Parliament_window_var = 0
					}
				}
				sbhs_icon_visible = {
					check_variable = {
						ENG_Parliament_window_var = 0
					}
				}
				ENG_sbhs_csxw_visible = {
					check_variable = {
						ENG_Parliament_window_var = 0
					}
				}
				ENG_sbhs_csxw_amount_visible = {
					check_variable = {
						ENG_Parliament_window_var = 0
					}
				}
				qjlm_icon_visible = {
					check_variable = {
						ENG_Parliament_window_var = 0
					}
				}
				ENG_qjlm_csxw_visible = {
					check_variable = {
						ENG_Parliament_window_var = 0
					}
				}
				ENG_qjlm_csxw_amount_visible = {
					check_variable = {
						ENG_Parliament_window_var = 0
					}
				}

			#下议院政党详情（多余的，暂时没用）
				Party_seats_title_visible = {
					check_variable = {
						ENG_Parliament_window_var = 4
					}
				}
				Kings_Party_seats_title_visible = {
					check_variable = {
						ENG_Parliament_window_var = 4
					}
				}
				Conservative_party_seats_title_visible = {
					check_variable = {
						ENG_Parliament_window_var = 4
					}
				}
				Labour_party_seats_title_visible = {
					check_variable = {
						ENG_Parliament_window_var = 4
					}
				}
				Holy_Grail_Forward_Alliance_seats_title_visible = {
					check_variable = {
						ENG_Parliament_window_var = 4
					}
				}
            #政党激进度进度条
				Labour_party_Aggressiveness_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
				Conservative_party_Aggressiveness_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
				Kings_Party_Aggressiveness_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
				Holy_Grail_Forward_Alliance_Aggressiveness_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
				
			#支持率饼图，暂时没用
				Holy_Grail_Forward_Alliance_support_visible = {
					check_variable = {
						ENG_Parliament_window_var = 4
					}
				}
				Kings_Party_support_visible = {
					check_variable = {
						ENG_Parliament_window_var = 4
					}
				}
				Conservative_party_support_visible = {
					check_variable = {
						ENG_Parliament_window_var = 4
					}
				}
				Labour_party_support_visible = {
					check_variable = {
						ENG_Parliament_window_var = 4
					}
				}
				pol_view_bg_visible = {
					check_variable = {
						ENG_Parliament_window_var = 4
					}
				}
				ENG_Parliament_party_supprt_text_visible = {
					check_variable = {
						ENG_Parliament_window_var = 4
					}
				}
			#政党详情
			 #党徽
			 	leader_icon_of_Holy_Grail_Forward_Alliance_dh_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
				leader_icon_of_Kings_party_dh_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
				leader_icon_of_Conservative_party_dh_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
				leader_icon_of_Labour_party_dh_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
			 #王党
				Kings_Party_title_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
				leader_icon_of_Kings_Party_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
				Kings_Party_Support_rate_visible = { 
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
				Kings_Party_Support_rate_text_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
			 #保守党
				Conservative_party_title_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
				leader_icon_of_Conservative_party_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
				Conservative_party_Support_rate_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
				Conservative_party_Support_rate_text_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
			 #工党
				Labour_party_title_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
				leader_icon_of_Labour_party_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
				Labour_party_Support_rate_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
				Labour_party_Support_rate_text_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
			 #圣杯前进联盟
				Holy_Grail_Forward_Alliance_title_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
				leader_icon_of_Holy_Grail_Forward_Alliance_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
				Holy_Grail_Forward_Alliance_Support_rate_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
				Holy_Grail_Forward_Alliance_Support_rate_text_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
			 #框
				ENG_Parliament_Support_rate_bar_frame_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
			 #底部文字
				Electe_the_Prime_Minister_of_Britain_title_visible = {
					check_variable = {
						ENG_Parliament_window_var = 1
					}
				}
			}
			effects = {
				Details_of_the_House_of_Commons_button_click = {
					set_variable = {
						ENG_Parliament_window_var = 0
					}
				}
				Electe_the_Prime_Minister_of_Britain_button_click = {
					set_variable = {
						ENG_Parliament_window_var = 1
					}
				}
				ENG_Parliament_gui_button_fashan_click = {
					set_variable = {
						ENG_Parliament_window_var = 3
					}
				}
				OPEN_hitory_motion_window_click = {
					set_country_flag = ENG_Parliament_hitory_motion_window_visible
				}
				close_button_click = {
					clr_country_flag = ENG_Parliament_visble
				}
			}
		}
	}

	scripted_gui = { #开关
		ENG_Parliament_BUTTON_WINDOW = {
			window_name = "ENG_Parliament_BUTTON_WINDOW"
			parent_window_token = top_bar
			visible = {
				tag = ENG
			}
			properties = {

			}
			triggers = {
				ENG_Parliament_button_tishijiantou_1_visible = {
					not = {
						has_country_flag = FLAG_ENG_Parliament_button_tishijiantou_visible
					}
				}
				ENG_Parliament_button_tishijiantou_2_visible = {
					not = {
						has_country_flag = FLAG_ENG_Parliament_button_tishijiantou_visible
					}
				}
			}
			effects = {
				ENG_Parliament_button_click = {
					ENG_Seat_calculation = yes
					if = {
						limit = {
							has_country_flag = ENG_Parliament_visble
						}
						clr_country_flag = ENG_Parliament_visble
					}
					else = {
						set_country_flag = ENG_Parliament_visble
					}
					if = {
						limit = {
							not = {
								has_country_flag = FLAG_ENG_Parliament_button_tishijiantou_visible
							}
						}	
						set_variable = {
							ENG_Parliament_window_var = 1
						}
						set_country_flag = FLAG_ENG_Parliament_button_tishijiantou_visible
					}
				}
			}
		}
	}

	scripted_gui = { #历史议案
		ENG_Parliament_hitory_motion_window = {
			window_name = "ENG_Parliament_hitory_motion_window"
			visible = {
				tag = ENG
				has_country_flag = ENG_Parliament_hitory_motion_window_visible
			}
			properties = {
				ENG_Parliament_icon_of_history_motion = {
					image = "[ENG_Parliament_Icon_of_history_motion]"
				}
			}
			dynamic_lists = {
				ENG_Parliament_past_motion_list = {
					array = ENG_Parliament_past_motion
					index = ENG_Parliament_past_motion_i
					entry_container = ENG_Parliament_ord
					value = ENG_Parliament_past_motion_id
				}
			}
			triggers = {
			}
			effects = {
				close_button_click = {
					clr_country_flag = ENG_Parliament_hitory_motion_window_visible
				}
			}
		}
	}

#
