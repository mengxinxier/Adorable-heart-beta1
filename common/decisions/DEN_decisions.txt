
DEN_strike_frenzy_decision_category = {

	#杜伦布贼党秘密活动：循环直到罢工消失或者变成红色
	DEN_communist_propaganda = {
		icon = GFX_decision_generic_political_discourse
		priority = 99
		activation = {
			always = no
		}
		available = {
			always = no
		}
		cancel_trigger = {
			OR = {
				has_government = communism
				has_completed_focus = DEN_ban_Durham_bandits
			}
		}
		days_mission_timeout = var:DEN_cp
		timeout_effect = {
			add_popularity = {
				ideology = communism
				popularity = 0.02
			}
			hidden_effect = {
				activate_mission = DEN_communist_propaganda
			}
		}
	}

	#工人威胁罢工：罢工结束或者满足工人要求
	DEN_workers_threaten_to_strike = {
		icon = GFX_decision_generic_political_rally
		priority = 98
		activation = {
			always = no
		}
		available = {
			always = no
		}
		cancel_trigger = {
			OR = {
				has_government = communism
				custom_trigger_tooltip = {
					tooltip = DEN_strike_abatement_tooltip
					NOT = {
						has_idea = DEN_Durham_thieves
						has_idea = DEN_Durham_thieves2
						has_idea = DEN_Durham_thieves3
						has_idea = DEN_Durham_thieves4
					}
				}
			}
		}
		days_mission_timeout = 30
		timeout_effect = {
			DEN_strike_intensification = yes
			hidden_effect = {
				activate_mission = DEN_workers_threaten_to_strike
			}
			random_list = {
				35 = {
					random_owned_controlled_state = {
						damage_building = {
							type = infrastructure
							damage = 1
						}
					}
				}
				25 = {
					random_owned_controlled_state = {
						damage_building = {
							type = industrial_complex
							damage = 1
						}
					}
				}
				10 = {
					add_to_variable = { ubs_load = 50 }
					custom_effect_tooltip = DEN_increase_50_debt
				}
				30 = {

				}
			}
		}
	}

	#工人冲击工会：罢工处于一定阶段并且红色支持度高于25%触发
	DEN_workers_attack_the_union = {
		icon = GFX_decision_generic_political_rally
		priority = 97
		activation = {
			OR = {
				has_idea = DEN_Durham_thieves2
				has_idea = DEN_Durham_thieves3
				has_idea = DEN_Durham_thieves4
			}
			communism > 0.3
			NOT = {
				OR = {
					has_government = communism
					communism < 0.3
					custom_trigger_tooltip = {
						tooltip = DEN_strike_abatement_tooltip
						NOT = {
							has_idea = DEN_Durham_thieves
							has_idea = DEN_Durham_thieves2
							has_idea = DEN_Durham_thieves3
							has_idea = DEN_Durham_thieves4
						}
					}
					has_country_flag = DEN_lose_control_of_the_union
				}
			}
		}
		available = {
			always = no
		}
		cancel_trigger = {
			OR = {
				has_government = communism
				communism < 0.3
				custom_trigger_tooltip = {
					tooltip = DEN_strike_abatement_tooltip
					NOT = {
						has_idea = DEN_Durham_thieves
						has_idea = DEN_Durham_thieves2
						has_idea = DEN_Durham_thieves3
						has_idea = DEN_Durham_thieves4
					}
				}
				has_country_flag = DEN_lose_control_of_the_union
			}
		}
		fire_only_once = no
		days_mission_timeout = 14
		timeout_effect = {
			country_event = den_crisis.6
		}
	}

	#工人党要求选举：50%以上红色支持度触发
	DEN_worker_party_called_for_elections = {
		icon = GFX_decision_generic_political_rally
		priority = 96
		activation = {
			communism > 0.5
			NOT = { has_government = communism }
			OR = {
				has_idea = DEN_Durham_thieves3
				has_idea = DEN_Durham_thieves4
			}
			NOT = { has_country_flag = DEN_rejection_of_election }
		}
		available = {
			always = no
		}
		cancel_trigger = {
			OR = {
				has_government = communism
				communism < 0.5
				custom_trigger_tooltip = {
					tooltip = DEN_strike_abatement_tooltip
					NOT = {
						has_idea = DEN_Durham_thieves
						has_idea = DEN_Durham_thieves2
						has_idea = DEN_Durham_thieves3
						has_idea = DEN_Durham_thieves4
					}
				}
				has_country_flag = DEN_rejection_of_election
			}
		}
		days_mission_timeout = 30
		timeout_effect = {
			country_event = den_crisis.15
		}
	}

	DEN_workers_party_plotte_insurrection = {
		icon = GFX_decision_revolt
		priority = 999
		activation = {
			communism > 0.5
			NOT = { has_government = communism }
			has_idea = DEN_Durham_thieves4
			has_country_flag = DEN_rejection_of_election
		}
		available = {
			has_government = communism
		}
		cancel_trigger = {
			OR = {
				has_government = communism
				communism < 0.5
				custom_trigger_tooltip = {
					tooltip = DEN_strike_abatement_tooltip
					NOT = {
						has_idea = DEN_Durham_thieves
						has_idea = DEN_Durham_thieves2
						has_idea = DEN_Durham_thieves3
						has_idea = DEN_Durham_thieves4
					}
				}
			}
		}
		days_mission_timeout = 30
		timeout_effect = {
			country_event = den_crisis.16
		}
	}
	
	#满足工人要求：延长罢工准备时间：提供合理值
	DEN_meet_workers_demands = {
		icon = GFX_decision_generic_fundraising
		visible = {
			has_active_mission = DEN_workers_threaten_to_strike
		}
		available = {
			
		}
		ai_will_do = {
			base = 0
			modifier = {
				add = 0.01
				check_variable = { ubs_save > 100 }
			}
			modifier = {
				factor = 10000
				OR = {
					has_idea = DEN_Durham_thieves2
					has_idea = DEN_Durham_thieves3
					has_idea = DEN_Durham_thieves4
				}
			}
		}
		custom_cost_text = RUS_50_ubs_save_cost
		custom_cost_trigger = {
			check_variable = { ubs_save > 50 }
		}
		fire_only_once = no
		days_re_enable = 90
		complete_effect = {
			add_to_variable = { ubs_save = -50 }
			DEN_contradiction_alleviation = yes
			add_days_mission_timeout = {
				mission = DEN_workers_threaten_to_strike
				days = 20
			}
		}
	}

	#驱散罢工者：延长罢工准备时间：提供不合理值
	DEN_disperse_the_strikers = {
		icon = GFX_decision_generic_police_action
		visible = {
			has_active_mission = DEN_workers_threaten_to_strike
		}
		available = {
			
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0.15
				OR = {
					has_idea = DEN_Durham_thieves3
					has_idea = DEN_Durham_thieves4
				}
			}
		}
		fire_only_once = no
		days_re_enable = 90
		complete_effect = {
			DEN_intensification_of_contradiction = yes
			add_days_mission_timeout = {
				mission = DEN_workers_threaten_to_strike
				days = 20
			}
		}
	}

	#与工人党谈判：增加红色，但是延长罢工准备：提供合理值
	DEN_negotiate_with_workers_party = {
		icon = GFX_decision_generic_police_action
		visible = {
			has_active_mission = DEN_workers_threaten_to_strike
			has_country_flag = DEN_lose_control_of_the_union
		}
		available = {
			
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0.15
				communism > 0.50
			}
			modifier = {
				factor = 2.5
				communism < 0.30
			}
		}
		fire_only_once = no
		days_re_enable = 30
		complete_effect = {
			add_popularity = {
				ideology = communism
				popularity = 0.02
			}
			DEN_contradiction_alleviation = yes
			random_list = {
				50 = { }
				50 = { country_event = den_crisis.14 }
			}
		}
	}

	#逮捕工人党成员：消除红色影响，缩短罢工准备：提供不合理
	DEN_arrest_workers_party_members = {
		icon = GFX_decision_generic_police_action
		visible = {
			has_active_mission = DEN_workers_threaten_to_strike
			has_country_flag = DEN_lose_control_of_the_union
			has_completed_focus = DEN_strengthen_public_security
		}
		available = {
			
		}
		fire_only_once = no
		days_re_enable = 45
		days_remove = 30
		cost = 50
		ai_will_do = {
			base = 100
			modifier = {
				factor = 2.5
				communism > 0.50
			}
			modifier = {
				factor = 0.1
				communism < 0.30
			}
		}
		modifier = {
			communism_drift = -0.1
		}
		remove_effect = {
			add_popularity = {
				ideology = communism
				popularity = -0.05
			}
			DEN_intensification_of_contradiction = yes
			add_to_variable = { DEN_cp = 14 }
			custom_effect_tooltip = DEN_arrest_workers_party_members_tt
			random_list = {
				50 = { }
				50 = { country_event = den_crisis.13 }
			}
		}
	}

	#补贴消费品生产：提供合理值，降低红色
	DEN_subsidized_production_of_consumer_goods = {
		icon = GFX_decision_generic_police_action
		visible = {
			has_active_mission = DEN_workers_threaten_to_strike
		}
		custom_cost_text = RUS_100_ubs_save_cost
		custom_cost_trigger = {
			check_variable = { ubs_save > 100 }
		}
		fire_only_once = no
		days_re_enable = 45
		days_remove = 30
		ai_will_do = {
			base = 0
			modifier = {
				add = 15
				check_variable = { ubs_save > 200 }
				check_variable = { ubs_load < 10 }
			}
		}
		modifier = {
			consumer_goods_factor = -0.2
			communism_drift = -0.02
		}
		complete_effect = {
			add_political_power = 25
			add_popularity = {
				ideology = communism
				popularity = -0.05
			}
			hidden_effect = {
				add_to_variable = { ubs_save = -100 }
			}
		}
		remove_effect = {
			DEN_contradiction_alleviation = yes
		}
	}

	#降低工人工资：获得资金，提升红色
	DEN_reduce_employment_costs = {
		icon = GFX_decision_generic_police_action
		visible = {
			has_active_mission = DEN_workers_threaten_to_strike
			NOT = { has_government = communism }
		}
		available = {
			
		}
		ai_will_do = {
			base = 0
			modifier = {
				add = 50
				check_variable = { ubs_save < 100 }
				check_variable = { ubs_load > 100 }
			}
		}
		fire_only_once = no
		days_re_enable = 180
		complete_effect = {
			add_popularity = {
				ideology = communism
				popularity = 0.05
			}
			DEN_strike_intensification = yes
			add_to_variable = { ubs_save = 300 }
			custom_effect_tooltip = SOV_get_300_add_to_reserve
		}
	}

	#调整物价：获得资金或者取悦人民
	DEN_price_adjustment = {
		icon = GFX_decision_generic_police_action
		visible = {
			has_active_mission = DEN_workers_threaten_to_strike
		}
		available = {
			
		}
		ai_will_do = {
			base = 100
		}
		fire_only_once = yes
		days_re_enable = 30
		cost = 10
		complete_effect = {
			hidden_effect = {
				country_event = den_crisis.7
			}
		}
	}

	DEN_regulate_land_in_the_east = {
		icon = GFX_decision_generic_factory
		visible = {
			has_completed_focus = DEN_land_reform_project
		}
		available = {
			any_state = {
				OR = {
					state = 1096
					state = 1095
					state = 1103
					state = 1104
				}
				is_fully_controlled_by = ROOT
			}
		}
		ai_will_do = {
			base = 100
		}
		custom_cost_text = RUS_200_ubs_save_cost
		custom_cost_trigger = {
			check_variable = { ubs_save > 200 }
		}
		days_remove = 120
		fire_only_once = yes
		remove_effect = {
			
			every_owned_state = {
				limit = {
					OR = {
						state = 1096
						state = 1095
						state = 1103
						state = 1104
					}
				}
				add_extra_state_shared_building_slots = 2
			}
			every_owned_state = {
				limit = {
					OR = {
						state = 1096
						state = 1095
						state = 1103
						state = 1104
					}
					infrastructure < 3
				}
				add_building_construction = {
					type = infrastructure
					level = 1
				}
			}
		}
	}

	DEN_regulate_central_land = {
		icon = GFX_decision_generic_factory
		visible = {
			has_completed_focus = DEN_land_reform_project
		}
		available = {
			any_state = {
				OR = {
					state = 960
					state = 138
					state = 37
				}
				is_fully_controlled_by = ROOT
			}
		}
		ai_will_do = {
			base = 100
		}
		custom_cost_text = RUS_150_ubs_save_cost
		custom_cost_trigger = {
			check_variable = { ubs_save > 150 }
		}
		days_remove = 90
		fire_only_once = yes
		remove_effect = {
			
			every_owned_state = {
				limit = {
					OR = {
						state = 960
						state = 138
						state = 37
					}
				}
				add_extra_state_shared_building_slots = 2
			}
			every_owned_state = {
				limit = {
					OR = {
						state = 960
						state = 138
						state = 37
					}
					infrastructure < 3
				}
				add_building_construction = {
					type = infrastructure
					level = 1
				}
			}
		}
	}
		
	DEN_regulate_land_in_the_west = {
		icon = GFX_decision_generic_factory
		visible = {
			has_completed_focus = DEN_land_reform_project
		}
		available = {
			any_state = {
				OR = {
					state = 99
					state = 782
				}
				is_fully_controlled_by = ROOT
			}
		}
		ai_will_do = {
			base = 100
		}
		custom_cost_text = RUS_100_ubs_save_cost
		custom_cost_trigger = {
			check_variable = { ubs_save > 100 }
		}
		fire_only_once = yes
		days_remove = 60
		remove_effect = {
			
			every_owned_state = {
				limit = {
					OR = {
						state = 99
						state = 782
					}
				}
				add_extra_state_shared_building_slots = 2
			}
			every_owned_state = {
				limit = {
					OR = {
						state = 99
						state = 782
					}
					infrastructure < 3
				}
				add_building_construction = {
					type = infrastructure
					level = 1
				}
			}
		}
	}
	
	DEN_regulate_overseas_land = {
		icon = GFX_decision_generic_factory
		visible = {
			has_completed_focus = DEN_land_reform_project
		}
		available = {
			any_state = {
				OR = {
					state = 337
					state = 100
				}
				is_fully_controlled_by = ROOT
			}
		}
		ai_will_do = {
			base = 100
		}
		custom_cost_text = RUS_150_ubs_save_cost
		custom_cost_trigger = {
			check_variable = { ubs_save > 150 }
		}
		fire_only_once = yes
		days_remove = 120
		remove_effect = {
			
			every_owned_state = {
				limit = {
					OR = {
						state = 337
						state = 100
					}
				}
				add_extra_state_shared_building_slots = 2
			}
			every_owned_state = {
				limit = {
					OR = {
						state = 337
						state = 100
					}
					infrastructure < 3
				}
				add_building_construction = {
					type = infrastructure
					level = 1
				}
			}
		}
	}

}

gtmx_UBS_bank = {

	DEN_start_sale_AUTO_META = {
		icon = decision_eng_trade_unions_support
		allowed = {
			original_tag = DEN
		}
		visible = {
			NOT = { has_idea = DEN_sale_AUTO_META }
			has_completed_focus = DEN_open_machinery_field
		}
		available = {
			is_subject = no
		}
		ai_will_do = {
			base = 0
			modifier = {
				add = 100
				check_variable = { ubs_load > 100 }
			}
		}
		cost = 50
		fire_only_once = no
		complete_effect = {
			add_ideas = DEN_sale_AUTO_META
		}
	}
	DEN_cease_sale_AUTO_META = {
		icon = decision_generic_break_treaty
		allowed = {
			original_tag = DEN
		}
		visible = {
			has_idea = DEN_sale_AUTO_META
			has_completed_focus = DEN_open_machinery_field
		}
		available = {
			is_subject = no
		}
		ai_will_do = {
			base = 0
			modifier = {
				add = 100
				OR = {
					AND = {
						check_variable = { ubs_load < 10 }
						check_variable = { ubs_save > 100 }
					}
					date > 1940.1.1
					has_war = yes
				}
			}
		}
		cost = 50
		fire_only_once = no
		complete_effect = {
			remove_ideas = DEN_sale_AUTO_META
		}
	}
	DEN_sale_of_AUTO_META = {
		icon = decision_eng_trade_unions_support
		allowed = {
			original_tag = DEN
		}
		visible = {
			has_idea = DEN_sale_AUTO_META
			has_completed_focus = DEN_open_machinery_field
		}
		available = {
			is_subject = no
			has_equipment = {
				KEI_AUTO_META_equipments > 499
			}
		}
		ai_will_do = {
			base = 0
			modifier = {
				add = 100
				check_variable = { ubs_load > 100 }
				check_variable = { ubs_save < 100 }
			}
		}
		cost = 0
		fire_only_once = no
		days_re_enable = 60
		complete_effect = {
			add_equipment_to_stockpile = {
				type = KEI_AUTO_META_equipments
				amount = -500
			}
			add_to_variable = { ubs_save = 100 }
			custom_effect_tooltip = SOV_get_100_add_to_reserve
		}
	}
}

DEN_public_works_construction_category = {

	DEN_dec_public_works_construction = {
		icon = GEX_decision_generic_factory
		allowed = {
			always = no
		}
		available = {
			FROM = { is_owned_by = ROOT }
		}
		cost = 50
		fire_only_once = yes
		state_target = yes
		days_remove = 90
		ai_will_do = {
			base = 1000
		}
		complete_effect = {
			if = {
				limit = {
					has_idea = DEN_great_depression5
				}
				swap_ideas = {
					remove_idea = DEN_great_depression5
					add_idea = DEN_great_depression4
				}
			}
			else_if = {
				limit = {
					has_idea = DEN_great_depression4
				}
				swap_ideas = {
					remove_idea = DEN_great_depression4
					add_idea = DEN_great_depression3
				}
			}
			else_if = {
				limit = {
					has_idea = DEN_great_depression3
				}
				swap_ideas = {
					remove_idea = DEN_great_depression3
					add_idea = DEN_great_depression2
				}
			}
			else_if = {
				limit = {
					has_idea = DEN_great_depression2
				}
				swap_ideas = {
					remove_idea = DEN_great_depression2
					add_idea = DEN_great_depression
				}
			}
			else_if = {
				limit = {
					has_idea = DEN_great_depression
				}
				remove_ideas = DEN_great_depression
			}
		}
		remove_effect = {
			FROM = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
				}
			}
		}
	}

	DEN_dec_arms_factory = {
		icon = GEX_decision_generic_factory
		allowed = {
			always = no
		}
		available = {
			FROM = { is_owned_by = ROOT }
		}
		custom_cost_text = RUS_150_ubs_save_cost
		custom_cost_trigger = {
			check_variable = { ubs_save > 150 }
		}
		ai_will_do = {
			base = 1000
		}
		fire_only_once = yes
		state_target = yes
		days_remove = 90
		complete_effect = {
			hidden_effect = {
				add_to_variable = { ubs_save = -150 }
			}
		}
		remove_effect = {
			FROM = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
				}
			}
		}
	}
	
	DEN_integrate_Juliet_research_institute = {
		icon = GFX_decision_generic_research
		visible = {
			has_completed_focus = DEN_integrate_enterprise_institute
		}
		available = {
			if = { 
				limit = { is_ai = no }
				has_idea = DEN_Juliet
			}
		}
		custom_cost_text = RUS_100_ubs_save_cost
		custom_cost_trigger = {
			check_variable = { ubs_save > 100 }
		}
		ai_will_do = {
			base = 1000
		}
		fire_only_once = yes
		days_remove = 90
		complete_effect = {
			hidden_effect = {
				add_to_variable = { ubs_save = -100 }
			}
		}
		remove_effect = {
			remove_advisor_role = {
				slot = political_advisor
				character = DEN_Juliet
			}
			DEN_integrate_research_institute = yes
		}
	}
		
	DEN_integrate_Naoto_research_institute = {
		icon = GFX_decision_generic_research
		visible = {
			has_completed_focus = DEN_integrate_enterprise_institute
		}
		available = {
			if = { 
				limit = { is_ai = no }
				has_idea = DEN_Naoto
			}
		}
		custom_cost_text = RUS_100_ubs_save_cost
		custom_cost_trigger = {
			check_variable = { ubs_save > 100 }
		}
		ai_will_do = {
			base = 1000
		}
		fire_only_once = yes
		days_remove = 90
		complete_effect = {
			hidden_effect = {
				add_to_variable = { ubs_save = -100 }
			}
		}
		remove_effect = {
			remove_advisor_role = {
				slot = political_advisor
				character = DEN_Naoto
			}
			DEN_integrate_research_institute = yes
		}
	}
		
	DEN_integrate_Akane_research_institute = {
		icon = GFX_decision_generic_research
		visible = {
			has_completed_focus = DEN_integrate_enterprise_institute
		}
		available = {
			if = { 
				limit = { is_ai = no }
				has_idea = DEN_Akane
			}
		}
		ai_will_do = {
			base = 1000
		}
		custom_cost_text = RUS_100_ubs_save_cost
		custom_cost_trigger = {
			check_variable = { ubs_save > 100 }
		}
		fire_only_once = yes
		days_remove = 90
		complete_effect = {
			hidden_effect = {
				add_to_variable = { ubs_save = -100 }
			}
		}
		remove_effect = {
			remove_advisor_role = {
				slot = political_advisor
				character = DEN_Akane
			}
			DEN_integrate_research_institute = yes
		}
	}
}

DEN_rebuild_the_Kalma_alliance = {

	DEN_integrate_dec_state = {
		icon = GFX_GFX_decision_infiltrate_state
		visible = {
			FROM = {
				is_owned_by = ROOT
			}
		}
		available = {
			FROM = {
				is_fully_controlled_by = ROOT
				is_owned_by = ROOT
				resistance < 10
				compliance > 50
			}
		}

		on_map_mode = map_only
		state_target = yes
		target_trigger = {
			FROM = {
				OR = {
					AND = {
						OR = {
							is_claimed_by = ROOT
							has_state_flag = sign_nordic_states_flag
						}
						NOT = { is_core_of = ROOT }
					}
					state = 58
					state = 61
					state = 62
					state = 63
					state = 776
					state = 777
					state = 5
					state = 655
					state = 11
					state = 189
					state = 188
					state = 190
					state = 880
					state = 12
					state = 842
					state = 191
					state = 13
					state = 215
					state = 213
					state = 722
				}
			}
		}
		fire_only_once = yes
		cost = 5
		ai_will_do = {
			base = 1000
		}
		complete_effect = {
			FROM = {
				hidden_effect = {
					remove_claim_by = ROOT
				}
				add_core_of = ROOT
			}
		}
	}
}

DEN_the_fourth_D_S_war_category = {

	DEN_convene_German_troops = {
		icon = GFX_decision_generic_military
		available = {
			has_full_control_of_state = 138
		}
		fire_only_once = yes
		cost = 0
		ai_will_do = {
			base = 1000
		}
		complete_effect = {
			hidden_effect = {
				division_template = {
					name = "大洗军校国防生"
					regiments = {
						KEI_AUTO_META_units = { x = 0 y = 0 }
						KEI_AUTO_META_units = { x = 0 y = 1 }
						KEI_AUTO_META_units = { x = 0 y = 2 }
						KEI_AUTO_META_units = { x = 1 y = 0 }
						KEI_AUTO_META_units = { x = 1 y = 1 }
						KEI_AUTO_META_units = { x = 1 y = 2 }
					}
					support = {
						engineer = { x = 0 y = 0 }
						artillery = { x = 0 y = 1 }
					}
				}
			}
			138 = {
				create_unit = {
					division = "大洗军校国防生"
					owner = ROOT
				}
			}
		}
	}

	DEN_first_level_mobilization_order = {
		icon = GFX_decision_generic_speech
		fire_only_once = yes
		cost = 0
		ai_will_do = {
			base = 1000
		}
		complete_effect = {
			add_ideas = war_economy
		}
	}
		
	DEN_accelerate_weapon_manufacturing = {
		icon = GFX_decision_generic_merge_plant_tank
		fire_only_once = yes
		cost = 0
		ai_will_do = {
			base = 1000
		}
		complete_effect = {
			add_timed_idea = {
				idea = DEN_accelerate_weapon_manufacturing_descision
				days = 120
			}
			add_equipment_to_stockpile = {
				type = KEI_AUTO_META_equipments
				producer = ROOT
				amount = 2000
			}
			add_equipment_to_stockpile = {
				type = infantry_equipment
				producer = ROOT
				amount = 2500
			}
		}
	}
}
