SOV_faction_management_category = {

	SOV_formation_comecon = {
		icon = GFX_decision_SOV_the_stalin_constitution
		priority = 99
		visible = {
			original_tag = SOV
			is_subject = no
			is_faction_leader = yes
		}
		available = {
			is_subject = no
			num_faction_members > 3

		}
		days_remove = 14
		ai_will_do = {
			base = 1000
		}
		cost = 0
		fire_only_once = yes
		remove_effect = {
			set_variable = { global.num_comecon_member = 0 }
			custom_effect_tooltip = SOV_formation_comecon_tooltip
			unlock_decision_tooltip = SOV_establish_research_organization
			hidden_effect = {
				add_dynamic_modifier = {
					modifier = SOV_comecon_leader
				}
				add_to_array = { global.comecon_member = ROOT }
			}
		}
	}

	SOV_political_propaganda_Sakura_path = {
		icon = GFX_decision_eng_propaganda_campaigns
		priority = 9
		visible = {
			has_country_flag = SOV_select_support_Sakura_path
			NOT = { has_country_flag = SOV_pol_start }
		}
		available = {
			NOT = { has_country_flag = SOV_faction_management_in_progress }
			custom_trigger_tooltip = {
				tooltip = SOV_political_propaganda_Sakura_path_trigger
				check_variable = { SOV_sakura_path_progress_var < 100 }
			}
		}
		cancel_trigger = {
			has_country_flag = SOV_pol_start
		}
		ai_will_do = {
			base = 0
			modifier = {
				add = 100
				check_variable = { SOV_sakura_path_progress_var < 60 }
			}
		}
		cost = 10
		fire_only_once = no
		days_re_enable = 30
		days_remove = 90
		modifier = {
			political_power_gain = 0.1
		}
		complete_effect = {
			set_country_flag = SOV_faction_management_in_progress
		}
		remove_effect = {
			clr_country_flag = SOV_faction_management_in_progress
			random_list = {
				10 = {
					hidden_effect = {
						add_to_variable = { SOV_sakura_path_progress_var = 4 }
						if = {
							limit = { check_variable = { SOV_sakura_path_progress_var > 100 } }
							set_variable = { SOV_sakura_path_progress_var = 100 }
						}
						SOV_balance_calculation = yes
					}
					custom_effect_tooltip = SOV_Sakura_path_up_4_tt
				}
				35 = {
					hidden_effect = {
						add_to_variable = { SOV_sakura_path_progress_var = 3 }
						if = {
							limit = { check_variable = { SOV_sakura_path_progress_var > 100 } }
							set_variable = { SOV_sakura_path_progress_var = 100 }
						}
						SOV_balance_calculation = yes
					}
					custom_effect_tooltip = SOV_Sakura_path_up_3_tt

				}
				55 = {
					hidden_effect = {
						add_to_variable = { SOV_sakura_path_progress_var = 2 }
						if = {
							limit = { check_variable = { SOV_sakura_path_progress_var > 100 } }
							set_variable = { SOV_sakura_path_progress_var = 100 }
						}
						SOV_balance_calculation = yes
					}
					custom_effect_tooltip = SOV_Sakura_path_up_2_tt
				}
			}
		}
	}

	SOV_political_propaganda_anti_path = {
		icon = GFX_decision_eng_propaganda_campaigns
		priority = 9
		visible = {
			has_country_flag = SOV_select_terminate_Sakura_path
			NOT = { has_country_flag = SOV_pol_start }
		}
		available = {
			NOT = { has_country_flag = SOV_faction_management_in_progress }
			custom_trigger_tooltip = {
				tooltip = SOV_political_propaganda_anti_path_trigger
				check_variable = { SOV_sakura_path_progress_var > 0 }
			}
		}
		cancel_trigger = {
			has_country_flag = SOV_pol_start
		}
		cost = 10
		fire_only_once = no
		days_re_enable = 30
		days_remove = 90
		ai_will_do = {
			base = 0
			modifier = {
				add = 100
				check_variable = { SOV_sakura_path_progress_var > 45 }
			}
		}
		complete_effect = {
			set_country_flag = SOV_faction_management_in_progress
		}
		remove_effect = {
			clr_country_flag = SOV_faction_management_in_progress
			random_list = {
				10 = {
					hidden_effect = {
						add_to_variable = { SOV_sakura_path_progress_var = -4 }
						if = {
							limit = { check_variable = { SOV_sakura_path_progress_var < 0 } }
							set_variable = { SOV_sakura_path_progress_var = 0 }
						}
						SOV_balance_calculation = yes
					}
					custom_effect_tooltip = SOV_anti_path_up_4_tt
				}
				35 = {
					hidden_effect = {
						add_to_variable = { SOV_sakura_path_progress_var = -3 }
						if = {
							limit = { check_variable = { SOV_sakura_path_progress_var < 0 } }
							set_variable = { SOV_sakura_path_progress_var = 0 }
						}
						SOV_balance_calculation = yes
					}
					custom_effect_tooltip = SOV_anti_path_up_3_tt
				}
				55 = {
					hidden_effect = {
						add_to_variable = { SOV_sakura_path_progress_var = -2 }
						if = {
							limit = { check_variable = { SOV_sakura_path_progress_var < 0 } }
							set_variable = { SOV_sakura_path_progress_var = 0 }
						}
						SOV_balance_calculation = yes
					}		
					custom_effect_tooltip = SOV_anti_path_up_2_tt
				}
			}
		}
	}

	SOV_second_five_year_plan_was_completed = {
		icon = GFX_decision_generic_factory
		priority = 99
		is_good = no
		activation = {
			always = no
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_at_least_90_civilian_factories_tt
				num_of_controlled_factories > 89
			}
		}
		fire_only_once = yes
		days_mission_timeout = 545
		complete_effect = {
			set_country_flag = SOV_plan_completed_ahead_of_schedule
			country_event = SOV_flavor.37
		}
		timeout_effect = {
			if = {
				limit = { 
					OR = {
						AND = {
							is_ai = yes
							NOT = { 
								has_game_rule = {
									rule = AH_SOV_ai_behavior_SELECTION
									option = SOV_GAME_RULE_1
								} 
							}
						}
						is_ai = no
					}
				}
				country_event = SOV_flavor.38
			}
		}
	}

	SOV_call_for_plenary_session = {
		icon = GFX_decision_generic_political_rally
		priority = 98
		is_good = no
		activation = {
			always = no
		}
		available = {
			always = no
		}
		cancel_trigger = {
			has_country_flag = SOV_pol_start
		}
		fire_only_once = no
		days_mission_timeout = var:SOV_ps
		timeout_effect = {
			add_stability = -0.02
			add_political_power = -50
			hidden_effect = {
				if = {
					limit = { check_variable = { SOV_ps > 120 } }
					add_to_variable = { SOV_ps = -60 }
				}
				if = {
					limit = { NOT = { has_country_flag = SOV_power_struggle_end } }
					activate_mission = SOV_call_for_plenary_session
				}
			}
			if = {
				limit = { has_country_flag = SOV_select_support_Sakura_path }
				hidden_effect = {
					add_to_variable = { SOV_sakura_path_progress_var = -4 }
					if = {
						limit = { check_variable = { SOV_sakura_path_progress_var < 0 } }
						set_variable = { SOV_sakura_path_progress_var = 0 }
					}
					SOV_balance_calculation = yes
				}
				custom_effect_tooltip = SOV_anti_path_up_4_tt
			}
			else = {
				hidden_effect = {
					add_to_variable = { SOV_sakura_path_progress_var = 4 }
					if = {
						limit = { check_variable = { SOV_sakura_path_progress_var > 100 } }
						set_variable = { SOV_sakura_path_progress_var = 100 }
					}
					SOV_balance_calculation = yes
				}
				custom_effect_tooltip = SOV_Sakura_path_up_4_tt
			}
		}
	}

	SOV_hold_plenary_session = {
		icon = GFX_decision_generic_nationalism
		priority = 97
		visible = {
			NOT = { has_country_flag = SOV_pol_start }
		}
		available = {
			has_completed_focus = SOV_great_game_of_Minsk
			has_country_flag = SOV_subdue_forgotten_card
		}
		ai_will_do = {
			base = 20
		}
		fire_only_once = yes
		days_remove = 14
		remove_effect = {
			if = {
				limit = {
					has_active_mission = SOV_call_for_plenary_session
				}
				remove_mission = SOV_call_for_plenary_session
			}
			set_country_flag = SOV_pol_start
			hidden_effect = {
				if = {
					limit = { has_country_flag = SOV_FC_minority_win }
					country_event = { id = SOV_pol.14 days = 3 } 
				}
				else = { country_event = { id = SOV_pol.13 days = 3 } }
			}
		} 
	}

	SOV_trotskyist_speeches_were_forbidden = {
		priority = 6
		icon = GFX_decision_generic_police_action
		visible = {
			has_country_flag = SOV_can_nuisance_to_truth
			check_variable = { SOV_truth_live = 1 }
			check_variable = { SOV_youth_party_influence_var > 0 }
		}
		available = {
			NOT = { has_country_flag = SOV_against_truth_in_progress }
			custom_trigger_tooltip = {
				tooltip = SOV_against_truth_trigger
				check_variable = { SOV_youth_party_influence_var > 0 }
			}
		}
		cancel_if_not_visible = yes
		cost = 10
		fire_only_once = no
		days_re_enable = 30
		days_remove = 90
		ai_will_do = {
			base = 100
		}
		modifier = {
			political_power_gain = 0.1
		}
		complete_effect = {
			set_country_flag = SOV_against_truth_in_progress
		}
		remove_effect = {
			clr_country_flag = SOV_against_truth_in_progress
			hidden_effect = {
				set_variable = { SOV_faction_num = 8 }
				set_variable = { SOV_faction_variate = -1 }
				SOV_change_faction_influence = yes
				set_variable = { SOV_faction_num = 8 }
				set_variable = { SOV_faction_variate = -5 }
				SOV_change_faction_loyalty = yes
			}
			custom_effect_tooltip = SOV_against_truth_tt
			custom_effect_tooltip = SOV_Sakura_path_up_2_tt
		}
	}

	SOV_arrest_members_of_trotskyist = {
		priority = 6
		icon = GFX_decision_generic_police_action
		visible = {
			has_country_flag = SOV_can_nuisance_to_truth
			check_variable = { SOV_truth_live = 1 }
			check_variable = { SOV_truth_party_loyalty_var < 1 }
		}
		available = {
			NOT = { has_country_flag = SOV_against_truth_in_progress }
			custom_trigger_tooltip = {
				tooltip = SOV_arrest_truth_trigger
				check_variable = { SOV_truth_party_loyalty_var < 1 }
			}
		}
		cancel_if_not_visible = yes
		cost = 10
		fire_only_once = no
		days_re_enable = 30
		days_remove = 90
		ai_will_do = {
			base = 100
		}
		modifier = {
			political_power_gain = 0.1
		}
		complete_effect = {
			set_country_flag = SOV_against_truth_in_progress
		}
		remove_effect = {
			clr_country_flag = SOV_against_truth_in_progress
			hidden_effect = {
				if = {
					limit = { check_variable = { SOV_youth_party_influence_var < 2 } }
					set_variable = { SOV_truth_live = 0 }
				}
				set_variable = { SOV_faction_num = 8 }
				set_variable = { SOV_faction_variate = -2 }
				SOV_change_faction_influence = yes
			}
			custom_effect_tooltip = SOV_arrest_truth_tt
			custom_effect_tooltip = SOV_arrest_members_of_trotskyist_tt
		}
	}

	SOV_Sponsor_trotskyist_to_give_speech = {
		icon = GFX_decision_generic_speech
		priority = 7
		visible = {
			has_country_flag = SOV_can_cooperate_with_truth
			check_variable = { SOV_truth_party_loyalty_var < 100 }
			check_variable = { SOV_truth_live = 1 }
		}
		available = {
			NOT = { has_country_flag = SOV_against_truth_in_progress }
			custom_trigger_tooltip = {
				tooltip = SOV_Sponsor_trotskyist_trigger
				check_variable = { SOV_truth_party_loyalty_var < 100 }
			}
		}
		cancel_if_not_visible = yes
		cost = 10
		fire_only_once = no
		days_re_enable = 30
		days_remove = 90
		ai_will_do = {
			base = 100
		}
		modifier = {
			political_power_gain = 0.1
		}
		complete_effect = {
			set_country_flag = SOV_against_truth_in_progress
		}
		remove_effect = {
			clr_country_flag = SOV_against_truth_in_progress
			hidden_effect = {
				add_to_variable = { SOV_sakura_path_progress_var = -3 }
				if = {
					limit = { check_variable = { SOV_sakura_path_progress_var < 0 } }
					set_variable = { SOV_sakura_path_progress_var = 0 }
				}
				SOV_balance_calculation = yes
				set_variable = { SOV_faction_num = 8 }
				set_variable = { SOV_faction_variate = 1 }
				SOV_change_faction_influence = yes
				set_variable = { SOV_faction_num = 8 }
				set_variable = { SOV_faction_variate = 5 }
				SOV_change_faction_loyalty = yes
			}

			custom_effect_tooltip = SOV_Sponsor_trotskyist_tt
			custom_effect_tooltip = SOV_anti_path_up_3_tt
		}
	}

	SOV_integrate_trotskyist = {
		icon = GFX_decision_generic_speech
		priority = 7
		visible = {
			has_country_flag = SOV_can_cooperate_with_truth
			check_variable = { SOV_truth_party_loyalty_var > 75 }
		}
		available = {
			NOT = { has_country_flag = SOV_against_truth_in_progress }
			custom_trigger_tooltip = {
				tooltip = SOV_integrate_trotskyist_trigger
				check_variable = { SOV_truth_party_loyalty_var > 95 }
			}
		}
		cost = 10
		fire_only_once = no
		days_re_enable = 30
		days_remove = 90
		ai_will_do = {
			base = 100
		}
		modifier = {
			political_power_gain = 0.25
		}
		complete_effect = {
			set_country_flag = SOV_against_truth_in_progress
		}
		remove_effect = {
			clr_country_flag = SOV_against_truth_in_progress
			hidden_effect = {
				set_variable = { SOV_truth_party_loyalty_var = 100 }
				set_variable = { SOV_truth_party_pp_var = 0 }
				set_variable = { SOV_truth_live = 2 }
				SOV_Calculate_impact = yes
				set_country_flag = SOV_integrate_trotskyist_flag
				if = {
					limit = { has_country_flag = SOV_subdue_forgotten_card }
					country_event = SOV_pol.14
				}
				else = {
					country_event = SOV_pol.13
				}
			}
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = SOV_Anna  
			add_political_power = 100
		}
	}



	SOV_reorganize_the_army = {
		icon = GFX_decision_SOV_the_military_conspiracy
		visible = {
			has_completed_focus = SOV_defeat_of_Kiev
		}

		available = {
			is_subject = no
		}

		cost = 10
		fire_only_once = yes
		days_remove = 120
		ai_will_do = {
			base = 1000
		}
		modifier = {
			army_core_defence_factor = 0.15
		}
		remove_effect = {
			SOV_military_start_to_favor_Sakura_path = yes
			hidden_effect = {
				add_to_variable = { SOV_faction_num = 2 }
				add_to_variable = { SOV_faction_variate = SOV_military_party_pp_var }
				SOV_change_faction_influence = yes
				set_variable = { SOV_military_live = 2 }
				set_variable = { SOV_military_party_pp_var = 0 }
				set_variable = { SOV_military_party_loyalty_var = 100 }
				SOV_Calculate_impact = yes
			}
			custom_effect_tooltip = SOV_reorganize_the_army_tt
			hidden_effect = {
				add_to_variable = { SOV_sakura_path_progress_var = 10 }
				if = {
					limit = { check_variable = { SOV_sakura_path_progress_var > 100 } }
					set_variable = { SOV_sakura_path_progress_var = 100 }
				}
				SOV_balance_calculation = yes
			}
			custom_effect_tooltip = SOV_Sakura_path_up_10_tt
		}
	}

	SOV_secure_NKVD = {
		icon = GFX_decision_generic_arrest
		visible = {
			has_completed_focus = SOV_defeat_of_Kiev
		}

		available = {
			is_subject = no
		}
		ai_will_do = {
			base = 1000
		}
		cost = 10
		fire_only_once = yes
		days_remove = 120
		modifier = {
			enemy_operative_capture_chance_factor = 0.25
		}
		remove_effect = {
			hidden_effect = {
				add_to_variable = { SOV_faction_num = 2 }
				add_to_variable = { SOV_faction_variate = SOV_reunion_party_pp_var }
				SOV_change_faction_influence = yes
				set_variable = { SOV_reunion_live = 2 }
				set_variable = { SOV_reunion_party_pp_var = 0 }
				set_variable = { SOV_reunion_party_loyalty_var = 100 }
				SOV_Calculate_impact = yes
			}
			SOV_reunion_start_to_favor_Sakura_path = yes
			custom_effect_tooltip = SOV_secure_NKVD_tt
			hidden_effect = {
				add_to_variable = { SOV_sakura_path_progress_var = 10 }
				if = {
					limit = { check_variable = { SOV_sakura_path_progress_var > 100 } }
					set_variable = { SOV_sakura_path_progress_var = 100 }
				}
				SOV_balance_calculation = yes
			}
			custom_effect_tooltip = SOV_Sakura_path_up_10_tt
		}
	}

	SOV_destroy_reactionaries = {
		icon = GFX_decision_oppression
		visible = {
			has_completed_focus = SOV_defeat_of_Kiev
		}

		available = {
			is_subject = no
		}
		ai_will_do = {
			base = 1000
		}
		cost = 10
		fire_only_once = yes
		days_remove = 270
		complete_effect = {
			add_ideas = SOV_purge
		}
		remove_effect = {
			remove_ideas = SOV_purge
			add_timed_idea = {
				idea = SOV_superintendant_of_war_buff
				days = 180
			}
			add_timed_idea = {
				idea = SOV_extraordinary_measures_buff
				days = 180
			}
			SOV_Sonia_come_to_power = yes
			hidden_effect = {
				add_to_variable = { SOV_sakura_path_progress_var = 10 }
				if = {
					limit = { check_variable = { SOV_sakura_path_progress_var > 100 } }
					set_variable = { SOV_sakura_path_progress_var = 100 }
				}
				SOV_balance_calculation = yes
				set_country_flag = SOV_orthodox_accept_Trotskyist
				SOV_truth_start_to_favor_Sakura_path = yes
			}
			add_all_party_10_loyalty = yes
			custom_effect_tooltip = SOV_Sakura_path_up_10_tt
			SOV_wind_shift_form_reunion = yes
			if = {
				limit = {
					is_ai = yes
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 200000
					producer = SOV
				}
				add_equipment_to_stockpile = {
					type = artillery_equipment
					amount = 20000
					producer = SOV
				}
				add_equipment_to_stockpile = {
					type = support_equipment
					amount = 3000
					producer = SOV
				}
				add_equipment_to_stockpile = {
					type = motorized_equipment
					amount = 2500
					producer = SOV
				}
				add_political_power = 500
			}
		}
	}

	SOV_invite_POL_to_join_us = {
		icon = decision_generic_nationalism
		visible = {
			is_subject = no
			has_government = communism
			is_faction_leader = yes
			POL = {
				is_neighbor_of = ROOT
				has_government = communism
				is_subject = no
				is_in_faction = no
			}
		}
		ai_will_do = {
			base = 1000
		}
		cost = 0
		fire_only_once = yes
		complete_effect = {
			POL = { country_event = SOV_dip.38 }
		}
	}

}

SOV_deal_with_plague_category = {
    #瘟疫彻底消退（任务）
	SOV_plague_subsided_completely = {
		priority = 100
		icon = GFX_decision_faction_bul_bzns
		activation = {   
			has_country_flag = SOV_plague_start       
		}  
		visible = {
			tag = SOV
		}    
		available = {
			always = no
		}   
		days_mission_timeout = 720
		is_good = yes
		fire_only_once = yes
		timeout_effect = {      
			hidden_effect = {
				remove_ideas = SOV_spread_of_plague5
				remove_ideas = SOV_spread_of_plague4
				remove_ideas = SOV_spread_of_plague3
				remove_ideas = SOV_spread_of_plague2
				remove_ideas = SOV_spread_of_plague
				clr_country_flag = SOV_plague_start  
				news_event = SOV_news.5
			}
	    }
	}
    #瘟疫蔓延（任务-循环触发-加重瘟疫buff）
	SOV_worsening_of_plague = {
		priority = 99
		icon = GFX_decision_revolt
		activation = {   
			always = no
		} 
		visible = {
			tag = SOV
		}                                   
		available = {
			always = no
		}
		cancel_trigger = {
			custom_trigger_tooltip = {
				tooltip = SOV_worsening_of_plague_cancel_tt
				NOT = { has_country_flag = SOV_plague_start }
			}
		}
		days_mission_timeout = var:SOV_WOP
		is_good = no
		fire_only_once = no
		timeout_effect = {      
			add_manpower = -10000
			SOV_deal_with_plague_deteriorate = yes
			hidden_effect = {
				add_to_variable = {
					SOV_WOP = 10
				}
				activate_mission = SOV_worsening_of_plague
			}
	    }
	}
    #动员医疗机构（需要公共医疗委员会-小幅度60减小消所需时间）只能使用一次
	SOV_mobilize_all_medical_units = {
		visible = {
			has_active_mission = SOV_worsening_of_plague
		}
		available = {
			has_completed_focus = SOV_public_health_commission
		}
		days_remove = 30
		ai_will_do = {
			base = 10000
			modifier = {
				factor = 0
				check_variable = {
					var:SOV.days_mission_timeout@SOV_worsening_of_plague > var:SOV.days_mission_timeout@SOV_plague_subsided_completely
				}
			}
		}
		fire_only_once = yes
		cost = 50
		cancel_trigger = {
			custom_trigger_tooltip = {
				tooltip = SOV_worsening_of_plague_cancel_tt
				NOT = { has_country_flag = SOV_plague_start }
			}
		}
		remove_effect = {
			hidden_effect = {
				add_to_variable = { SOV_WOP = 10 }
			}
			custom_effect_tooltip = SOV_medical_socialization_tt
			add_days_mission_timeout = {
				mission = SOV_plague_subsided_completely
				days = -60
			}
		}
	}
    #瘟疫溯源（需要源翠石研究-小幅度60减小消所需时间）只能使用一次
	SOV_source_of_plague = {
		visible = {
			has_active_mission = SOV_worsening_of_plague
		}
		available = {
			has_completed_focus = SOV_magic_mine_research
		}
		ai_will_do = {
			base = 10000
			modifier = {
				factor = 0
				check_variable = {
					var:SOV.days_mission_timeout@SOV_worsening_of_plague > var:SOV.days_mission_timeout@SOV_plague_subsided_completely
				}
			}
		}
		cancel_trigger = {
			custom_trigger_tooltip = {
				tooltip = SOV_worsening_of_plague_cancel_tt
				NOT = { has_country_flag = SOV_plague_start }
			}
		}
		days_remove = 30
		fire_only_once = yes
		cost = 50
		remove_effect = {
			hidden_effect = {
				add_to_variable = { SOV_WOP = 10 }
			}
			custom_effect_tooltip = SOV_medical_socialization_tt
			add_days_mission_timeout = {
				mission = SOV_plague_subsided_completely
				days = -60
			}
			hidden_effect = {
				add_to_variable = { SOV_reunion_party_loyalty_var = 10 }
			}
			custom_effect_tooltip = SOV_reunion_party_loyalty_10_tt
		}
	}
    #魔法疫苗（需要魔法药剂世俗化-大大180减少消退所需时间）只能使用一次
	SOV_magic_vaccine = {
		visible = {
			has_active_mission = SOV_worsening_of_plague
		}
		available = {
			has_completed_focus = SOV_secularization_of_potions
		}
		ai_will_do = {
			base = 10000
			modifier = {
				factor = 0
				check_variable = {
					var:SOV.days_mission_timeout@SOV_worsening_of_plague > var:SOV.days_mission_timeout@SOV_plague_subsided_completely
				}
			}
		}
		cancel_trigger = {
			custom_trigger_tooltip = {
				tooltip = SOV_worsening_of_plague_cancel_tt
				NOT = { has_country_flag = SOV_plague_start }
			}
		}
		days_remove = 14
		fire_only_once = yes
		cost = 50
		remove_effect = {
			hidden_effect = {
				add_to_variable = { SOV_WOP = 10 }
			}
			custom_effect_tooltip = SOV_medical_socialization_tt
			SOV_deal_with_plague_reduce = yes
			add_days_mission_timeout = {
				mission = SOV_plague_subsided_completely
				days = -180
			}
		}
	}
    #开发特效药（需要生命科学-中幅度减小100消所需时间）只能使用一次
	SOV_develop_specific_drugs = {
		visible = {
			has_active_mission = SOV_worsening_of_plague
		}
		available = {
			has_completed_focus = SOV_magic_life_sciences
		}
		ai_will_do = {
			base = 10000
			modifier = {
				factor = 0
				check_variable = {
					var:SOV.days_mission_timeout@SOV_worsening_of_plague > var:SOV.days_mission_timeout@SOV_plague_subsided_completely
				}
			}
		}
		cancel_trigger = {
			custom_trigger_tooltip = {
				tooltip = SOV_worsening_of_plague_cancel_tt
				NOT = { has_country_flag = SOV_plague_start }
			}
		}
		days_remove = 90
		fire_only_once = yes
		cost = 50
		remove_effect = {
			hidden_effect = {
				add_to_variable = { SOV_WOP = 10 }
			}
			custom_effect_tooltip = SOV_medical_socialization_tt
			SOV_deal_with_plague_reduce = yes
			add_days_mission_timeout = {
				mission = SOV_plague_subsided_completely
				days = -180
			}
			hidden_effect = {
				add_to_variable = { SOV_reunion_party_loyalty_var = 10 }
			}
			custom_effect_tooltip = SOV_reunion_party_loyalty_10_tt
		}
	}
    #加强宣传（无前置-拖延蔓延时间）循环使用
	SOV_strengthen_plague_publicity = {
		visible = {
			has_active_mission = SOV_worsening_of_plague
		}
		ai_will_do = {
			base = 10000
			modifier = {
				factor = 0
				check_variable = {
					var:SOV.days_mission_timeout@SOV_worsening_of_plague > var:SOV.days_mission_timeout@SOV_plague_subsided_completely
				}
			}
		}
		available = {

		}
		cancel_trigger = {
			custom_trigger_tooltip = {
				tooltip = SOV_worsening_of_plague_cancel_tt
				NOT = { has_country_flag = SOV_plague_start }
			}
		}
		days_remove = 14
		fire_only_once = no
		days_re_enable = 45
		cost = 25
		remove_effect = {
			add_political_power = 10
			add_days_mission_timeout = {
				mission = SOV_worsening_of_plague
				days = 25
			}
		}
	}
    #招募幽灵医生（无前置-拖延蔓延时间）一次性
	SOV_recruiting_ghost_doctors = {
		visible = {
			has_active_mission = SOV_worsening_of_plague
		}
		available = {
			
		}
		ai_will_do = {
			base = 10000
			modifier = {
				factor = 0
				check_variable = {
					var:SOV.days_mission_timeout@SOV_worsening_of_plague > var:SOV.days_mission_timeout@SOV_plague_subsided_completely
				}
			}
		}
		cancel_trigger = {
			custom_trigger_tooltip = {
				tooltip = SOV_worsening_of_plague_cancel_tt
				NOT = { has_country_flag = SOV_plague_start }
			}
		}
		days_remove = 14
		fire_only_once = yes
		cost = 50
		remove_effect = {
			add_manpower = 1000
			hidden_effect = {
				add_to_variable = { SOV_WOP = 10 }
			}
			custom_effect_tooltip = SOV_medical_socialization_tt
			hidden_effect = {
				country_event = { id = SOV_flavor.16 days = 3 }
			}
		}
	}
    #调配物资（无前置-付出代价获得大量政治点）循环使用
	SOV_allocation_of_supplies = {
		visible = {
			has_active_mission = SOV_worsening_of_plague
		}
		available = {
			
		}
		ai_will_do = {
			base = 0
			modifier = {
				factor = 10000
				check_variable = {
					var:SOV.days_mission_timeout@SOV_worsening_of_plague < 30
				}
			}
			modifier = {
				add = 1000
				date < 1937.1.1
			}
		}
		cancel_trigger = {
			custom_trigger_tooltip = {
				tooltip = SOV_worsening_of_plague_cancel_tt
				NOT = { has_country_flag = SOV_plague_start }
			}
		}
		days_remove = 120
		fire_only_once = no
		days_re_enable = 30
		cost = 10
		complete_effect = {
			add_political_power = 150
			add_stability = -0.05
		}
		modifier = {
			production_speed_buildings_factor = -0.15
		}
	}
    #封锁重疫区（无前置-付出人力代价拖延蔓延时间）循环使用
	SOV_control_plague_area = {
		visible = {
			has_active_mission = SOV_worsening_of_plague
		}
		available = {
			
		}
		ai_will_do = {
			base = 10000
			modifier = {
				factor = 0
				check_variable = {
					var:SOV.days_mission_timeout@SOV_worsening_of_plague > var:SOV.days_mission_timeout@SOV_plague_subsided_completely
				}
			}
		}
		cancel_trigger = {
			custom_trigger_tooltip = {
				tooltip = SOV_worsening_of_plague_cancel_tt
				NOT = { has_country_flag = SOV_plague_start }
			}
		}
		days_remove = 90
		days_re_enable = 30
		fire_only_once = no
		cost = 25
		complete_effect = {
			random_list = {
				45 = {
					add_days_mission_timeout = {
						mission = SOV_worsening_of_plague
						days = 10
					}
				}
				25 = {
					add_days_mission_timeout = {
						mission = SOV_worsening_of_plague
						days = 15
					}
				}
				20 = {
					add_days_mission_timeout = {
						mission = SOV_worsening_of_plague
						days = 20
					}
				}
				10 = {
					add_days_mission_timeout = {
						mission = SOV_worsening_of_plague
						days = 25
					}
				}
			}
		}
		remove_effect = {
			hidden_effect = {
				country_event = SOV_flavor.3
			}
			random_list = {
				25 = {
					add_manpower = -1500
				}
				25 = {
					add_manpower = -3000
				}
				25 = {
					add_manpower = -500
				}
				25 = {
					add_manpower = -2000
				}
			}
		}
	}
    #审查腐败官僚（需要事件触发-拖延蔓延时间）一次性
	SOV_deal_with_corrupt_bureaucrats = {
		visible = {
			AND = {
				has_active_mission = SOV_worsening_of_plague
			    has_country_flag = SOV_corrupt_bureaucrats
			}
		}
		available = {
			
		}
		ai_will_do = {
			base = 10000
			modifier = {
				factor = 0
				check_variable = {
					var:SOV.days_mission_timeout@SOV_worsening_of_plague > var:SOV.days_mission_timeout@SOV_plague_subsided_completely
				}
			}
		}
		cancel_trigger = {
			custom_trigger_tooltip = {
				tooltip = SOV_worsening_of_plague_cancel_tt
				NOT = { has_country_flag = SOV_plague_start }
			}
		}
		days_remove = 90
		fire_only_once = yes
		cost = 50
		complete_effect = {
			hidden_effect = {
				add_to_variable = { SOV_WOP = 10 }
			}
			custom_effect_tooltip = SOV_medical_socialization_tt
			add_days_mission_timeout = {
				mission = SOV_plague_subsided_completely
				days = -30
			}
			if = {
				limit = { has_country_flag = SOV_select_support_Sakura_path }
				hidden_effect = {
					add_to_variable = { SOV_sakura_path_progress_var = 5 }
					if = {
						limit = { check_variable = { SOV_sakura_path_progress_var > 100 } }
						set_variable = { SOV_sakura_path_progress_var = 100 }
					}
					SOV_balance_calculation = yes
				}
				custom_effect_tooltip = SOV_Sakura_path_up_5_tt
			}
			if = {
				limit = { has_country_flag = SOV_select_terminate_Sakura_path }
				hidden_effect = {
					add_to_variable = { SOV_sakura_path_progress_var = -5 }
					if = {
						limit = { check_variable = { SOV_sakura_path_progress_var < 0 } }
						set_variable = { SOV_sakura_path_progress_var = 0 }
					}
					SOV_balance_calculation = yes
				}
				custom_effect_tooltip = SOV_anti_path_up_5_tt
			}
		}
		modifier = {
			political_power_cost = 0.25
		}
	}

}

SOV_gain_profit_in_risk = {

	SOV_economic_crisis_easing = {
		icon = GFX_decision_category_gre_paying_ifc_debt
		priority = 99
		activation = {
			always = no
		}
		available = {
			always = no
		}
		days_mission_timeout = 1095
		is_good = yes
		fire_only_once = yes
		cancel_trigger = {
			always = no
		}
		cancel_effect = {
			custom_effect_tooltip = SOV_economic_crisis_easing_tt
		}

		timeout_effect = {
			custom_effect_tooltip = SOV_economic_crisis_easing_tt
		}
	}

	SOV_slowing_export_monopoly = {
		icon = GFX_decision_generic_break_treaty
		visible = {
			has_completed_focus = SOV_strengthen_intervention
			has_active_mission = SOV_economic_crisis_easing
		}
		available = {
			has_active_mission = SOV_economic_crisis_easing
		}
		cancel_if_not_visible = yes
		ai_will_do = {
			base = 100
		}
		cost = 10
		fire_only_once = yes
		days_remove = 720
		modifier = {
			min_export = 0.25
			custom_modifier_tooltip = increase_monthly_income_by_10_per
		}
		complete_effect = {
			add_to_variable = { exincome_modifier = 0.1 }
			hidden_effect = {
				add_to_variable = { SOV_sakura_path_progress_var = -4 }
				if = {
					limit = { check_variable = { SOV_sakura_path_progress_var < 0 } }
					set_variable = { SOV_sakura_path_progress_var = 0 }
				}
				SOV_balance_calculation = yes
			}
			custom_effect_tooltip = SOV_anti_path_up_4_tt
		}
		remove_effect = {
			add_to_variable = { exincome_modifier = -0.1 }
		}
	}

	SOV_dec_find_donors_to_give_us_rice = {
		priority = 97
		icon = GFX_decision_SWI_support_humanitarian_efforts
		visible = {
			has_completed_focus = SOV_look_for_investment
			has_active_mission = SOV_economic_crisis_easing
			FROM = {
				NOT = { has_war_with = ROOT }
				NOT = { has_country_flag = SOV_refuse_to_invest }
				NOT = { original_tag = DVL }
				NOT = { 
					original_tag = NPT 
					has_government = fascism
				}
				NOT = { 
					original_tag = POL 
					OR = {
						has_government = fascism
						has_government = neutrality
					}
				}
			}
		}
		available = {
			has_active_mission = SOV_economic_crisis_easing
			custom_trigger_tooltip = {
				tooltip = SOV_dec_find_donors_tt
				check_variable = { SOV_find_donors < 2 }
			}
		}
		ai_will_do = {
			base = 100
		}
		target_trigger = {
			FROM = {
				num_of_controlled_factories > 45
				NOT = { has_war_with = ROOT }
				NOT = { tag = DVL }
				NOT = { is_in_faction_with = DVL }
				NOT = { 
					AND = {
						tag = POL
						has_government = fascism
					}
				}
			}
		}
		cancel_trigger = { 
			OR = {
				NOT = { country_exists = FROM } 
				has_war_with = FROM
			}
		}
		custom_cost_text = RUS_150_ubs_save_cost
		custom_cost_trigger = {
			check_variable = { ubs_save > 150 }
		}
		fire_only_once = no
		days_remove = 60
		days_re_enable = 90
		cancel_effect = {
			hidden_effect = {
				add_to_variable = {
					ubs_save = 150
				}
			}
			custom_effect_tooltip = SOV_get_150_add_to_reserve
			if = { 
				limit = { check_variable = { SOV_find_donors < 1 } }
				set_variable = { SOV_find_donors = 0 }
			}
			else = {
				add_to_variable = {	SOV_find_donors = -1 }
			}
		}
		complete_effect = {
			add_to_variable = {
				ubs_save = -150
			}
			add_to_variable = {	SOV_find_donors = 1 }
		}
		remove_effect = {
			if = { 
				limit = { check_variable = { SOV_find_donors < 1 } }
				set_variable = { SOV_find_donors = 0 }
			}
			else = {
				add_to_variable = {	SOV_find_donors = -1 }
			}
			FROM = {
				country_event = SOV_dip.24
			}
			custom_effect_tooltip = if_they_accept
			effect_tooltip = {
				random_owned_controlled_state = {
					prioritize = { 653 572 582 583 403 265 217 581 401 251 }
					limit = { is_core_of = ROOT }
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
					}
				}
			}
		}
	}

	SOV_enlarge_investment_and_construction = {
		priority = 96
		icon = GFX_decision_generic_fundraising
		visible = {
			has_completed_focus = SOV_look_for_investment
			OR = {
				has_idea = SOV_foreign_investment
				has_idea = SOV_foreign_investment2
				has_idea = SOV_foreign_investment3
				has_idea = SOV_foreign_investment4
				has_idea = SOV_foreign_investment5
			}	
		}
		ai_will_do = {
			base = 1000
		}
		custom_cost_text = RUS_200_ubs_save_cost
		custom_cost_trigger = {
			check_variable = { ubs_save > 200 }
		}
		days_re_enable = 90
		fire_only_once = no
		complete_effect = {
			add_to_variable = { ubs_save = -200 }
			SOV_ease_investment_shortage = yes
		}
	}
}

SOV_collectivization_of_agriculture_category = {

	SOV_collectivization_of_agriculture_in_Caucasus = {
		priority = 99
		icon = GFX_decision_POL_looming_peasants_strike
		visible = {
			has_completed_focus = SOV_reorganize_committee_of_agriculture
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_collectivization_of_agriculture_tt
				check_variable = { SOV_coa < 2 }
			}
		}
		custom_cost_text = RUS_200_ubs_save_cost
		custom_cost_trigger = {
			check_variable = { ubs_save > 199 }
		}
		fire_only_once = yes
		days_remove = 270
		highlight_states = {
			highlight_state_targets = {
				state = 235
			}
		}
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				SOV_inadequately_prepared_collectivization = no
			}
		}
		complete_effect = {
			add_to_variable = { ubs_save = -200 }
			add_to_variable = { SOV_coa = 1 }
		}
		remove_effect = {
			if = {
				limit = { check_variable = { SOV_coa < 1 } }
				set_variable = { SOV_coa = 0 }
			}
			else = { add_to_variable = { SOV_coa = -1 } }
			every_owned_state = {
				limit = {
					OR = {
						state = 245
						state = 218
						state = 234
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
				}
			}
			hidden_effect = {
				add_to_variable = { SOV_collectivization_process = 1 }
				if = {
					limit = { check_variable = { SOV_collectivization_process > 5 } }
					country_event = SOV_flavor.36
				}
			}
			if = {
				limit = { SOV_inadequately_prepared_collectivization = no }
				SOV_exploitation_of_peasants = yes
			}
		}
	}

	SOV_collectivization_of_agriculture_in_Volga = {
		priority = 98
		icon = GFX_decision_POL_looming_peasants_strike
		visible = {
			has_completed_focus = SOV_reorganize_committee_of_agriculture
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_collectivization_of_agriculture_tt
				check_variable = { SOV_coa < 2 }
			}
		}
		custom_cost_text = RUS_200_ubs_save_cost
		custom_cost_trigger = {
			check_variable = { ubs_save > 199 }
		}
		fire_only_once = yes
		days_remove = 270
		highlight_states = {
			highlight_state_targets = {
				state = 217
			}
		}
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				SOV_inadequately_prepared_collectivization = no
			}
		}
		complete_effect = {
			add_to_variable = { ubs_save = -200 }
			add_to_variable = { SOV_coa = 1 }
		}
		remove_effect = {
			if = {
				limit = { check_variable = { SOV_coa < 1 } }
				set_variable = { SOV_coa = 0 }
			}
			else = { add_to_variable = { SOV_coa = -1 } }
			every_owned_state = {
				limit = {
					OR = {
						state = 217
						state = 265
						state = 239
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
				}
			}
			hidden_effect = {
				add_to_variable = { SOV_collectivization_process = 1 }
				if = {
					limit = { check_variable = { SOV_collectivization_process > 5 } }
					country_event = SOV_flavor.36
				}
			}
			if = {
				limit = { SOV_inadequately_prepared_collectivization = no }
				SOV_exploitation_of_peasants = yes
			}
		}
	}

	SOV_collectivization_of_agriculture_in_centre = {
		priority = 97
		icon = GFX_decision_POL_looming_peasants_strike
		visible = {
			has_completed_focus = SOV_reorganize_committee_of_agriculture
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_collectivization_of_agriculture_tt
				check_variable = { SOV_coa < 2 }
			}
		}
		custom_cost_text = RUS_200_ubs_save_cost
		custom_cost_trigger = {
			check_variable = { ubs_save > 199 }
		}
		fire_only_once = yes
		days_remove = 270
		highlight_states = {
			highlight_state_targets = {
				state = 258
			}
		}
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				SOV_inadequately_prepared_collectivization = no
			}
		}
		complete_effect = {
			add_to_variable = { ubs_save = -200 }
			add_to_variable = { SOV_coa = 1 }
		}
		remove_effect = {
			if = {
				limit = { check_variable = { SOV_coa < 1 } }
				set_variable = { SOV_coa = 0 }
			}
			else = { add_to_variable = { SOV_coa = -1 } }
			every_owned_state = {
				limit = {
					OR = {
						state = 258
						state = 222
						state = 220
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
				}
			}
			hidden_effect = {
				add_to_variable = { SOV_collectivization_process = 1 }
				if = {
					limit = { check_variable = { SOV_collectivization_process > 5 } }
					country_event = SOV_flavor.36
				}
			}
			if = {
				limit = { SOV_inadequately_prepared_collectivization = no }
				SOV_exploitation_of_peasants = yes
			}
		}
	}

	SOV_collectivization_of_agriculture_in_Ural = {
		priority = 96
		icon = GFX_decision_POL_looming_peasants_strike
		visible = {
			has_completed_focus = SOV_reorganize_committee_of_agriculture
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_collectivization_of_agriculture_tt
				check_variable = { SOV_coa < 2 }
			}
		}
		custom_cost_text = RUS_200_ubs_save_cost
		custom_cost_trigger = {
			check_variable = { ubs_save > 199 }
		}
		fire_only_once = yes
		days_remove = 270
		highlight_states = {
			highlight_state_targets = {
				state = 253
			}
		}
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				SOV_inadequately_prepared_collectivization = no
			}
		}
		complete_effect = {
			add_to_variable = { ubs_save = -200 }
			add_to_variable = { SOV_coa = 1 }
		}
		remove_effect = {
			if = {
				limit = { check_variable = { SOV_coa < 1 } }
				set_variable = { SOV_coa = 0 }
			}
			else = { add_to_variable = { SOV_coa = -1 } }
			every_owned_state = {
				limit = {
					OR = {
						state = 253
						state = 252
						state = 248
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
				}
			}
			hidden_effect = {
				add_to_variable = { SOV_collectivization_process = 1 }
				if = {
					limit = { check_variable = { SOV_collectivization_process > 5 } }
					country_event = SOV_flavor.36
				}
			}
			if = {
				limit = { SOV_inadequately_prepared_collectivization = no }
				SOV_exploitation_of_peasants = yes
			}
		}
	}

	SOV_collectivization_of_agriculture_in_Siberia = {
		priority = 95
		icon = GFX_decision_POL_looming_peasants_strike
		visible = {
			has_completed_focus = SOV_reorganize_committee_of_agriculture
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_collectivization_of_agriculture_tt
				check_variable = { SOV_coa < 2 }
			}
		}
		custom_cost_text = RUS_200_ubs_save_cost
		custom_cost_trigger = {
			check_variable = { ubs_save > 199 }
		}
		fire_only_once = yes
		highlight_states = {
			highlight_state_targets = {
				state = 572
			}
		}
		days_remove = 270
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				SOV_inadequately_prepared_collectivization = no
			}
		}
		complete_effect = {
			add_to_variable = { ubs_save = -200 }
			add_to_variable = { SOV_coa = 1 }
		}
		remove_effect = {
			if = {
				limit = { check_variable = { SOV_coa < 1 } }
				set_variable = { SOV_coa = 0 }
			}
			else = { add_to_variable = { SOV_coa = -1 } }
			every_owned_state = {
				limit = {
					OR = {
						state = 653
						state = 572
						state = 403
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
				}
			}
			hidden_effect = {
				add_to_variable = { SOV_collectivization_process = 1 }
				if = {
					limit = { check_variable = { SOV_collectivization_process > 5 } }
					country_event = SOV_flavor.36
				}
			}
			if = {
				limit = { SOV_inadequately_prepared_collectivization = no }
				SOV_exploitation_of_peasants = yes
			}
		}
	}

	SOV_collectivization_of_agriculture_in_Ukraine = {
		priority = 94
		icon = GFX_decision_POL_looming_peasants_strike
		visible = {
			has_completed_focus = SOV_reorganize_committee_of_agriculture
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_collectivization_of_agriculture_tt
				check_variable = { SOV_coa < 2 }
			}
		}
		custom_cost_text = RUS_200_ubs_save_cost
		custom_cost_trigger = {
			check_variable = { ubs_save > 199 }
		}
		fire_only_once = yes
		days_remove = 270
		highlight_states = {
			highlight_state_targets = {
				state = 821
			}
		}
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				SOV_inadequately_prepared_collectivization = no
			}
		}
		complete_effect = {
			add_to_variable = { ubs_save = -200 }
			add_to_variable = { SOV_coa = 1 }
		}
		remove_effect = {
			if = {
				limit = { check_variable = { SOV_coa < 1 } }
				set_variable = { SOV_coa = 0 }
			}
			else = { add_to_variable = { SOV_coa = -1 } }
			every_owned_state = {
				limit = {
					OR = {
						state = 227
						state = 228
						state = 200
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
				}
			}
			hidden_effect = {
				add_to_variable = { SOV_collectivization_process = 1 }
				if = {
					limit = { check_variable = { SOV_collectivization_process > 5 } }
					country_event = SOV_flavor.36
				}
			}
			if = {
				limit = { SOV_inadequately_prepared_collectivization = no }
				SOV_exploitation_of_peasants = yes
			}
		}
	}

	SOV_dec_build_tractor_factory = {
		icon = GFX_decision_generic_merge_plant_materiel
		fire_only_once = yes
		priority = 93
		on_map_mode = map_and_decisions_view
		allowed = {
			always = no
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_dec_build_tractor_factory_tt
				check_variable = { SOV_tractor_building < 3 }
			}
		}
		ai_will_do = {
			factor = 1000
		}
		state_target = yes
		days_remove = 120
		custom_cost_text = RUS_200_ubs_save_cost
		custom_cost_trigger = {
			check_variable = { ubs_save > 200 }
		}
		complete_effect = {
			add_to_variable = { ubs_save = -200 }
			add_to_variable = { SOV_tractor_building = 1 }
		}
		remove_effect = {
			if = {
				limit = { check_variable = { SOV_tractor_building < 1 } }
				set_variable = { SOV_tractor_building = 0 }
			}
			else = { add_to_variable = { SOV_tractor_building = -1 } }
			FROM = {
				if = {
					limit = { 
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = no
						}
					}
					add_building_construction = {
						type = arms_factory
						level = 1
					}
				}
				else = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
					}
				}
			}
		}
	}

	SOV_dec_build_collective_farm = {
		allowed = {
			always = no
		}
		icon = GFX_decision_generic_factory
		fire_only_once = yes
		priority = 92
		on_map_mode = map_and_decisions_view
		ai_will_do = {
			factor = 1000
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_dec_build_tractor_factory_tt
				check_variable = { SOV_tractor_building < 3 }
			}
		}
		state_target = yes
		days_remove = 120
		custom_cost_text = RUS_200_ubs_save_cost
		custom_cost_trigger = {
			check_variable = { ubs_save > 200 }
		}
		modifier = {
			civilian_factory_use = 5
		}
		complete_effect = {
			add_to_variable = { ubs_save = -200 }
			add_to_variable = { SOV_tractor_building = 1 }
		}
		remove_effect = {
			if = {
				limit = { check_variable = { SOV_tractor_building < 1 } }
				set_variable = { SOV_tractor_building = 0 }
			}
			else = { add_to_variable = { SOV_tractor_building = -1 } }
			FROM = {
				if = {
					limit = { 
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = no
						}
					}
					add_building_construction = {
						type = industrial_complex
						level = 1
					}
				}
				else = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
					}
				}
			}
		}
	}
}

SOV_development_of_industry_category = {

	SOV_dec_build_civil_factories = {
		allowed = {
			always = no
		}
		icon = GFX_decision_generic_factory
		fire_only_once = yes
		priority = 99
		on_map_mode = map_and_decisions_view
		ai_will_do = {
			factor = 10000
		}
		available = {
			num_of_civilian_factories_available_for_projects > 4
			custom_trigger_tooltip = {
				tooltip = SOV_dec_build_civil_factories_tt
				check_variable = { SOV_building < 3 }
			}
		}
		state_target = yes
		days_remove = var:SPU
		custom_cost_text = RUS_150_ubs_save_cost
		custom_cost_trigger = {
			check_variable = { ubs_save > 150 }
		}
		modifier = {
			civilian_factory_use = 5
		}
		complete_effect = {
			add_to_variable = { ubs_save = -150 }
			add_to_variable = { SOV_building = 1 }
		}
		remove_effect = {
			if = {
				limit = { check_variable = { SOV_building < 1 } }
				set_variable = { SOV_building = 0 }
			}
			else = { add_to_variable = { SOV_building = -1 } }
			FROM = {
				if = {
					limit = { 
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = no
						}
					}
					add_building_construction = {
						type = industrial_complex
						level = 1
					}
				}
				else = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
					}
				}
			}
		}
	}

	SOV_dec_promote_urbanization = {
		icon = GFX_decision_generic_construction
		fire_only_once = yes
		priority = 99
		on_map_mode = map_only
		visible = {
			has_completed_focus = SOV_steel_complex
			FROM = {
				NOT = { has_state_flag = SOV_promoted_urbanization }
			}
		}
		ai_will_do = {
			factor = 0
			modifier = {
				add = 100
				has_political_power > 500
			}

		}
		available = {
			FROM = {
				infrastructure > 2
			}
			custom_trigger_tooltip = {
				tooltip = SOV_dec_promote_urbanization_tt
				check_variable = { SOV_build_urban < 3 }
			}
		}
		target_trigger = {
			FROM = {
				is_controlled_by = ROOT
				OR = {
					is_core_of = ROOT
				    is_claimed_by = ROOT
				}
				OR = {
					has_state_category = four
					has_state_category = five
					has_state_category = six
				}
			}
		}
		state_target = yes
		days_remove = var:SPU
		cost = 50
		complete_effect = {
			add_to_variable = { SOV_build_urban = 1 }
		}
		remove_effect = {
			if = {
				limit = { check_variable = { SOV_build_urban < 1 } }
				set_variable = { SOV_build_urban = 0 }
			}
			else = { add_to_variable = { SOV_build_urban = -1 } }
			FROM = {
				SOV_promote_regional_development = yes
				set_state_flag = SOV_promoted_urbanization
			}
		}
	}
}

SOV_territorial_affairs = {

	SOV_integrate_Kiev_region = {
		icon = GFX_decision_infiltrate_state
		visible = {
			tag = SOV
			UKR = {
				exists = no
			}
			any_state = {
				is_core_of = UKR
				NOT = { is_core_of = ROOT }
			}
		}
		available = {
			any_state = {
				is_core_of = UKR
				is_controlled_by = ROOT
			}
		}
		ai_will_do = {
			factor = 100000
		}
		cost = 50
		days_remove = 90
		fire_only_once = yes
		complete_effect = {
			every_state = {
				limit = { is_core_of = UKR }
				add_claim_by = ROOT
			}
		}
		remove_effect = {
			every_state = {
				limit = {
					is_core_of = UKR
					is_controlled_by = ROOT
				}
				add_core_of_ROOT = yes
			}
			hidden_effect = {
				country_event = ukr_politics.45
			}
			add_to_variable = { ubs_save = 300 }
			custom_effect_tooltip = SOV_get_300_add_to_reserve
			SOV_allowance_of_peasants = yes
		}
	}

	SOV_integrate_Minsk_region = {
		icon = GFX_decision_infiltrate_state
		visible = {
			OR = {
				tag = SOV
				tag = UKR
			}
			OR = {
				any_owned_state = {
					is_Minsk_region = yes
					NOT = { is_core_of = ROOT }
				}
				any_subject_country = {
					any_owned_state = {
						is_Minsk_region = yes
					}
				}
			}
		}
		available = {

		}
		ai_will_do = {
			factor = 100000
		}
		cost = 50
		days_remove = 90
		fire_only_once = yes
		complete_effect = {
			every_owned_state = {
				limit = {
					is_Minsk_region = yes
					NOT = { is_core_of = ROOT }
				}
				add_claim_by = ROOT
			}
		}
		remove_effect = {

			if = {
				limit = {
					any_subject_country = {
						any_owned_state = {
							is_Minsk_region = yes
							NOT = { is_core_of = ROOT }
						}
					}
				}
				every_subject_country = {
					every_owned_state = {
						limit = {
							is_Minsk_region = yes
						}
						transfer_state_to = ROOT
					}
				}
			}
			every_owned_state = {
				limit = {
					is_Minsk_region = yes
					NOT = { is_core_of = ROOT }
				}
				remove_claim_by = ROOT
				add_core_of = ROOT
			}
		}
	}

	SOV_integrate_Karelia_region = {
		icon = GFX_decision_infiltrate_state
		visible = {
			tag = SOV
			OR = {
				owns_state = 146
				any_subject_country = {
					NOT = { tag = FIN }
					owns_state = 146
				}
			}
		}
		available = {
			
		}
		ai_will_do = {
			factor = 100000
		}
		cost = 5
		days_remove = 90
		fire_only_once = yes
		complete_effect = {
			146 = {
				add_claim_by = ROOT
			}
		}
		remove_effect = {
			if = {
				limit = {
					any_subject_country = {
						owns_state = 146
					}
				}
				transfer_state = 146
			}
			146 = {
				remove_claim_by = ROOT
				add_core_of = ROOT
			}
		}
	}

	SOV_integrate_Armenia_and_Georgia_region = {
		icon = GFX_decision_infiltrate_state
		visible = {
			tag = SOV
			OR = {
				any_owned_state = {
					is_Armenia_and_Georgia_state = yes
					NOT = { is_core_of = ROOT }
				}
				any_subject_country = {
					any_owned_state = {
						is_Armenia_and_Georgia_state = yes
						NOT = { is_core_of = ROOT }
					}
				}
			}
		}
		available = {
			
		}
		ai_will_do = {
			factor = 100000
		}
		cost = 5
		days_remove = 90
		fire_only_once = no
		complete_effect = {
			every_owned_state = {
				limit = {
					is_Armenia_and_Georgia_state = yes
					NOT = { is_core_of = ROOT }
				}
				add_claim_by = ROOT
			}
		}
		remove_effect = {

			if = {
				limit = {
					any_subject_country = {
						any_owned_state = {
							is_Armenia_and_Georgia_state = yes
							NOT = { is_core_of = ROOT }
						}
					}
				}
				every_subject_country = {
					every_owned_state = {
						limit = {
							is_Armenia_and_Georgia_state = yes
						}
						transfer_state_to = ROOT
					}
				}
			}
			every_owned_state = {
				limit = {
					is_Armenia_and_Georgia_state = yes
					NOT = { is_core_of = ROOT }
				}
				remove_claim_by = ROOT
				add_core_of = ROOT
			}
		}
	}

	SOV_rename_Kaliningrad = {
		icon = GFX_decision_hol_draw_up_staff_plans
		allowed = {
		}
		visible = {
			tag = SOV
			controls_state = 5
		}
		available = {
			controls_state = 5
		}
		fire_only_once = yes
		cost = 10
		ai_will_do = {
			factor = 100
		}
		complete_effect = {
			5 = {
				set_state_name = "Kaliningrad"
			}
			set_province_name = {
				id = 6332
				name = "Kaliningrad"
			}
			add_state_core = 5
		}
	}
}

SOV_industrial_migration_category = {

	SOV_dec_army_industrial_migration = {
		icon = GFX_decision_generic_industry
		fire_only_once = yes
		on_map_mode = map_and_decisions_view
		visible = {
			has_completed_focus = SOV_migration_of_industries
			FROM = {
				NOT = { has_state_flag = SOV_army_inward_migration }
				arms_factory > 0
			}
		}
		ai_will_do = {
			factor = 1000
		}
		available = {
			has_war = no
			custom_trigger_tooltip = {
				tooltip = SOV_industrial_migration_tt
				check_variable = { SOV_migration < 5 }
			}
		}
		target_trigger = {
			FROM = {
				OR = {
					region = 132
					region = 133
					region = 150
					region = 12
					region = 165
					region = 130
					region = 134
					region = 135
					region = 40
				}
				is_controlled_by = ROOT
				OR = {
					is_core_of = ROOT
				    is_claimed_by = ROOT
				}
				NOT = {
					has_state_category = zero
					has_state_category = zero_island
					has_state_category = wasteland
					has_state_category = one
					has_state_category = two
					has_state_category = three
					has_state_category = four
				}
			}
		}
		state_target = yes
		days_remove = 60
		cost = 10
		complete_effect = {
			add_to_variable = { SOV_migration = 1 }
		}
		remove_effect = {
			if = {
				limit = { check_variable = { SOV_migration < 0 } }
				set_variable = { SOV_migration = 0 }
			}
			else = {
				add_to_variable = { SOV_migration = -1 }
			}
			FROM = {
				remove_building = {
					type = arms_factory
					level = 1
				}
				set_state_flag = SOV_army_inward_migration
			}
			random_owned_controlled_state = {
				limit = {
					OR = {
						region = 14
						region = 136
						region = 151
						region = 235
					}
				}
				add_building_construction = {
					type = arms_factory
					level = 1
				}
				hidden_effect = { SOV_promote_regional_development = yes }
				custom_effect_tooltip = SOV_upgrading_area_type_tt
			}
			hidden_effect = {
				add_to_variable = { SOV_youth_party_loyalty_var = 1 }
				add_to_variable = { SOV_youth_party_pp_var = 1 }
			}
			custom_effect_tooltip = SOV_youth_partyn_party_loyalty_1_influence_1_tt
		}
	}

	SOV_dec_civil_industrial_migration = {
		icon = GFX_decision_generic_trucks
		fire_only_once = yes
		on_map_mode = map_and_decisions_view
		visible = {
			has_completed_focus = SOV_migration_of_industries
			FROM = {
				NOT = { has_state_flag = SOV_civil_inward_migration }
				industrial_complex > 0
			}
		}
		ai_will_do = {
			factor = 1000
		}
		available = {
			has_war = no
			custom_trigger_tooltip = {
				tooltip = SOV_industrial_migration_tt
				check_variable = { SOV_migration < 5 }
			}
		}
		target_trigger = {
			FROM = {
				OR = {
					region = 132
					region = 133
					region = 150
					region = 12
					region = 165
					region = 130
					region = 134
					region = 135
					region = 40
				}
				is_controlled_by = ROOT
				OR = {
					is_core_of = ROOT
				    is_claimed_by = ROOT
				}
				NOT = {
					has_state_category = zero
					has_state_category = zero_island
					has_state_category = wasteland
					has_state_category = one
					has_state_category = two
					has_state_category = three
					has_state_category = four
				}
			}
		}
		state_target = yes
		days_remove = 60
		cost = 10
		complete_effect = {
			add_to_variable = { SOV_migration = 1 }
		}
		remove_effect = {
			if = {
				limit = { check_variable = { SOV_migration < 0 } }
				set_variable = { SOV_migration = 0 }
			}
			else = {
				add_to_variable = { SOV_migration = -1 }
			}
			FROM = {
				remove_building = {
					type = industrial_complex
					level = 1
				}
				set_state_flag = SOV_civil_inward_migration
			}
			random_owned_controlled_state = {
				limit = {
					OR = {
						region = 14
						region = 136
						region = 151
						region = 235
					}
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
				}
				hidden_effect = { SOV_promote_regional_development = yes }
				custom_effect_tooltip = SOV_upgrading_area_type_tt
			}
			hidden_effect = {
				add_to_variable = { SOV_youth_party_loyalty_var = 1 }
				add_to_variable = { SOV_youth_party_pp_var = 1 }
			}
			custom_effect_tooltip = SOV_youth_partyn_party_loyalty_1_influence_1_tt
		}
	}
}

SOV_special_military_operations_category = {

	SOV_special_operation_failure = {
		priority = 99
		icon = GFX_decision_hol_draw_up_staff_plans
		activation = {   
			always = no
		}  
		visible = {
			tag = SOV
		}    
		available = {
			UKR = {
				OR = {
					exists = no
					is_subject_of = SOV
				}
			}
		}   
		days_mission_timeout = 180
		is_good = no
		fire_only_once = yes
		timeout_effect = {      
			SOV = {
				add_timed_idea = {
					idea = SOV_special_operation_UKR_failure
					days = 365
				}
				hidden_effect = {
					country_event = { days = 3 id = SOV_flavor.24 }
					country_event = SOV_news.6
					set_country_flag = SOV_special_operation_failure_decsison
					set_country_flag = SOV_special_operation_failure_flag
				}
			}
			hidden_effect = {
				UKR = {
					add_timed_idea = {
						idea = UKR_special_operation_SOV_win
						days = 365
					}
					UKR_become_great = yes
					activate_mission = UKR_a_vigorous_attack
				}
			}
	    }
		
	}

	UKR_special_operation_failure = {
		priority = 99
		icon = GFX_decision_hol_draw_up_staff_plans
		activation = {   
			always = no
		}  
		visible = {
			tag = UKR
		}    
		available = {
			UKR = {
				OR = {
					exists = no
					is_subject_of = SOV
				}
			}
		}   
		days_mission_timeout = 180
		is_good = yes
		fire_only_once = yes
		timeout_effect = {   
			effect_tooltip = {
				UKR = {
					add_timed_idea = {
						idea = UKR_special_operation_SOV_win
						days = 365
					}
					hidden_effect = {
						UKR_become_great = yes
					}
					activate_mission = UKR_a_vigorous_attack
				}
			}   
	    }
		
	}

	UKR_a_vigorous_attack = {
		icon = GFX_decision_revolt
		activation = {
			always = no
		}
		visible = {
			original_tag = UKR
		}    
		available = {
			always = no
		}  
		days_mission_timeout = 180
		is_good = no
		fire_only_once = yes
		cancel_trigger = {
			NOT = { country_exists = SOV }
		}
		timeout_effect = {
			SOV = {
				# every_core_state = {
				# 	remove_core_of = UKR
				# }
				ROOT = { country_event = ukr_politics.8 }
			}
			remove_mission = UKR_constant_supply_mission
			remove_mission = UKR_defection_of_army_mission
			remove_ideas = UKR_special_operation_SOV_win
		}


	}

	UKR_constant_supply_mission = {
		priority = 98
		icon = GFX_decision_generic_nationalism
		activation = {   
			always = no
		}  
		visible = {
			tag = UKR
		}    
		available = {
			always = no
		}   
		cancel_trigger = {
			UKR = { NOT = { has_war_with = SOV } }
		}
		days_mission_timeout = 30
		is_good = yes
		fire_only_once = no
		timeout_effect = {      
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = 1000
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment_1
				amount = 200
			}
			add_equipment_to_stockpile = {
				type = support_equipment_1
				amount = 100
			}
			if = {
				limit = { 
					UKR = { 
						has_war_with = SOV 
						has_idea = UKR_special_operation_SOV_win
					} 
				}
				activate_mission = UKR_constant_supply_mission
			}
	    }
	}

	UKR_defection_of_army_mission = {
		priority = 97
		icon = GFX_decision_generic_military
		activation = {   
			always = no
		}  
		visible = {
			tag = UKR
		}    
		available = {
			always = no
		}   
		cancel_trigger = {
			UKR = { NOT = { has_war_with = SOV } }
		}
		days_mission_timeout = 45
		is_good = yes
		fire_only_once = no
		timeout_effect = {      
			random_list = {
				50 = {
					random_owned_controlled_state = {
						create_unit = {
							division = "name = \"nationalist front\" division_template = \"nationalist front\" start_experience_factor = 0.3"
							owner = ROOT
						}
						create_unit = {
							division = "name = \"nationalist front\" division_template = \"nationalist front\" start_experience_factor = 0.3"
							owner = ROOT
						}
						create_unit = {
							division = "name = \"nationalist front\" division_template = \"nationalist front\" start_experience_factor = 0.3"
							owner = ROOT
						}
					}
				}
				40 = {
					random_owned_controlled_state = {
						create_unit = {
							division = "name = \"nationalist front\" division_template = \"nationalist front\" start_experience_factor = 0.3"
							owner = ROOT
						}
						create_unit = {
							division = "name = \"nationalist front\" division_template = \"nationalist front\" start_experience_factor = 0.3"
							owner = ROOT
						}
						create_unit = {
							division = "name = \"nationalist front\" division_template = \"nationalist front\" start_experience_factor = 0.3"
							owner = ROOT
						}
						create_unit = {
							division = "name = \"nationalist front\" division_template = \"nationalist front\" start_experience_factor = 0.3"
							owner = ROOT
						}
					}
				}
				10 = {
					random_owned_controlled_state = {
						create_unit = {
							division = "name = \"nationalist front\" division_template = \"nationalist front\" start_experience_factor = 0.3"
							owner = ROOT
						}
						create_unit = {
							division = "name = \"nationalist front\" division_template = \"nationalist front\" start_experience_factor = 0.3"
							owner = ROOT
						}
						create_unit = {
							division = "name = \"nationalist front\" division_template = \"nationalist front\" start_experience_factor = 0.3"
							owner = ROOT
						}
						create_unit = {
							division = "name = \"nationalist front\" division_template = \"nationalist front\" start_experience_factor = 0.3"
							owner = ROOT
						}
						create_unit = {
							division = "name = \"nationalist front\" division_template = \"nationalist front\" start_experience_factor = 0.3"
							owner = ROOT
						}
						create_unit = {
							division = "name = \"nationalist front\" division_template = \"nationalist front\" start_experience_factor = 0.3"
							owner = ROOT
						}
					}
				}
			}
			if = {
				limit = { 
					UKR = { 
						has_war_with = SOV 
						has_idea = UKR_special_operation_SOV_win
					} 
				}
				activate_mission = UKR_defection_of_army_mission
			}
	    }
	}
}

SOV_propaganda_campaigns = {

	SOV_propaganda_motherland_calls = { # ID = 3
		priority = 2

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 0
			modifier = {
				add = 1
				surrender_progress > 0.4
			}
			modifier = {
				add = 100
				has_manpower < 500000
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes
			has_war = yes
			any_enemy_country = {
				is_major = yes
			}
		}

		visible = {
			has_completed_focus = SOV_establish_propaganda_front
		}

		days_remove = 180

		days_re_enable = 90

		cost = 50

		modifier = {
			weekly_manpower = 3000
			training_time_factor = -0.1
			minimum_training_level = -0.1
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 3 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 3 }
			SOV_reset_propaganda_campaign_slot_effect = yes

			custom_effect_tooltip = SOV_propaganda_campaign_reuse_tt
		}
	}

	SOV_propaganda_victory_at_hand = { # ID = 4
		priority = 3

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				factor = 100
				any_enemy_country = {
					is_major = yes
				}
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes

			has_war = yes
			surrender_progress < 0.01
			any_enemy_country = {
				is_major = yes
				ROOT = {
					any_controlled_state = {
						is_core_of = PREV.PREV
					}
				}
			}
		}

		visible = {
			has_completed_focus = SOV_establish_propaganda_front
		}

		days_remove = 150

		days_re_enable = 90

		cost = 50

		modifier = {
			army_attack_factor = 0.05
			army_speed_factor = 0.1
			org_loss_when_moving = -0.25
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 4 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 4 }
			SOV_reset_propaganda_campaign_slot_effect = yes

			custom_effect_tooltip = SOV_propaganda_campaign_reuse_tt
		}
	}

	SOV_propaganda_defend_moscow = { # ID = 5
		priority = 4

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 0
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes

			controls_state = 219 #Moscow
			219 = {
				any_neighbor_state = {
					controller = {
						has_war_with = ROOT
					}
				}
			}
		}

		visible = {
			has_completed_focus = SOV_establish_propaganda_front
		}

		days_remove = 150

		days_re_enable = 90

		cost = 50

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 5 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes

			219 = { #Moscow
				add_dynamic_modifier = { modifier = SOV_defend_moscow scope = SOV }
				every_neighbor_state = {
					add_dynamic_modifier = { modifier = SOV_defend_moscow scope = SOV }
				}
			}
			custom_effect_tooltip = SOV_propaganda_defend_moscow_state_modifier_tt
		}

		remove_effect = {
			219 = { #Moscow
				remove_dynamic_modifier = { modifier = SOV_defend_moscow }
				every_neighbor_state = {
					remove_dynamic_modifier = { modifier = SOV_defend_moscow }
				}
			}

			set_variable = { SOV_propaganda_campaign_to_remove = 5 }
			SOV_reset_propaganda_campaign_slot_effect = yes
			custom_effect_tooltip = SOV_propaganda_campaign_reuse_tt
		}
	}

	SOV_propaganda_fight_to_the_last = { # ID = 6
		priority = 5

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 0.75
			modifier = {
				factor = 100
				any_enemy_country = {
					is_major = yes
				}
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes
			has_war = yes
			surrender_progress > 0.1
		}

		visible = {
			has_completed_focus = SOV_establish_propaganda_front
		}

		days_remove = 150

		days_re_enable = 90


		cost = 50

		modifier = {
			army_core_defence_factor = 0.15
			out_of_supply_factor = -0.1
			no_supply_grace = 72
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 6 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 6 }
			SOV_reset_propaganda_campaign_slot_effect = yes
			custom_effect_tooltip = SOV_propaganda_campaign_reuse_tt
		}
	}

	SOV_propaganda_hit_of_hammer = { # ID = 7
		priority = 6

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				factor = 100
				any_enemy_country = {
					is_major = yes
				}
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes

			has_war = yes
		}

		visible = {
			has_completed_focus = SOV_revive_the_stakhanovite_movement
		}

		days_remove = 150

		days_re_enable = 90

		cost = 50

		modifier = {
			industrial_capacity_factory = 0.15
			industrial_capacity_dockyard = 0.10
			equipment_capture = 0.15
		}
		

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 7 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 7 }
			SOV_reset_propaganda_campaign_slot_effect = yes
			custom_effect_tooltip = SOV_propaganda_campaign_reuse_tt
		}
	}

	SOV_propaganda_transport = { # ID = 8
		priority = 7

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 0.7
			modifier = {
				factor = 100
				any_enemy_country = {
					is_major = yes
				}
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes
		}

		visible = {
			has_completed_focus = SOV_establish_propaganda_front
		}

		days_remove = 150

		days_re_enable = 90

		cost = 50

		modifier = {
			production_speed_supply_node_factor = 0.15
			production_speed_rail_way_factor = 0.15
			supply_consumption_factor = -0.1
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 8 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 8 }
			SOV_reset_propaganda_campaign_slot_effect = yes
			custom_effect_tooltip = SOV_propaganda_campaign_reuse_tt
		}
	}

	SOV_propaganda_oil_for_the_motherland = { # ID = 9
		priority = 8

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				factor = 10
				fuel_ratio < 0.5
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes

			any_controlled_state = {
				has_resources_amount = {
					resource = oil
					amount > 0
				}
			}
		}

		visible = {
			has_completed_focus = SOV_establish_propaganda_front
		}

		days_remove = 150

		days_re_enable = 90

		cost = 50

		modifier = {
			fuel_gain_factor = 0.1
			army_fuel_consumption_factor = -0.1
			air_fuel_consumption_factor = -0.1
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 9 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 9 }
			SOV_reset_propaganda_campaign_slot_effect = yes
			custom_effect_tooltip = SOV_propaganda_campaign_reuse_tt
		}
	}

	SOV_propaganda_more_metal = { # ID = 10
		priority = 9

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 0.8
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes

			any_controlled_state = {
				OR = {
					has_resources_amount = {
						resource = steel
						amount > 0
					}
					has_resources_amount = {
						resource = aluminium
						amount > 0
					}
					has_resources_amount = {
						resource = chromium
						amount > 0
					}
					has_resources_amount = {
						resource = tungsten
						amount > 0
					}
				}
			}
		}

		visible = {
			has_completed_focus = SOV_establish_propaganda_front
		}

		days_remove = 150

		days_re_enable = 90

		cost = 50

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 10 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
			hidden_effect = {
				capital_scope = {
					set_variable = { SOV_steel_bonus = 0 }
					set_variable = { SOV_aluminium_bonus = 0 }
					set_variable = { SOV_chromium_bonus = 0 }
					set_variable = { SOV_tungsten_bonus = 0 }
				}
				every_controlled_state = {
					limit = {
						has_resources_amount = {
							resource = steel
							amount > 0
						}
					}
					capital_scope = { add_to_variable = { SOV_steel_bonus = 1 } }
				}

				every_controlled_state = {
					limit = {
						has_resources_amount = {
							resource = aluminium
							amount > 0
						}
					}
					capital_scope = { add_to_variable = { SOV_aluminium_bonus = 1 } }
				}

				every_controlled_state = {
					limit = {
						has_resources_amount = {
							resource = chromium
							amount > 0
						}
					}
					capital_scope = { add_to_variable = { SOV_chromium_bonus = 1 } }
				}

				every_controlled_state = {
					limit = {
						has_resources_amount = {
							resource = tungsten
							amount > 0
						}
					}
					capital_scope = { add_to_variable = { SOV_tungsten_bonus = 1 } }
				}
			}

			capital_scope = {
				add_dynamic_modifier = { modifier = SOV_increased_metals_production }
			}

			custom_effect_tooltip = SOV_propaganda_more_metal_tt
		}

		remove_effect = {
			capital_scope = {
				remove_dynamic_modifier = { modifier = SOV_increased_metals_production }
			}

			set_variable = { SOV_propaganda_campaign_to_remove = 10 }
			SOV_reset_propaganda_campaign_slot_effect = yes
			custom_effect_tooltip = SOV_propaganda_campaign_reuse_tt
		}
	}

	SOV_propaganda_high_yield = { # ID = 11
		priority = 10

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				add = 1000
				has_war = no
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes

			surrender_progress < 0.15
		}

		visible = {
			has_completed_focus = SOV_establish_propaganda_front
		}

		days_remove = 150

		days_re_enable = 90

		cost = 50
		modifier = {
			production_speed_industrial_complex_factor = 0.1
			production_speed_infrastructure_factor = 0.15
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 11 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 11 }
			SOV_reset_propaganda_campaign_slot_effect = yes
			custom_effect_tooltip = SOV_propaganda_campaign_reuse_tt
		}
	}

	SOV_propaganda_for_the_motherland = { # ID = 12
		priority = 11

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				factor = 100
				any_enemy_country = {
					is_major = yes
				}
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes
			has_war = yes
			any_enemy_country = {
				is_major = yes
			}
		}

		visible = {
			has_completed_focus = SOV_collectivist_propaganda
		}

		days_remove = 150

		days_re_enable = 90

		cost = 50

		modifier = {
			army_core_defence_factor = 0.15
			command_power_gain = 0.25
			breakthrough_factor = 0.075
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 12 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 12 }
			SOV_reset_propaganda_campaign_slot_effect = yes
			custom_effect_tooltip = SOV_propaganda_campaign_reuse_tt
		}
	}

	SOV_propaganda_hero_forward = { # ID = 13
		priority = 12

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 0
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes
			has_war = yes
			any_army_leader = {
				is_assigned = yes
			}
		}

		visible = {
			has_completed_focus = SOV_positive_heroism
		}

		days_remove = 150

		days_re_enable = 90

		cost = 50
		modifier = {
			attrition = -0.08
			army_morale_factor = 0.1
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 13 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes

			custom_effect_tooltip = SOV_propaganda_hero_forward_tt

			set_temp_variable = { temp_targets_index = 0 }
			while_loop_effect = {
				limit = {
					check_variable = { temp_targets_index < 5 }
				}
				if = {
					limit = {
						any_army_leader = {
							is_assigned = yes
							NOT = { has_trait = trait_SOV_hero }
						}
					}
					random_army_leader = {
						limit = {
							is_assigned = yes
							NOT = { has_trait = trait_SOV_hero }
						}
						add_timed_unit_leader_trait = {
							trait = trait_SOV_hero
							days = 180 #Does not seem to support vars
						}
					}
				}
				else = {
					random_army_leader = {
						limit = {
							NOT = { has_trait = trait_SOV_hero }
						}
						add_timed_unit_leader_trait = {
							trait = trait_SOV_hero
							days = 180 #Does not seem to support vars
						}
					}
				}
				add_to_temp_variable = { temp_targets_index = 1 }
			}
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 13 }
			SOV_reset_propaganda_campaign_slot_effect = yes
			custom_effect_tooltip = SOV_propaganda_campaign_reuse_tt
		}
	}

	SOV_propaganda_anti_cupism = { # ID = 14
		priority = 13

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				any_enemy_country = {
					is_major = yes
					has_government = democratic
				}
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes
			has_war_with = ENG
		}

		visible = {
			has_completed_focus = SOV_echo_central_America
		}

		days_remove = 150

		days_re_enable = 90

		cost = 50

		modifier = {
			opinion_gain_monthly_same_ideology_factor = 0.25
			democratic_acceptance = -100
			democratic_drift = -0.1

		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 14 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 14 }
			SOV_reset_propaganda_campaign_slot_effect = yes
			custom_effect_tooltip = SOV_propaganda_campaign_reuse_tt
		}
	}

	SOV_propaganda_anti_Aliens = { # ID = 15
		priority = 14

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				any_enemy_country = {
					is_major = yes
					has_government = fascism
				}
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes
			has_war_with = DVL
		}

		visible = {
			has_completed_focus = SOV_earth_security_policy
		}

		days_remove = 150

		days_re_enable = 90

		cost = 50

		modifier = {
			opinion_gain_monthly_same_ideology_factor = 0.25
			fascism_acceptance = -100
			fascism_drift = -0.1
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 15 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes	
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 15 }
			SOV_reset_propaganda_campaign_slot_effect = yes
			custom_effect_tooltip = SOV_propaganda_campaign_reuse_tt
		}
	}

	SOV_propaganda_treacherous_enemy = { # ID = 16
		priority = 15

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				agency_upgrade_number > 4
			}
			modifier = {
				factor = 0
				has_intelligence_agency = no
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes
		}

		visible = {
			agency_upgrade_number > 4
			has_completed_focus = SOV_collectivist_propaganda
		}

		days_remove = 150

		days_re_enable = 90

		cost = 50

		modifier = {
			encryption = 1
			enemy_operative_detection_chance_factor = 0.75
			enemy_operative_capture_chance_factor = 0.75
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 16 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 16 }
			SOV_reset_propaganda_campaign_slot_effect = yes
			custom_effect_tooltip = SOV_propaganda_campaign_reuse_tt
		}
	}

	SOV_propaganda_do_not_blab = { # ID = 17
		priority = 16

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				has_war = yes
			}
			modifier = {
				factor = 100
				any_enemy_country = {
					is_major = yes
				}
			}
			modifier = {
				factor = 0
				has_intelligence_agency = no
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes
		}

		visible = {
			has_intelligence_agency = yes
			has_completed_focus = SOV_collectivist_propaganda
		}

		days_remove = 150

		days_re_enable = 90

		cost = 50

		modifier = {
			army_intel_to_others = -50
			navy_intel_to_others = -50
			airforce_intel_to_others = -50
			civilian_intel_to_others = -50
			foreign_subversive_activites = -0.25
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 17 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 17 }
			SOV_reset_propaganda_campaign_slot_effect = yes
			custom_effect_tooltip = SOV_propaganda_campaign_reuse_tt
		}
	}

	SOV_propaganda_sweep_scum_out = { # ID = 18
		priority = 17

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 100
			modifier = {
				factor = 0.001
				surrender_progress > 0.75
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes

			has_war = yes
			any_enemy_country = {
				any_controlled_state = {
					is_core_of = ROOT
				}
			}
		}

		visible = {
			has_completed_focus = SOV_the_komsomol
		}

		days_remove = 150

		days_re_enable = 90

		cost = 50

		modifier = {
			army_core_attack_factor = 0.15
			army_core_defence_factor = 0.10
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 18 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 18 }
			SOV_reset_propaganda_campaign_slot_effect = yes
			custom_effect_tooltip = SOV_propaganda_campaign_reuse_tt
		}
	}

	SOV_propaganda_knowledge = { # ID = 19
		priority = 18

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 5
			modifier = {
				factor = 100
				has_war = no
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes
		}

		visible = {
			has_completed_focus = SOV_the_komsomol
		}

		days_remove = 150

		days_re_enable = 90

		cost = 50

		modifier = {
			research_speed_factor = 0.05
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 19 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 19 }
			SOV_reset_propaganda_campaign_slot_effect = yes
			custom_effect_tooltip = SOV_propaganda_campaign_reuse_tt
		}
	}

	SOV_propaganda_builders = { # ID = 20
		priority = 19

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				factor = 100
				has_war = no
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes
		}

		visible = {
			has_completed_focus = SOV_the_komsomol
		}

		days_remove = 150

		days_re_enable = 90

		cost = 50

		modifier = {
			research_speed_factor = 0.02
			communism_drift = 0.1
			opinion_gain_monthly_same_ideology_factor = 0.25
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 20 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
			custom_effect_tooltip = SOV_propaganda_builders_effect_tt
			if = {
				limit = {
					any_country = {
						is_subject_of = ROOT
					}
				}
				hidden_effect = {
					every_country = {
						limit = {
							is_subject_of = ROOT
						}
						country_event = SOV_pub.1
					}
				}
			}
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 20 }
			SOV_reset_propaganda_campaign_slot_effect = yes
			custom_effect_tooltip = SOV_propaganda_campaign_reuse_tt
		}
	}

	SOV_propaganda_glory_to_partisans = { # ID = 21
		priority = 20

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 0.1
			modifier = {
				factor = 10
				agency_upgrade_number > 4
				any_enemy_country = {
					is_major = yes
				}
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes

			has_war = yes
			any_enemy_country = {
				any_controlled_state = {
					is_core_of = ROOT
				}
			}
		}

		visible = {
			has_completed_focus = SOV_positive_heroism
		}

		days_remove = 150

		days_re_enable = 90

		cost = 50

		modifier = {
			operation_targeted_sabotage_resources_outcome = 0.25
			operation_targeted_sabotage_infrastructure_outcome = 0.25
			operation_targeted_sabotage_industry_outcome = 0.25
			operation_make_resistance_contacts_outcome = 0.25
			operation_boost_resistance_outcome = 0.25
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 21 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 21 }
			SOV_reset_propaganda_campaign_slot_effect = yes
			custom_effect_tooltip = SOV_propaganda_campaign_reuse_tt
		}
	}

	SOV_propaganda_death_to_invaders = { # ID = 22
		priority = 21

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				factor = 100
				any_enemy_country = {
					is_major = yes
				}
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes

			has_war = yes
			any_enemy_country = {
				any_controlled_state = {
					is_core_of = ROOT
				}
			}
		}

		visible = {
			has_completed_focus = SOV_positive_heroism
		}

		days_remove = 150

		days_re_enable = 90

		cost = 50

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 22 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
			set_global_flag = SOV_propaganda_death_to_invaders_active_flag #This is used to dynamically add/remove the state modifier when a state is gained/lost by SOV

			if = {
				limit = {
					any_enemy_country = {
						any_controlled_state = {
							is_core_of = ROOT
						}
					}
				}
				every_enemy_country = {
					limit = {
						any_controlled_state = {
							is_core_of = ROOT
						}
					}
					every_controlled_state = {
						limit = {
							is_core_of = ROOT
						}
						add_dynamic_modifier = { modifier = SOV_invaders_must_die }
					}
				}
			}
			else = {
				custom_effect_tooltip = SOV_propaganda_death_to_invaders_no_invaders_tt
			}
			custom_effect_tooltip = SOV_propaganda_death_to_invaders_state_modifier_tt
		}

		remove_effect = {
			every_state = {
				limit = {
					has_dynamic_modifier = { modifier = SOV_invaders_must_die }
				}
				remove_dynamic_modifier = { modifier = SOV_invaders_must_die }
			}

			clr_global_flag = SOV_propaganda_death_to_invaders_active_flag

			set_variable = { SOV_propaganda_campaign_to_remove = 22 }
			SOV_reset_propaganda_campaign_slot_effect = yes
			custom_effect_tooltip = SOV_propaganda_campaign_reuse_tt
		}
	}

	# SOV_propaganda_Sonia = { # ID = 23
	# 	priority = 22

	# 	icon = eng_propaganda_campaigns

	# 	ai_will_do = {
	# 		base = 5
	# 		modifier = {
	# 			factor = 2
	# 			has_war = no
	# 		}
	# 	}

	# 	allowed = {
	# 		original_tag = SOV
	# 	}

	# 	available = {
	# 		SOV_propaganda_poster_slot_available = yes
	# 	}

	# 	visible = {
	# 		has_completed_focus = SOV_cult_of_personality_Sonia
	# 	}

	# 	days_remove = 150

	# 	days_re_enable = 90

	# 	cost = 50

	# 	modifier = {
	# 		political_power_factor = 0.07
	# 		command_power_gain_mult = 0.1
	# 		war_support_weekly = 0.002
	# 		communism_drift = 0.1
	# 	}

	# 	complete_effect = {
	# 		set_variable = { SOV_new_propaganda_campaign = 23 }
	# 		SOV_pick_propaganda_campaign_slot_effect = yes
	# 		SOV_achievement_propaganda_counter_effect = yes
	# 		if = {
	# 			limit = { NOT = { has_country_flag = SOV_propaganda_Sonia_a } } 
	# 			set_country_flag = SOV_propaganda_Sonia_a
	# 		}
	# 		else_if = {
	# 			limit = { NOT = { has_country_flag = SOV_propaganda_Sonia_b } } 
	# 			set_country_flag = SOV_propaganda_Sonia_b
	# 		}
	# 		else_if = {
	# 			limit = { NOT = { has_country_flag = SOV_propaganda_Sonia_c } } 
	# 			set_country_flag = SOV_propaganda_Sonia_c
	# 		}
	# 	}

	# 	remove_effect = {
	# 		set_variable = { SOV_propaganda_campaign_to_remove = 23 }
	# 		custom_effect_tooltip = SOV_propaganda_Sonia_tt
	# 		if = {
	# 			limit = {
	# 				has_country_flag = SOV_propaganda_Sonia_a
	# 				NOT = { has_country_leader_with_trait = Sonia_father_of_nations }
	# 			}
	# 			add_country_leader_trait = Sonia_father_of_nations
	# 		}
	# 		if = {
	# 			limit = {
	# 				has_country_flag = SOV_propaganda_Sonia_b
	# 				NOT = { has_country_leader_with_trait = Sonia_great_commander }
	# 			}
	# 			add_country_leader_trait = Sonia_great_commander
	# 		}
	# 		if = {
	# 			limit = {
	# 				has_country_flag = SOV_propaganda_Sonia_c
	# 				NOT = { has_country_leader_with_trait = Sonia_architect_of_communism }
	# 			}
	# 			add_country_leader_trait = Sonia_architect_of_communism
	# 		}
	# 		SOV_reset_propaganda_campaign_slot_effect = yes
	# 		custom_effect_tooltip = SOV_propaganda_campaign_reuse_tt
	# 	}
	# }

	SOV_propaganda_rebuild_to_glory = { # ID = 24
		priority = 23

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 3
			modifier = {
				factor = 100
				has_war = no
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes
		}

		visible = {
			has_completed_focus = SOV_frozen_sprout
		}

		days_remove = 150

		days_re_enable = 90

		cost = 50

		modifier = {
			industry_repair_factor = 0.15
			production_speed_buildings_factor = 0.10
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 24 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 24 }
			SOV_reset_propaganda_campaign_slot_effect = yes
			custom_effect_tooltip = SOV_propaganda_campaign_reuse_tt
		}
	}

	SOV_propaganda_peace = { # ID = 25
		priority = 24

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				any_country = {
					SOV = { is_justifying_wargoal_against = PREV }
				}
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes

			has_war = no
		}

		visible = {
			has_completed_focus = SOV_free_medical_care
		}

		days_remove = 150

		days_re_enable = 90

		cost = 50

		modifier = {
			stability_weekly = 0.005
			consumer_goods_factor = -0.06
			opinion_gain_monthly_factor = 0.25
			enemy_justify_war_goal_time = 0.50
			industrial_capacity_factory = 0.05
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 25 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
			set_rule = { can_send_volunteers = no }

		}

		remove_effect = {
			set_rule = { can_send_volunteers = yes }
			set_variable = { SOV_propaganda_campaign_to_remove = 25 }
			SOV_reset_propaganda_campaign_slot_effect = yes
			custom_effect_tooltip = SOV_propaganda_campaign_reuse_tt
		}
	}

	SOV_propaganda_happy_life = { # ID = 26
		priority = 25

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 3
			modifier = {
				factor = 2
				has_war = no
			}
			modifier = {
				factor = 10
				has_stability < 0.4
			}
			modifier = {
				factor = 10
				has_stability < 0.2
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes

			surrender_progress < 0.01
		}

		visible = {
			has_completed_focus = SOV_free_medical_care
		}

		days_remove = 150

		days_re_enable = 90

		cost = 50

		modifier = {
			stability_weekly = 0.01
			compliance_growth = 0.05
			resistance_decay = 0.05
			resistance_damage_to_garrison = 0.15
			consumer_goods_factor = 0.06
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 26 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 26 }
			SOV_reset_propaganda_campaign_slot_effect = yes
			custom_effect_tooltip = SOV_propaganda_campaign_reuse_tt
		}
	}
}

foreign_influence = {
	SOV_censor_assembly = {
		icon = GFX_decision_generic_arrest
		priority = 99
		visible = { 
			has_idea = SOV_ideological_assembly
			has_country_flag = SOV_censor_assembly_flag
	    }
		available = {
			has_idea = SOV_ideological_assembly
		}
		cost = 50
		days_remove = 30
		modifier = {
			political_power_cost = 0.1
			communism_drift = -0.05
		}
		remove_effect = {
			remove_ideas = SOV_ideological_assembly
			hidden_effect = {
				clr_country_flag = SOV_censor_assembly_flag
			}
		}
	}
}

SOV_dip_agitprop_category = {

	SOV_march_on_Minsk = {
		icon = GFX_decision_generic_civil_support
		allowed = {
			always = no
		}
		visible = {
			NOT = {
				owns_state = 1087
				owns_state = 206
				owns_state = 194
				owns_state = 207
			}
		}
		available = {
			FROM = {
				is_neighbor_of = ROOT
			}
			if = {
				limit = { is_in_faction_with = DVL }
				date > 1942.6.1
			}
		}
		days_remove = 14
		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				FROM = {
					is_in_faction_with = DVL
				}
			}
			modifier = {
				factor = 0
				FROM = {
					tag = GER	
				}
				country_exists = DVL
			}
		}
		cancel_trigger = {
			date < 1942.6.1
			FROM = {
				is_in_faction_with = DVL
			}
		}
		cost = 10
		war_with_target_on_remove = yes
		fire_only_once = yes
		complete_effect = {
			FROM = { country_event = SOV_flavor.30 }
		}
		remove_effect = {
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}

	SOV_down_to_the_Balkans = {
		icon = GFX_decision_generic_civil_support
		visible = {
			is_subject = no
			has_country_flag = SOV_down_to_the_Balkans_flag
		}
		available = {
			ROM = { is_neighbor_of = ROOT }
		}
		cost = 10
		fire_only_once = yes
		days_remove = 14
		war_with_target_on_remove = yes
		complete_effect = {
			ROM = { country_event = SOV_flavor.30 }
		}
		remove_effect = {
			declare_war_on = {
				target = ROM
				type = annex_everything
			}
		}
	}

	SOV_encourage_communist_rallies_in_dec = {
		priority = 1
		allowed = { always = no }
		visible = { 
			FROM = {
				NOT = { has_government = communism }
				exists = yes
		    } 
	    }
		ai_will_do = {
			base = 5
			modifier = {
				factor = 10
				NOT = { has_country_flag = SOV_plague_start }
			}
		}
		available = {  }
		cost = 50
		days_remove = 30
		fire_only_once = yes
		remove_effect = {
			FROM = {
				country_event = SOV_dip.3
				add_timed_idea = {
					idea = SOV_ideological_assembly
					days = 365
				}
			}
		}
	}

	SOV_uphold_dec_national_self_determination = {
		priority = 98
		allowed = { always = no }
		visible = { 
			FROM = {
				NOT = { has_government = communism }
		    } 
	    }
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				FROM = { communism > 0.5 } 
			}
			modifier = {
				add = 100
				FROM = { communism > 0.6 } 
			}
			modifier = {
				add = 1000
				FROM = {
					OR = {
						tag = BAL
						tag = AFG
						tag = TAM
						tag = FIN
					}
				} 
			}
		}
		available = { 
			is_in_faction = yes
			OR = {
				is_faction_leader = yes
				faction_leader = {
					has_government = communism
				}
			}
			FROM = { communism > 0.3 } 
		}
		cost = 50
		days_remove = 21
		fire_only_once = yes
		remove_effect = {
			FROM = { country_event = SOV_dip.4 }
			custom_effect_tooltip = SOV_uphold_dec_national_self_determination_tt
		}
	}

	SOV_liberate_the_people_of_dec = {
		priority = 99
		visible = {
			has_completed_focus = SOV_free_Europe
		}
		target_trigger = {
			FROM = {
				NOT = { is_in_faction_with = ROOT }
				exists = yes
				is_major = yes
				capital_scope = { is_on_continent = europe }
			}
		}
		ai_will_do = {
			base = 0
			modifier = {
				add = 1
				OR = {
					is_neighbor_of = FROM
					any_allied_country = { is_neighbor_of = FROM }
				}
			}
			modifier = {
				factor = 10
				FROM = { is_stronger_than_ROOT_and_not_vulnerable = no }
			}
			modifier = {
				factor = 10
				FROM = { overlord_is_stronger_than_ROOT_and_not_vulnerable = no }
			}
			modifier = {
				factor = 10
				FROM = { faction_leader_is_stronger_than_ROOT_and_not_vulnerable = no }
			}
			modifier = {
				factor = 0
				DVL = {
					AND = {
						exists = yes
						is_major = yes
					}
				}
			}
			modifier = {
				factor = 0
				any_enemy_country = {
					is_major = yes
				}
			}
		}
		available = { 
			is_subject = no
			OR = {
				NOT = { country_exists = DVL }
				DVL = { is_subject = yes }
			}
			date > 1941.1.1
		}
		war_with_target_on_remove = yes
		complete_effect = {
			FROM = { country_event = SOV_flavor.30 }
		}
		cost = 0
		days_remove = 30
		fire_only_once = yes
		remove_effect = {
			declare_war_on = {
				target = FROM
				type = puppet_wargoal_focus
			}
		}
	}

	SOV_exterminate_fascism_in_Europe = {
		icon = GFX_decision_generic_tank
		visible = {
			is_subject = no
			FROM = {
				has_government = fascism
				NOT = { has_war_with = ROOT }
			}
		}
		available = {
			OR = {
				is_neighbor_of = FROM 
				any_allied_country = { is_neighbor_of = FROM }
				any_country = {
					is_in_faction_with = FROM
					is_neighbor_of = ROOT
				}
			}
			NOT = { has_country_flag = SOV_exterminating_fascism_in_Europe }
		}
		ai_will_do = {
			base = 0
			modifier = {
				add = 1
				OR = {
					NOT = { country_exists = DVL }
					DVL = { is_subject = yes }
				}
			}
			modifier = {
				factor = 10
				FROM = { is_stronger_than_ROOT_and_not_vulnerable = no }
			}
			modifier = {
				factor = 0
				any_enemy_country = {
					is_major = yes
				}
			}
		}
		war_with_target_on_remove = yes
		days_remove = 30
		cost = 0
		fire_only_once = yes
		complete_effect = {
			set_country_flag = SOV_exterminating_fascism_in_Europe
			FROM = { country_event = SOV_flavor.30 }
		}
		remove_effect = {
			clr_country_flag = SOV_exterminating_fascism_in_Europe
			declare_war_on = {
				target = FROM
				type = puppet_wargoal_focus
			}
		}
	}
}

SOV_expelling_alien_forces = {

	SOV_dec_contact_major_countries = {
		icon = GFX_decision_generic_nationalism
		allowed = {
			always = no
		}
		visible = {
			is_subject = no
			is_major = yes
			country_exists = FROM
			NOT = {
				has_war_with = FROM
			}
			FROM = { NOT = { is_in_faction_with = DVL } }
		}
		available = {
			is_subject = no
		}
		ai_will_do = {
			base = 50
		}
		cost = 10
		days_remove = 7
		fire_only_once = yes
		remove_effect = {
			FROM = {
				country_event = SOV_dip.17
			}
		}
	}

	SOV_dec_earthlings_embargo_aliens = {
		icon = GFX_decision_generic_political_rally
		priority = 98
		visible = {
			has_idea = SOV_earth_defense_consensus
			NOT = { is_embargoing = FROM }
			if = {
				limit = { is_subject = yes }
				OVERLORD = {
					NOT = {
						tag = DVL
						is_in_faction_with = DVL
						AND = {
							tag = POL
							OR = {
								has_government = fascism
								has_government = neutrality
							}
						}
					}
				}
			}
		}
		available = {
			threat > 0.85
		}
		target_trigger = {
			FROM = {
				is_in_Imperial_Front = yes
			}
		}
		ai_will_do = {
			base = 0.5
			modifier = {
				factor = 10
				DVL = { has_added_tension_amount > 10 }
			}
			modifier = {
				factor = 10
				DVL = { has_added_tension_amount > 50 }
			}
		}
		cost = 0
		fire_only_once = yes
		complete_effect = {
			send_embargo = FROM
			hidden_effect = { 
				activate_targeted_decision = { target = FROM decision = SOV_dec_earthlings_stop_embargo_aliens } 
			}
		}
	}

	SOV_dec_earthlings_stop_embargo_aliens = {
		icon = GFX_decision_generic_break_treaty
		priority = 97
		allowed = {
			always = no
		}
		visible = {
			is_embargoing = FROM 
		}
		available = {
			if = {
				limit = { 
					is_subject = yes 
					OVERLORD = {
						OR = {
							tag = DVL
							is_in_faction_with = DVL
							AND = {
								tag = POL
								OR = {
									has_government = fascism
									has_government = neutrality
								}
							}
						}
					}
				}
				always = yes
			}
			else = {
				threat < 0.5
			}
			NOT = { has_war_with = FROM }
		}
		ai_will_do = {
			base = 0
			modifier = {
				factor = 0
				FROM = { has_wargoal_against = ROOT }
			}
			modifier = {
				add = 20
				has_opinion = {
					target = FROM
					value > 9
				}
				FROM = { has_added_tension_amount < 20 }
			}
			modifier = {
				add = 20
				is_subject = yes
				OVERLORD = {
					NOT = {
						tag = DVL
						is_in_faction_with = DVL
						AND = {
							tag = POL
							OR = {
								has_government = fascism
								has_government = neutrality
							}
						}
					}
				}
			}
		}
		cost = 0
		fire_only_once = yes
		complete_effect = {
			break_embargo = FROM
		}
	}

	SOV_dec_earthlings_contain_aliens = {
		icon = GFX_decision_generic_intelligence_operation
		priority = 97
		visible = {
			has_idea = SOV_earth_defense_consensus
			is_major = yes
			is_subject = no
		}
		available = {
			is_subject = no
			FROM = { has_added_tension_amount > 30 }
			OR = {
				is_neighbor_of = FROM 
				any_allied_country = { is_neighbor_of = FROM }
				any_country = {
					is_in_faction_with = FROM
					is_neighbor_of = ROOT
				}
			}
		}
		target_trigger = {
			FROM = {
				OR = {
					AND = {
						tag = POL
						has_government = fascism
						is_faction_leader = yes
					}
					AND = {
						tag = NPT
						has_government = fascism
						is_faction_leader = yes
					}
				}
			}
		}
		ai_will_do = {
			base = 0
			modifier = {
				add = 1
				NOT = { country_exists = DVL }
			}
			modifier = {
				add = 1
				tag = SOV
				FROM = {
					tag = POL
					has_government = fascism
					NOT = { is_in_faction_with = DVL }
				}
			}
			modifier = {
				factor = 100
				FROM = { is_stronger_than_ROOT_and_not_vulnerable = no }
			}
		}
		days_remove = 30
		cost = 0
		war_with_target_on_remove = yes
		complete_effect = {
			FROM = { country_event = SOV_flavor.30 }
		}
		fire_only_once = yes
		remove_effect = {
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}
	
	SOV_end_of_cooperation_foralien = {
		visible = {
			has_idea = SOV_earth_defense_consensus
			is_major = yes
			is_subject = no
		}
		available = {
			NOT = { country_exists = DVL }
		}
		fire_only_once = yes
		complete_effect = {
			remove_ideas = SOV_earth_defense_consensus
		}
	}
}

SOV_comecon_category = {
	
#领导国决议

	SOV_invite_dec_to_join_comecon = {
		icon = GFX_decision_hol_exchange_intelligence_data
		priority = 98
		visible = {
			has_dynamic_modifier = {
				modifier = SOV_comecon_leader
			}
			FROM = { NOT = { has_country_flag = had_invited_comecon } }
		}
		available = {
			is_subject = no
			FROM = { NOT = { has_country_flag = had_invited_comecon } }
		}
		target_trigger = {
			FROM = {
				NOT = { has_country_flag = had_invited_comecon }
				is_faction_leader = no
				is_in_faction_with = ROOT
				NOT = { has_idea = SOV_comecon_buff }
			}
		}
		days_remove = 7
		ai_will_do = {
			base = 1000
		}
		cancel_trigger = {
			FROM = { has_idea = SOV_comecon_buff }
		}
		cost = 10
		days_re_enable = 30
		fire_only_once = no
		cancel_effect = {
			add_political_power = 10
		}
		remove_effect = {
			FROM = {
				if = {
					limit = { NOT = { has_country_flag = had_invited_comecon } }
					set_country_flag = { flag = had_invited_comecon days = 90 }
				}
				country_event = { id = SOV_cmea.1 days = 2 }
			}
		}
	}

	SOV_invite_dec_to_join_comecon_outside_allies = {
		icon = GFX_decision_hol_exchange_intelligence_data
		priority = 97
		allowed = {
			always = no
		}
		visible = {
			has_dynamic_modifier = {
				modifier = SOV_comecon_leader
			}
			FROM = { 
				NOT = { 
					has_country_flag = had_invited_comecon 
					has_idea = SOV_comecon_buff
				} 
			}
		}
		available = {
			is_subject = no
			FROM = { 
				NOT = { 
					has_country_flag = had_invited_comecon 
					has_idea = SOV_comecon_buff
				} 
			}
		}
		days_remove = 7
		ai_will_do = {
			base = 1000
		}
		cancel_trigger = {
			FROM = { has_idea = SOV_comecon_buff }
		}
		cost = 10
		days_re_enable = 30
		fire_only_once = no
		cancel_effect = {
			add_political_power = 10
		}
		remove_effect = {
			FROM = {
				set_country_flag = { flag = had_invited_comecon days = 90 }
				country_event = { id = SOV_cmea.1 days = 2 }
			}
		}
	}

	SOV_establish_research_organization = {
		priority = 96
		visible = {
			has_dynamic_modifier = {
				modifier = SOV_comecon_leader
			}
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_establish_research_organization_tt
				check_variable = {
					global.num_comecon_member > 4
				}
			}
		}
		days_remove = 14
		ai_will_do = {
			base = 100
		}
		cost = 100
		fire_only_once = yes
		remove_effect = {
			add_research_slot = 1
			add_to_tech_sharing_group = comecon_research_organization
			every_other_country = {
				limit = {
					is_in_faction_with = SOV
					has_idea = SOV_comecon_buff
				}
				add_to_tech_sharing_group = comecon_research_organization
			}
		}
	}

#经济援助
	comecon_apply_for_financial_aid = {
		icon = GFX_decision_ger_mefo_bills
		priority = 12
		visible = {
			OR = {
				has_dynamic_modifier = {
					modifier = SOV_comecon_leader
				}
				has_idea = SOV_comecon_buff
			}
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = comecon_apply_for_financial_aid_tt
				check_variable = {
					ubs_load > 199
				}
			}
			custom_trigger_tooltip = {
				tooltip = comecon_apply_for_financial_ubs_save_tt
				NOT = {
					check_variable = {
						ubs_save > 0
					}
				}
			}
		}
		days_remove = 7
		ai_will_do = {
			base = 1000
		}
		cost = 10
		days_re_enable = 180
		fire_only_once = no
		complete_effect = {
			hidden_effect = {
				set_variable = {
					ROOT.sov_ea = 0
				}
			}
			set_country_flag = comecon_apply_for_financial_aid_flag
			custom_effect_tooltip = effect_apply_for_financial_aid_tt
			activate_mission = comecon_economic_aid_arrives
		}
	}

	comecon_economic_aid_arrives = {
		icon = GFX_decision_ger_mefo_bills
		priority = 11
		activation = {
			always = no
		}
		available = {
			always = no
		}
		fire_only_once = no
		days_mission_timeout = 30
		timeout_effect = {
			hidden_effect = {
				if = {
					limit = {
						check_variable = { ubs_load > ROOT.sov_ea }
					}
					subtract_from_variable = {
						ubs_load = ROOT.sov_ea
					}
				}
				else = {
					subtract_from_variable = {
						ROOT.sov_ea = ubs_load
					}
					set_variable = {
						ubs_load = 0
					}
					add_to_variable = {
						ubs_save = ROOT.sov_ea
					}
				}
				clear_variable = ROOT.sov_ea
				clr_country_flag = comecon_apply_for_financial_aid_flag
			}
			custom_effect_tooltip = comecon_economic_aid_arrives_tt
		}
	}

	comecon_provide_dec_economic_assistance = {
		priority = 10
		visible = {
			OR = {
				has_dynamic_modifier = {
					modifier = SOV_comecon_leader
				}
				has_idea = SOV_comecon_buff
			}
		}
		target_trigger = {
			FROM = {
				NOT = { tag = ROOT }
				has_country_flag = comecon_apply_for_financial_aid_flag
				OR = {
					has_dynamic_modifier = {
						modifier = SOV_comecon_leader
					}
					has_idea = SOV_comecon_buff
				}
			}
		}
		custom_cost_trigger = {
			check_variable = { ubs_save > 50 }
		}
		custom_cost_text = RUS_50_ubs_save_cost
		ai_will_do = {
			base = 0
			modifier = {
				add = 2.5
				check_variable = {
					ubs_save > 100
				}
			}
			modifier = {
				factor = 10
				check_variable = {
					ubs_save > 100
				}
				is_major = yes
			}
		}
		days_re_enable = 90
		fire_only_once = no
		complete_effect = {
			add_to_variable = {
				ubs_save = -50
			}
			FROM = { country_event = SOV_cmea.4 }
			add_political_power = 10
		}
	}

#工业援助

	comecon_learn_production_technology = {
		priority = 8
		icon = GFX_decision_eng_trade_unions_support
		visible = {
			has_idea = SOV_comecon_buff
		}
		custom_cost_trigger = {
			check_variable = { ubs_save > 150 }
		}
		custom_cost_text = RUS_150_ubs_save_cost
		days_remove = 90
		ai_will_do = {
			base = 10
		}
		days_re_enable = 30
		fire_only_once = no
		complete_effect = {
			add_to_variable = {
				ubs_save = -150
			}
		}
		remove_effect = {
			add_tech_bonus = {
				name = comecon_learn_production_technology
				bonus = 0.25
				uses = 1
				category = industry
			}
		}
	}

	comecon_development_fund = {
		icon = GFX_decision_generic_fundraising
		priority = 7
		visible = {
			has_idea = SOV_comecon_buff
			industrial_complex < 25
		}
		cost = 10
		ai_will_do = {
			base = 100
		}
		days_re_enable = 180
		fire_only_once = no
		complete_effect = {
			add_to_variable = {
				ubs_save = 200
			}
			custom_effect_tooltip = comecon_development_fund_tt
		}
	}

#武器装备采购

	comecon_purchase_infantry_equipment = {

		priority = 6

		icon = generic_industry

		visible = {
			has_idea = SOV_comecon_buff
		}

		available = {
			NOT = { has_country_flag = comecon_purchasing_infantry_equipment_flag }
			NOT = { has_war_with = SOV }
			NOT = { is_justifying_wargoal_against = SOV }
		}

		custom_cost_trigger = {
			check_variable = { ubs_save > 50 }
		}
		custom_cost_text = RUS_50_ubs_save_cost
		cancel_if_not_visible = yes

		days_remove = 90
		days_re_enable = 30
		fire_only_once = no

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					num_of_civilian_factories < 2
					has_equipment = {
						infantry_equipment > 500
					}
				}
			}
		}
		modifier = {
			civilian_factory_use = 1
		}
		
		complete_effect = {
			set_country_flag = comecon_purchasing_infantry_equipment_flag
			SOV = {
				add_offsite_building = {
					type = industrial_complex
					level = 1
				}
			}
			hidden_effect = {
				add_to_variable = {
					ubs_save = -50
				}
			}
		}
		cancel_effect = {
			SOV = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
			}
			clear_variable = comecon_vehicle_type
			clr_country_flag = comecon_purchasing_infantry_equipment_flag
		}
		remove_effect = {
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 1500
				producer = SOV
			}
			SOV = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
			}
			clr_country_flag = comecon_purchasing_infantry_equipment_flag
		}
	}

	comecon_purchase_artillery = {

		priority = 5

		icon = ger_military_buildup

		visible = {
			has_idea = SOV_comecon_buff
		}	
		
		available = {
			has_tech = gw_artillery
			NOT = { has_country_flag = comecon_purchasing_artillery_flag }
			NOT = { has_war_with = SOV }
			NOT = { is_justifying_wargoal_against = SOV }
		}

		custom_cost_trigger = {
			check_variable = { ubs_save > 50 }
		}
		custom_cost_text = RUS_50_ubs_save_cost
		cancel_if_not_visible = yes

		days_remove = 90
		days_re_enable = 30
		fire_only_once = no

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					num_of_civilian_factories < 2
					AND = {
						has_equipment = {
							artillery_equipment > 10
						}
						if = {
							limit = {
								has_tech = interwar_antiair
							}
							has_equipment = {
								anti_air_equipment > 10
							}
						}
						if = {
							limit = {
								has_tech = interwar_antitank
							}
							has_equipment = {
								anti_tank_equipment > 10
							}
						}
					}
				}
			}
		}

		modifier = {
			civilian_factory_use = 1
		}
		
		complete_effect = {
			hidden_effect = {
				add_to_variable = {
					ubs_save = -50
				}
			}
			set_country_flag = comecon_purchasing_artillery_flag
			hidden_effect = {
				country_event = SOV_cmea.5
			}

			SOV = {
				add_offsite_building = {
					type = industrial_complex
					level = 1
				}

			}
			custom_effect_tooltip = comecon_purchase_artillery_tt
		}
		cancel_effect = {
			SOV = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
			}
			clear_variable = comecon_vehicle_type
			clr_country_flag = comecon_purchasing_artillery_flag
		}
		remove_effect = {
			add_equipment_to_stockpile = {
				type = var:comecon_artillery_type
				amount = 200
				producer = SOV
			}
			SOV = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
			}
			clear_variable = comecon_artillery_type
			clr_country_flag = comecon_purchasing_artillery_flag
		}
	}

	comecon_purchase_military_vehicles = {

		priority = 4

		icon = generic_decision

		visible = {
			has_idea = SOV_comecon_buff
		}		

		available = {
			has_tech = motorised_infantry
			NOT = { has_country_flag = comecon_purchasing_military_vehicles_flag }
			NOT = { has_war_with = SOV }
			NOT = { is_justifying_wargoal_against = SOV }
		}

		custom_cost_trigger = {
			check_variable = { ubs_save > 50 }
		}
		custom_cost_text = RUS_50_ubs_save_cost
		cancel_if_not_visible = yes

		days_remove = 90
		days_re_enable = 30
		fire_only_once = no

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					num_of_civilian_factories < 2
					AND = {
						has_equipment = {
							mechanized_equipment > 10
						}
						if = {
							limit = {
								has_tech = mechanised_infantry
							}
							has_equipment = {
								mechanized_equipment > 10
							}
						}
					}
				}
			}
		}

		modifier = {
			civilian_factory_use = 1
		}
		
		complete_effect = {
			set_country_flag = comecon_purchasing_military_vehicles_flag
			hidden_effect = {
				set_variable = { comecon_military_vehicles_seller = SOV }
				country_event = SOV_cmea.6
			}
			FROM = {
				add_offsite_building = {
					type = industrial_complex
					level = 1
				}
			}
			hidden_effect = {
				add_to_variable = {
					ubs_save = -50
				}
			}
			custom_effect_tooltip = comecon_purchase_vehicles_tt
		}
		cancel_effect = {
			FROM = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
			}
			clear_variable = comecon_vehicle_type
			clr_country_flag = comecon_purchasing_military_vehicles_flag
			clr_country_flag = comecon_producing_motorized_for_member_flag
			clr_country_flag = comecon_producing_mechanized_for_member_flag
		}
		remove_effect = {
			if = {
				limit = {
					has_country_flag = comecon_producing_motorized_for_member_flag
				}
				add_equipment_to_stockpile = {
					type = motorized_equipment
					amount = 200
					producer = FROM
				}
				clr_country_flag = comecon_producing_motorized_for_member_flag
			}
			else_if = {
				limit = {
					has_country_flag = comecon_producing_mechanized_for_member_flag
				}
				add_equipment_to_stockpile = {
					type = mechanized_equipment
					amount = 100
					producer = FROM
				}
				clr_country_flag = comecon_producing_mechanized_for_member_flag
			}
			FROM = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
			}
			clear_variable = comecon_vehicle_type
			clr_country_flag = comecon_purchasing_military_vehicles_flag
		}
	}

	comecon_purchase_armor = {

		priority = 3

		icon = generic_tank

		visible = {
			has_idea = SOV_comecon_buff
		}

		available = {
			has_tech = gwtank_chassis 
			NOT = { has_country_flag = comecon_purchasing_armor_flag }
			NOT = { has_war_with = SOV }
			NOT = { is_justifying_wargoal_against = SOV }
		}

		custom_cost_trigger = {
			check_variable = { ubs_save > 50 }
		}
		custom_cost_text = RUS_50_ubs_save_cost
		cancel_if_not_visible = yes

		days_remove = 90
		days_re_enable = 30
		fire_only_once = no

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					num_of_civilian_factories < 2
					AND = {
						has_equipment = {
							light_tank_chassis > 10
						}
						has_equipment = {
							medium_tank_chassis > 10
						}
					}
				}
			}
		}

		modifier = {
			civilian_factory_use = 1
		}
		
		complete_effect = {
			set_country_flag = comecon_purchasing_armor_flag
			hidden_effect = {
				country_event = SOV_cmea.7
			}
			SOV = {
				add_offsite_building = {
					type = industrial_complex
					level = 1
				}
			}
			hidden_effect = {
				add_to_variable = {
					ubs_save = -50
				}
			}
			custom_effect_tooltip = comecon_purchase_armor_tt
		}
		cancel_effect = {
			SOV = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
			}
			clear_variable = comecon_vehicle_type
			clr_country_flag = comecon_purchasing_armor_flag
			clr_country_flag = comecon_producing_light_armor_for_member_flag
			clr_country_flag = comecon_producing_medium_armor_for_member_flag
		}
		remove_effect = {
			if = {
				limit = {
					has_country_flag = comecon_producing_light_armor_for_member_flag
				}
				add_equipment_to_stockpile = {
					type = var:comecon_armor_type
					amount = 80
					producer = SOV
				}
				clr_country_flag = comecon_producing_light_armor_for_member_flag 
			}
			else_if = {
				limit = {
					has_country_flag = comecon_producing_medium_armor_for_member_flag 
				}
				add_equipment_to_stockpile = {
					type = var:comecon_armor_type
					amount = 40
					producer = SOV
				}
				clr_country_flag = comecon_producing_medium_armor_for_member_flag 
			}
			SOV = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
			}
			clear_variable = comecon_vehicle_type
			clr_country_flag = comecon_purchasing_armor_flag
		}
	}

	comecon_purchase_aircraft = {

		priority = 2

		icon = generic_air

		visible = {
			has_idea = SOV_comecon_buff
		}

		available = {
			OR = { 
				has_tech = early_fighter 
				has_tech = iw_small_airframe 
			}
			NOT = { has_country_flag = comecon_purchasing_aircraft_flag }
			NOT = { has_war_with = SOV }
			NOT = { is_justifying_wargoal_against = SOV }
		}

		custom_cost_trigger = {
			check_variable = { ubs_save > 50 }
		}
		custom_cost_text = RUS_50_ubs_save_cost
		cancel_if_not_visible = yes

		days_remove = 90
		days_re_enable = 30
		fire_only_once = no

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					num_of_civilian_factories < 2
					AND = {
						stockpile_ratio = { 
							archetype = small_plane_airframe
							ratio > 0.75
						}
						stockpile_ratio = { 
							archetype = small_plane_naval_bomber_airframe
							ratio > 0.75
						}
						stockpile_ratio = { 
							archetype = medium_plane_airframe
							ratio > 0.75
						}
					}
				}
			}
		}

		modifier = {
			civilian_factory_use = 1
		}
		
		complete_effect = {
			set_country_flag = comecon_purchasing_aircraft_flag
			hidden_effect = {
				country_event = SOV_cmea.8
			}
			SOV = {
				add_offsite_building = {
					type = industrial_complex
					level = 1
				}

			}
			hidden_effect = {
				add_to_variable = {
					ubs_save = -50
				}
			}
			custom_effect_tooltip = comecon_purchase_aircraft_tt
		}
		cancel_effect = {
			SOV = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
			}
			clear_variable = comecon_vehicle_type
			clr_country_flag = comecon_purchasing_aircraft_flag
			clr_country_flag = comecon_producing_fighters_for_member_flag
			clr_country_flag = comecon_producing_naval_bombers_for_member_flag
			clr_country_flag = comecon_producing_tactical_bombers_for_member_flag
		}
		remove_effect = {
			if = {
				limit = {
					has_country_flag = comecon_producing_fighters_for_member_flag
				}
				effect_tooltip = {
					add_equipment_to_stockpile = {
						type = small_plane_airframe_1
						amount = 80
						version_name = "SU I-21F trade"
						producer = SOV
					}
				}
				clr_country_flag = comecon_producing_fighters_for_member_flag
			}
			else_if = {
				limit = {
					has_country_flag = comecon_producing_naval_bombers_for_member_flag
				}
				add_equipment_to_stockpile = {
					type = small_plane_naval_bomber_airframe_1
					amount = 80
					version_name = "SU I-21N trade"
					producer = SOV
				}
				clr_country_flag = comecon_producing_naval_bombers_for_member_flag
			}
			else = {
				add_equipment_to_stockpile = {
					type = medium_plane_airframe_1
					amount = 80
					version_name = "SU ANT-40 trade"
					producer = SOV
				}
				clr_country_flag = comecon_producing_tactical_bombers_for_member_flag
			}
			SOV = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
			}
			clear_variable = comecon_vehicle_type
			clr_country_flag = comecon_purchasing_aircraft_flag
		}
	}

	comecon_purchase_ships = {

		priority = 1

		icon = GFX_decision_generic_naval

		visible = {
			has_idea = SOV_comecon_buff
		}

		available = {
			OR = {
				has_tech = early_ship_hull_submarine
				has_tech = early_ship_hull_light
				has_tech = early_ship_hull_cruiser
			}
			NOT = { has_country_flag = comecon_producing_bulgarian_ships_flag }
			NOT = { has_country_flag = comecon_ships_purchase_rejected_flag }
			NOT = { has_war_with = SOV }
			NOT = { is_justifying_wargoal_against = SOV }

		}
		cancel_if_not_visible = yes

		cancel_effect = {
			SOV = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
				clr_country_flag = comecon_producing_bulgarian_ships_flag
			}
			hidden_effect = {
				if = {
					limit = {
						OR = {
							has_country_flag = comecon_building_submarines_flag
							has_country_flag = comecon_building_destroyers_flag
							has_country_flag = comecon_building_light_cruiser_flag
						}
					}
					country_event = SOV_cmea.11
					clr_country_flag = comecon_building_submarines_flag
					clr_country_flag = comecon_building_destroyers_flag
					clr_country_flag = comecon_building_light_cruiser_flag
				}
			}
		}

		custom_cost_trigger = {
			check_variable = { ubs_save > 100 }
		}
		custom_cost_text = RUS_100_ubs_save_cost

		days_remove = 90
		days_re_enable = 30
		fire_only_once = no

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				num_of_naval_factories < 2
			}
			modifier = {
				factor = 0.001
				num_of_naval_factories < 2
				num_of_civilian_factories < 16
			}
		}
		modifier = {
			civilian_factory_use = 1
		}
		
		complete_effect = {
			SOV = {
				set_country_flag = comecon_producing_bulgarian_ships_flag
				add_offsite_building = {
					type = industrial_complex
					level = 1
				}
				country_event = { id = SOV_cmea.9 hours = 1 }
			}
			hidden_effect = {
				add_to_variable = {
					ubs_save = -100
				}
			}
		}

		remove_effect = {
			SOV = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
				clr_country_flag = comecon_producing_bulgarian_ships_flag
			}
			if = {
				limit = {
					has_country_flag = comecon_building_submarines_flag
				}
				hidden_effect = {
					country_event = SOV_cmea.12
				}
				custom_effect_tooltip = comecon_purchase_ships_submarines_tt
				clr_country_flag = comecon_building_submarines_flag
			}
			else_if = {
				limit = {
					has_country_flag = comecon_building_destroyers_flag
				}
				hidden_effect = {
					country_event = SOV_cmea.13
				}
				custom_effect_tooltip = comecon_purchase_ships_destroyers_tt
				clr_country_flag = comecon_building_destroyers_flag
			}
			else_if = {
				limit = {
					has_country_flag = comecon_building_light_cruiser_flag
				}
				hidden_effect = {
					country_event = SOV_cmea.14
				}
				custom_effect_tooltip = comecon_purchase_ships_light_cruiser_tt
				clr_country_flag = comecon_building_light_cruiser_flag
			}
			else = {
				custom_effect_tooltip = comecon_purchase_ships_undetermined_tt
			}
		}
	}
}

The_comintern_international_aid_category = {
	
	SOV_red_army_met_in_central_europe = {
		icon = GFX_decision_SOV_secure_the_administration
		allowed = {
			original_tag = SOV
		}
		visible = {
			is_subject = no
			has_government = communism
			any_country = {
				is_in_third_international = yes
				any_controlled_state = { 
					any_neighbor_state = { 
						is_controlled_by = FROM
					}
				}
			}
		}
		ai_will_do = {
			base = 1000
		}
		available = {
			
		}
		target_trigger = {
			FROM = {
				is_in_third_international_westline = yes
				has_government = communism
				NOT = { has_war_with = ROOT }
			}
		}
		cost = 0
		fire_only_once = yes
		complete_effect = {
			country_event = { days = 1 id = SOV_news.4 }
			SOV = { add_to_faction = FROM }
		}
	}

	SOV_aid_dec_western_front = {
		icon = GFX_decision_generic_industry
		allowed = {
			original_tag = SOV
		}
		visible = {
			FROM = { NOT = { has_war_with = ROOT } }
			has_government = communism
			FROM = { 
				NOT = { is_in_faction_with = SOV } 
				exists = yes
				is_subject = no
			}
		}
		available = {
			has_equipment = {
				infantry_equipment > 2499
			}
			has_equipment = {
				artillery_equipment > 299
			}
		}
		ai_will_do = {
			base = 0
			modifier = {
				add = 1.0
				OR = {
					check_variable = {
						FROM.num_equipment@infantry_equipment < 0
					}
					check_variable = {
						FROM.num_equipment@artillery_equipment < 0
					}
				}
			}
			modifier = {
				add = 0.5
				FROM = {
					has_war = yes
				}
			}
			modifier = {
				factor = 100
				has_equipment = {
					infantry_equipment > 5000
				}
				has_equipment = {
					artillery_equipment > 500
				}
			}
		}
		cost = 10
		fire_only_once = no
		days_re_enable = 90
		days_remove = 30
		remove_effect = {
			FROM = { country_event = SOV_dip.23 }
			effect_tooltip = {
				send_equipment = {
					amount = 2500
					type = infantry_equipment
					target = FROM
				}
				send_equipment = {
					amount = 300
					target = FROM
					type = artillery_equipment
				}	
			}
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -2500
				}
				add_equipment_to_stockpile = {
					type = artillery_equipment
					amount = -300
				}
			}
		}
	}

	balkan_Sovit_aid_civil_plant_construction = {
		icon = GFX_decision_generic_factory
		visible = {
			has_country_flag = balkan_Sovit_affect_Tekkadan_flag
		}
		days_re_enable = 60
		days_remove = 180
		ai_will_do = {
			base = 10
			modifier = {
				factor = 10
				has_government = communism
			}
		}
		cost = 15
		modifier = {
			communism_drift = 0.05
		}
		remove_effect = {
			random_owned_controlled_state = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}

	balkan_Call_for_gun_assistance = {
		icon = GFX_decision_generic_industry
		visible = {
			has_country_flag = balkan_Sovit_affect_Tekkadan_flag
		}
		days_re_enable = 60
		days_remove = 180
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				AND = {
					has_equipment = {
						infantry_equipment_0 < 10
					}
					has_equipment = {
						infantry_equipment_1 < 10
					}
					has_equipment = {
						infantry_equipment_2 < 10
					}
				}
			}
			modifier = {
				factor = 10
				has_war = yes
			}
		}
		cost = 15
		modifier = {
			communism_drift = 0.05
		}
		remove_effect = {
			add_equipment_to_stockpile = {
				type = infantry_equipment_1
				amount = 2500
				producer = SOV
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment_1
				amount = 300
				producer = SOV
			}
		}
	}

	balkan_Asking_to_intervene = {
		icon = GFX_decision_generic_break_treaty
		visible = {
			tag = ROM
			has_country_flag = balkan_Sovit_affect_Tekkadan_flag
			has_government = communism
		}
		available = {
			surrender_progress > 0.5
		}
		ai_will_do = {
			base = 0
			modifier = {
				add = 100
				surrender_progress > 0.9
			}
		}
		cost = 50
		days_remove = 14
		fire_only_once = yes
		remove_effect = {
			SOV = { country_event = SOV_dip.27 }
			effect_tooltip = {
				SOV = { transfer_state = 78 }
			}
			add_popularity = {
				ideology = communism
				popularity = 0.1
			}
		}
	}
}

SOV_special_technology_research_department = {

}

SOV_operation_forgotten_cards_category = {

	SOV_forgotten_cards_will_attack = {
		priority = 100
		icon = GFX_decision_revolt
		allowed = {
			always = no 
		}
		activation = {   
			has_country_flag = SOV_forgotten_cards_start
		}    
		available = {
			always = no
		}   
		days_mission_timeout = 120
		is_good = no
		fire_only_once = yes
		timeout_effect = {    
			set_country_flag = SOV_forgotten_cards_end
			country_event = SOV_pol.8
	    }
	}

	SOV_opposition_is_on_the_move_for_forgotten_cards = {
		priority = 99
		activation = {   
			always = no     
		}    
		available = {
			always = no
		}   
		cancel_trigger = {
			has_country_flag = SOV_forgotten_cards_end
		}
		days_mission_timeout = 25
		is_good = no
		fire_only_once = no
		timeout_effect = {    
			hidden_effect = {
				if = {
					limit = { has_country_flag = SOV_forgotten_cards_start }
					activate_mission = SOV_opposition_is_on_the_move_for_forgotten_cards
				}
			}  
			random_list = {
				25 = {
					add_to_variable = { SOV_minority_for_FC = 4 }
					custom_effect_tooltip = SOV_opposition_for_FC_25_tooltip 
				}
				30 = {
					add_to_variable = { SOV_minority_for_FC = 3 }
					custom_effect_tooltip = SOV_opposition_for_FC_30_tooltip 
				}
				45 = {
					add_to_variable = { SOV_minority_for_FC = 2 }
					custom_effect_tooltip = SOV_opposition_for_FC_45_tooltip 
				}
			}
	    }
	}

	SOV_emergency_repair_communication = {
		icon = GFX_decision_generic_merge_plant_materiel
		visible = { 
			has_active_mission = SOV_forgotten_cards_will_attack
			has_country_flag = SOV_Sakura_forgotten_cards_start
	    }
		available = {
			NOT = { has_country_flag = SOV_doing_FC_work }
		}
		cancel_trigger = {
			has_country_flag = SOV_forgotten_cards_end
		}
		cancel_if_not_visible = yes
		cost = 5
		fire_only_once = no
		ai_will_do = {
			base = 1000
		}
		days_re_enable = 25
		days_remove = 7
		complete_effect = {
			set_country_flag = SOV_doing_FC_work
		}
		remove_effect = {
			clr_country_flag = SOV_doing_FC_work
			add_to_variable = { SOV_Sakura_for_FC = 2 }
			custom_effect_tooltip = SOV_Sakura_for_FC_45_tooltip 
		}
	}

	SOV_preset_ceremony_venue = {
		icon = GFX_decision_generic_prepare_civil_war
		visible = { 
			has_active_mission = SOV_forgotten_cards_will_attack
			has_country_flag = SOV_Sakura_forgotten_cards_start
	    }
		available = {
			NOT = { has_country_flag = SOV_doing_FC_work }
		}
		cancel_trigger = {
			has_country_flag = SOV_forgotten_cards_end
		}
		cost = 5
		fire_only_once = no
		ai_will_do = {
			base = 100
		}
		days_re_enable = 25
		days_remove = 14
		complete_effect = {
			set_country_flag = SOV_doing_FC_work
		}
		remove_effect = {
			clr_country_flag = SOV_doing_FC_work
			add_to_variable = { SOV_Sakura_for_FC = 3 }
			custom_effect_tooltip = SOV_Sakura_for_FC_30_tooltip 
		}
	}

	SOV_store_magic = {
		icon = GFX_decision_generic_research
		visible = { 
			has_active_mission = SOV_forgotten_cards_will_attack
			has_country_flag = SOV_Sakura_forgotten_cards_start
	    }
		available = {
			NOT = { has_country_flag = SOV_doing_FC_work }
		}
		cancel_trigger = {
			has_country_flag = SOV_forgotten_cards_end
		}
		cost = 5
		fire_only_once = no
		ai_will_do = {
			base = 100
		}
		days_re_enable = 25
		days_remove = 21
		complete_effect = {
			set_country_flag = SOV_doing_FC_work
		}
		remove_effect = {
			clr_country_flag = SOV_doing_FC_work
			add_to_variable = { SOV_Sakura_for_FC = 4 }
			custom_effect_tooltip = SOV_Sakura_for_FC_25_tooltip 
		}
	}

	SOV_Sakura_is_on_the_move_for_forgotten_cards = {
		priority = 99
		activation = {   
			always = no     
		}    
		available = {
			always = no
		}   
		cancel_trigger = {
			has_country_flag = SOV_forgotten_cards_end
		}
		days_mission_timeout = 20
		is_good = no
		fire_only_once = no
		timeout_effect = {    
			hidden_effect = {
				if = {
					limit = { has_country_flag = SOV_forgotten_cards_start }
					activate_mission = SOV_Sakura_is_on_the_move_for_forgotten_cards
				}
			}  
			random_list = {
				15 = {
					add_to_variable = { SOV_Sakura_for_FC = 4 }
					custom_effect_tooltip = SOV_Sakura_for_FC_25_tooltip 
				}
				20 = {
					add_to_variable = { SOV_Sakura_for_FC = 3 }
					custom_effect_tooltip = SOV_Sakura_for_FC_30_tooltip 
				}
				65 = {
					add_to_variable = { SOV_Sakura_for_FC = 2 }
					custom_effect_tooltip = SOV_Sakura_for_FC_45_tooltip 
				}
			}
	    }
	}

	SOV_install_trusted_personnel = {
		icon = GFX_decision_generic_political_discourse
		visible = { 
			has_active_mission = SOV_forgotten_cards_will_attack
			has_country_flag = SOV_opposition_forgotten_cards_start
	    }
		available = {
			NOT = { has_country_flag = SOV_doing_FC_work }
		}
		cancel_trigger = {
			has_country_flag = SOV_forgotten_cards_end
		}
		cost = 5
		fire_only_once = no
		ai_will_do = {
			base = 100
		}
		days_re_enable = 20
		days_remove = 7
		complete_effect = {
			set_country_flag = SOV_doing_FC_work
		}
		remove_effect = {
			clr_country_flag = SOV_doing_FC_work
			add_to_variable = { SOV_minority_for_FC = 2 }
			custom_effect_tooltip = SOV_opposition_for_FC_45_tooltip 
		}
	}

	SOV_summon_the_enchanters = {
		icon = GFX_decision_generic_military
		visible = { 
			has_active_mission = SOV_forgotten_cards_will_attack
			has_country_flag = SOV_opposition_forgotten_cards_start
	    }
		available = {
			NOT = { has_country_flag = SOV_doing_FC_work }
		}
		cancel_trigger = {
			has_country_flag = SOV_forgotten_cards_end
		}
		cost = 5
		fire_only_once = no
		ai_will_do = {
			base = 100
		}
		days_re_enable = 25
		days_remove = 14
		complete_effect = {
			set_country_flag = SOV_doing_FC_work
		}
		remove_effect = {
			clr_country_flag = SOV_doing_FC_work
			add_to_variable = { SOV_minority_for_FC = 3 }
			custom_effect_tooltip = SOV_opposition_for_FC_30_tooltip 
		}
	}

	SOV_lay_magic_trap = {
		icon = GFX_decision_generic_intelligence_operation
		visible = { 
			has_active_mission = SOV_forgotten_cards_will_attack
			has_country_flag = SOV_opposition_forgotten_cards_start
	    }
		available = {
			NOT = { has_country_flag = SOV_doing_FC_work }
		}
		cancel_trigger = {
			has_country_flag = SOV_forgotten_cards_end
		}
		cost = 5
		fire_only_once = no
		ai_will_do = {
			base = 100
		}
		days_re_enable = 25
		days_remove = 21
		complete_effect = {
			set_country_flag = SOV_doing_FC_work
		}
		remove_effect = {
			clr_country_flag = SOV_doing_FC_work
			add_to_variable = { SOV_minority_for_FC = 4 }
			custom_effect_tooltip = SOV_opposition_for_FC_25_tooltip 
		}
	}
}

#小樱的衣柜
SOV_Sakura_clothes = {
	Sakura_clothes_1 = {
		allowed = {
		}
		visible = {
		}
		available = {
		}
		cost = 0
		ai_will_do = {
			factor = 100
		}
		complete_effect = {
			custom_effect_tooltip = SOV_Sakura_01
			set_portraits = {
				character = SOV_Sakura
				civilian = {
					large = "gfx/leaders/SOV/SOV_Sakura_01.dds"
				}
			}
		}
	}
	Sakura_clothes_2 = {
		allowed = {
		}
		visible = {
		}
		available = {
		}
		cost = 0
		ai_will_do = {
			factor = 100
		}
		complete_effect = {
			custom_effect_tooltip = SOV_Sakura_02
			set_portraits = {
				character = SOV_Sakura
				civilian = {
					large = "gfx/leaders/SOV/SOV_Sakura_02.dds"
				}
			}
		}
	}
	Sakura_clothes_3 = {
		allowed = {
		}
		visible = {
		}
		available = {
		}
		cost = 0
		ai_will_do = {
			factor = 100
		}
		complete_effect = {
			custom_effect_tooltip = SOV_Sakura_03
			set_portraits = {
				character = SOV_Sakura
				civilian = {
					large = "gfx/leaders/SOV/SOV_Sakura_03.dds"
				}
			}
		}
	}
	Sakura_clothes_4 = {
		allowed = {
		}
		visible = {
		}
		available = {
		}
		cost = 0
		ai_will_do = {
			factor = 100
		}
		complete_effect = {
			custom_effect_tooltip = SOV_Sakura_04
			set_portraits = {
				character = SOV_Sakura
				civilian = {
					large = "gfx/leaders/SOV/SOV_Sakura_04.dds"
				}
			}
		}
	}
	Sakura_clothes_5 = {
		allowed = {
		}
		visible = {
		}
		available = {
		}
		cost = 0
		ai_will_do = {
			factor = 100
		}
		complete_effect = {
			custom_effect_tooltip = SOV_Sakura_05
			set_portraits = {
				character = SOV_Sakura
				civilian = {
					large = "gfx/leaders/SOV/SOV_Sakura_05.dds"
				}
			}
		}
	}
	Sakura_clothes_6 = {
		allowed = {
		}
		visible = {
		}
		available = {
		}
		cost = 0
		ai_will_do = {
			factor = 100
		}
		complete_effect = {
			custom_effect_tooltip = SOV_Sakura_06
			set_portraits = {
				character = SOV_Sakura
				civilian = {
					large = "gfx/leaders/SOV/SOV_Sakura_06.dds"
				}
			}
		}
	}
	Sakura_clothes_7 = {
		allowed = {
		}
		visible = {
		}
		available = {
		}
		cost = 0
		ai_will_do = {
			factor = 100
		}
		complete_effect = {
			custom_effect_tooltip = SOV_Sakura_07
			set_portraits = {
				character = SOV_Sakura
				civilian = {
					large = "gfx/leaders/SOV/SOV_Sakura_07.dds"
				}
			}
		}
	}
	Sakura_clothes_8 = {
		allowed = {
		}
		visible = {
		}
		available = {
		}
		cost = 0
		ai_will_do = {
			factor = 100
		}
		complete_effect = {
			custom_effect_tooltip = SOV_Sakura_08
			set_portraits = {
				character = SOV_Sakura
				civilian = {
					large = "gfx/leaders/SOV/SOV_Sakura_08.dds"
				}
			}
		}
	}
}

SOV_war_against_Soviet_category = {
	SOV_collapse_of_Soviet = {
		icon = GFX_decision_revolt
		activation = {
			SOV = {
				is_faction_leader = yes
				has_government = communism
				is_subject = no
				surrender_progress > 0.75
				owns_state = 219
				owns_state = 195
				owns_state = 217
				NOT = {
					any_enemy_country = {
						AND = {
							capital_scope = {
								OR = {
									is_on_continent = asia
									is_on_continent = india
									is_on_continent = australia
								}
							}
							is_major = yes
							is_subject = no
						}
					}
				}
				NOT = {
					has_country_flag = SOV_special_operation_failure_flag
				}
				NOT = {
					controls_state = 219
				}
				NOT = {
					controls_state = 195
				}
				NOT = {
					controls_state = 217
				}
			}
		}
		available = {
			SOV = {
				OR = {
					controls_state = 219
					controls_state = 195
					controls_state = 217
					any_enemy_country = {
						AND = {
							capital_scope = {
								OR = {
									is_on_continent = asia
									is_on_continent = india
									is_on_continent = australia
								}
							}
							is_major = yes
							is_subject = no
						}
					}
				}
			}
		}
		days_mission_timeout = 90
		fire_only_once = no
		timeout_effect = {
			effect_tooltip = {
				SOV = {
					country_event = SOV_end.1
				}
			}
			hidden_effect = {
				if = {
					limit = {
						tag = SOV
					}
					country_event = SOV_end.1
				}
			}
		}
	}
}

SOV_World_Soviets = {
	SOV_Build_World_Soviets = {
		allowed = {
		}
		visible = { is_ai = no }
		available = {
			has_government = communism
			is_faction_leader = yes
			all_country = { is_in_faction_with = ROOT }
		}
		fire_only_once = yes
		cost = 0
		ai_will_do = {
			factor = 0
		}
		complete_effect = {
			add_research_slot = 1
			set_cosmetic_tag = World_Soviets
			every_country = {
				every_character = { set_nationality = ROOT }
				ROOT = { annex_country = { target = PREV transfer_troops = yes } }
			}
			set_faction_name = Gaia_Community
			every_state = {
				limit = {
					NOT = {
						is_core_of = ROOT
					}
				}
				add_core_of_ROOT = yes
			}
			hidden_effect = {
				news_event = {
					id = SOV_news.9
				}
			}
		}
	}
}

Reunit_Russia_decision_cate = {
	Reunit_Russia_decision = {
		allowed = {
			is_russia_uniter_tag = yes
			NOT = {
				or = {
					tag = SOV
					tag = UKR
				}
			}
		}
		visible = {
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = control_all_russia_state
				NOT = {
					any_state = {
						has_state_flag = is_RUS_state_area
						NOT = { is_controlled_by = ROOT }
					}
				}
			}
			has_war = no
		}
		fire_only_once = yes
		cost = 0
		ai_will_do = {
			factor = 100
		}
		complete_effect = {
			if = {
				limit = { has_government = communism }
				set_cosmetic_tag = Soviet_Russian
			}
			else = {
				set_cosmetic_tag = Russian
				if = {
					limit = { controlled_states = 195 }
					set_province_name = {
						id = 6174
						name = "彼得格勒"
					}
					195 = { set_state_name = "彼得格勒" }
				}
				if = {
					limit = { controlled_states = 217 }
					set_province_name = {
						id = 3529
						name = "察里津"
					}
					217 = { set_state_name = "察里津" }
				}
			}
			if = {
				limit = { amount_research_slots < 4 }
				set_research_slots = 4
			}
			every_controlled_state = {
				limit = { has_state_flag = is_RUS_state_area }
				add_core_of_ROOT = yes
			}
			every_state = {
				limit = {
					has_state_flag = is_RUS_state_area
					NOT = {
						or = {
							is_core_of = ROOT
							is_claimed_by = ROOT
						}
					}
				}
				add_claim_by = ROOT
			}
			set_country_flag = Reunit_Russia_country
			if = {
				limit = { controlled_states = 219 }
				set_capital = {
					state = 219
					remember_old_capital = no
				}
			}
		}
	}
	Rebuild_CCCP_decision = {
		allowed = {
			is_russia_uniter_tag = yes
			NOT = {
				or = {
					tag = SOV
					tag = UKR
				}
			}
		}
		visible = { has_government = communism }
		available = {
			custom_trigger_tooltip = {
				tooltip = control_all_russia_state
				NOT = {
					any_state = {
						has_state_flag = is_RUS_state_area
						NOT = { is_controlled_by = ROOT }
					}
				}
			}
			count_triggers = {
				amount = 5
				custom_trigger_tooltip = {
					tooltip = control_all_UKR_state
					NOT = {
						any_state = {
							has_state_flag = is_UKR_state_area
							NOT = { is_controlled_by = ROOT }
						}
					}
				}
				custom_trigger_tooltip = {
					tooltip = control_all_BLR_state
					NOT = {
						any_state = {
							has_state_flag = is_BLR_state_area
							NOT = { is_controlled_by = ROOT }
						}
					}
				}
				custom_trigger_tooltip = {
					tooltip = control_all_TAM_state
					NOT = {
						any_state = {
							has_state_flag = is_TAM_state_area
							NOT = { is_controlled_by = ROOT }
						}
					}
				}
				custom_trigger_tooltip = {
					tooltip = control_all_GEO_state
					NOT = {
						any_state = {
							has_state_flag = is_GEO_state_area
							NOT = { is_controlled_by = ROOT }
						}
					}
				}
				custom_trigger_tooltip = {
					tooltip = control_all_AZR_state
					NOT = {
						any_state = {
							has_state_flag = is_AZR_state_area
							NOT = { is_controlled_by = ROOT }
						}
					}
				}
				custom_trigger_tooltip = {
					tooltip = control_all_KUB_state
					NOT = {
						any_state = {
							has_state_flag = is_KUB_state_area
							NOT = { is_controlled_by = ROOT }
						}
					}
				}
				custom_trigger_tooltip = {
					tooltip = control_all_KAR_state
					NOT = {
						any_state = {
							has_state_flag = is_KAR_state_area
							NOT = { is_controlled_by = ROOT }
						}
					}
				}
				custom_trigger_tooltip = {
					tooltip = control_all_CRI_state
					NOT = {
						any_state = {
							has_state_flag = is_CRI_state_area
							NOT = { is_controlled_by = ROOT }
						}
					}
				}
			}
			has_war = no
			has_government = communism
		}
		fire_only_once = yes
		cost = 0
		ai_will_do = {
			factor = 100
		}
		complete_effect = {
			set_cosmetic_tag = EAM_Soviet_union
			if = {
				limit = { amount_research_slots < 5 }
				set_research_slots = 5
			}
			every_controlled_state = {
				limit = { has_state_flag = Soviet_union_state_area }
				add_core_of_ROOT = yes
			}
			if = {
				limit = { controlled_states = 219 }
				set_capital = {
					state = 219
					remember_old_capital = no
				}
			}
			custom_effect_tooltip = Rebuild_CCCP_decision_TT
			hidden_effect = {
				SOV_state_country_core = yes
				UKR = { enable_coring_at_eighty_compliance = yes }
				BLR = { enable_coring_at_eighty_compliance = yes }
				TAM = { enable_coring_at_eighty_compliance = yes }
				GEO = { enable_coring_at_eighty_compliance = yes }
				AZR = { enable_coring_at_eighty_compliance = yes }
				KUB = { enable_coring_at_eighty_compliance = yes }
				KAR = { enable_coring_at_eighty_compliance = yes }
				CRI = { enable_coring_at_eighty_compliance = yes }
				if = {
					limit = {
						tag = EAM
						is_in_faction_with = PRC
						PRC = { is_faction_leader = yes }
					}
					news_event = { id = PRC_news.03 }
				}
			}
		}
	}
	RUS_target_decision_core = {
		icon = generic_nationalism
		allowed = {
			is_russia_uniter_tag = yes
			NOT = {
				or = {
					tag = SOV
					tag = UKR
				}
			}
		}
		target_trigger = {
			FROM = {
				NOT = { is_core_of = ROOT }
				has_state_flag = is_RUS_state_area
			}
			ROOT = { has_country_flag = Reunit_Russia_country }
		}
		state_target = yes
		on_map_mode = map_and_decisions_view
		target_array = controlled_states
		cost = 25
		days_remove = 30
		ai_will_do = {
			factor = 100
		}
		remove_effect = {
			FROM = { add_core_of_ROOT = yes }
		}
	}
}



