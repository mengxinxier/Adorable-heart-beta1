GEU_UNIT_EU_PLAN = {
	GEU_announec_union_eu = {
		allowed = {
		}
		visible = {
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = GEU_announec_union_eu_available
				NOT = {
					any_state = {
						is_on_continent = europe
						NOT = {
							is_controlled_by = GEU
						}
					}
				}
			}
		}
		fire_only_once = yes
		cost = 0
		ai_will_do = {
			factor = 100
		}
		remove_effect = {
			add_research_slot = 1
			country_event = {
				id = germany_union.0014
				days = 1
			}
			hidden_effect = {
				country_event = {
					id = germany_union.0015
					days = 7
				}
			}
			every_state = {
				limit = {
					is_on_continent = europe
					NOT = {
						is_core_of = ROOT
					}
				}
				add_core_of = GEU
			}
		}
	}
	GEU_yaoqing_zujian_eu = {
		allowed = {
		}
		visible = {
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = GEU_announec_union_eu_available_2
				NOT = {
					any_state = {
						is_on_continent = europe
						NOT = {
							GEU = {
								or = {
									any_allied_country = {
										controls_state = PREV.PREV
									}
									controls_state = PREV
								}
							}
						}
					}
				}
			}
		}
		fire_only_once = yes
		cost = 0
		ai_will_do = {
			factor = 100
		}
		remove_effect = {
			every_country = {
				limit = {
					NOT = {
						tag = GEU
					}
					any_controlled_state = {
						is_on_continent = europe
					}
				}
				country_event = {
					id = germany_union.0018
					days = 1
				}
			}
		}
	}
	GEU_announec_union_eu_target_decision_declare_war = {
		icon = GFX_decision_generic_prepare_civil_war
		target_trigger = {
			FROM = {
				any_controlled_state = {
					is_on_continent = europe
				}
				NOT = {
					is_in_faction_with = ROOT
				}
			}
			ROOT = {
				is_subject = no
			}
		}
		cost = 10
		days_remove = 30
		war_with_target_on_remove = yes
		complete_effect = {
			FROM = { THIS_country_is_defender_and_ROOT_is_accacker = yes }
			setup_decision_attack_AI = yes
		}
		remove_effect = {
			clear_decision_attack_AI = yes
			declare_war_on = {
				target = FROM
				type = take_state
			}
		}
		cancel_effect = {
			clear_decision_attack_AI = yes
		}
	}
}

GEU_Grobdeutschland_Plan = {
	GEU_declare_bulid_of_Grobdeutschland = {
		icon = GFX_decision_ger_reichskommissariats
		allowed = {
		}
		visible = {
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = ALL_CONTROL_G_GER
				NOT = {
					any_state = {
						has_state_flag = G_GER
						NOT = {
							or = {
								state = 102
								state = 103
								state = 736
								state = 683
								state = 488
								state = 783
								state = 28
							}
						}
						NOT = { is_controlled_by = ROOT }
					}
				}
			}
		}
		fire_only_once = yes
		cost = 0
		ai_will_do = {
			factor = 1
		}
		complete_effect = {
			set_cosmetic_tag = Communism_Grobdeutschland
		}
	}
	GEU_Grobdeutschland_Plan_declare_war = {
		icon = GFX_decision_generic_ignite_civil_war
		target_trigger = {
			FROM = {
				any_controlled_state = {
					or = {
						has_state_flag = G_GER
						has_state_flag = L_GER
					}
				}
				NOT = {
					is_in_faction_with = ROOT
					has_war_with = ROOT
				}
			}
			ROOT = {
				is_subject = no
			}
		}
		cost = 10
		days_remove = 30
		war_with_target_on_remove = yes
		complete_effect = {
			set_country_flag = {
				flag = GER_war_plan_going_on
				value = 1
				days = 60
			}
			FROM = { THIS_country_is_defender_and_ROOT_is_accacker = yes }
			setup_decision_attack_AI = yes
		}
		remove_effect = {
			clear_decision_attack_AI = yes
			declare_war_on = {
				target = FROM
				type = take_state
			}
		}
		cancel_effect = {
			clear_decision_attack_AI = yes
		}
		ai_will_do = {
			factor = 0
			modifier = {
				NOT = {
					any_home_area_neighbor_country = {
						has_war_with = ROOT
					}
				}
				add = 30
			}
			modifier = {
				has_country_flag = GER_war_plan_going_on
				add = -30
			}
		}
	}
	GEU_Grobdeutschland_Plan_transfer = {
		icon = GFX_decision_generic_brainwash
		target_trigger = {
			any_country = {
				AND = {
					is_subject_of = ROOT
					FROM = {
						has_state_flag = G_GER
						NOT = {
							is_owned_and_controlled_by = ROOT
						}
						is_owned_and_controlled_by = PREV
					}
				}
			}
		}
		state_target = yes
		on_map_mode = map_and_decisions_view
		#icon = decision_infiltrate_state
		cost = 5
		days_remove = 7
		ai_will_do = {
			factor = 10
		}
		remove_effect = {
			ROOT = {
				transfer_state = FROM
			}
		}
	}
}

GEU_special_rea = {
	GEU_nucler_rea = {
		icon = GFX_science_decision
		allowed = {
		}
		visible = {
		}
		available = {
			not = {
				has_country_flag = GEU_special_rea_on
			}
		}
		cost = 200
		days_remove = 150
		ai_will_do = {
			factor = 1
		}
		complete_effect = {
			set_country_flag = GEU_special_rea_on
		}
		remove_effect = {
			clr_country_flag = GEU_special_rea_on
			add_tech_bonus = {
				bonus = 1
				ahead_reduction = 2
				uses = 1
				category = nuclear
			}
		}
	}
	GEU_rocketry_rea = {
		icon = GFX_science_decision
		allowed = {
		}
		visible = {
		}
		available = {
			not = {
				has_country_flag = GEU_special_rea_on
			}
		}
		cost = 200
		days_remove = 150
		ai_will_do = {
			factor = 1
		}
		complete_effect = {
			set_country_flag = GEU_special_rea_on
		}
		remove_effect = {
			clr_country_flag = GEU_special_rea_on
			add_tech_bonus = {
				bonus = 1
				ahead_reduction = 2
				uses = 1
				category = rocketry
			}
		}
	}
}

GEU_special_weapon = {
	GEU_infantry_equipment = {
		icon = GFX_science_decision
		allowed = {
		}
		visible = {
		}
		available = {
			not = {
				has_country_flag = GEU_special_weapon_on
			}
		}
		cost = 200
		days_remove = 150
		ai_will_do = {
			factor = 1
		}
		complete_effect = {
			set_country_flag = GEU_special_weapon_on
		}
		remove_effect = {
			clr_country_flag = GEU_special_weapon_on
			add_tech_bonus = {
				bonus = 1
				ahead_reduction = 2
				uses = 1
				category = infantry_weapons
			}
		}
	}
	GEU_support_tech = {
		icon = GFX_science_decision
		allowed = {
		}
		visible = {
		}
		available = {
			not = {
				has_country_flag = GEU_special_weapon_on
			}
		}
		cost = 200
		days_remove = 150
		ai_will_do = {
			factor = 1
		}
		complete_effect = {
			set_country_flag = GEU_special_weapon_on
		}
		remove_effect = {
			clr_country_flag = GEU_special_weapon_on
			add_tech_bonus = {
				bonus = 1
				ahead_reduction = 2
				uses = 1
				category = support_tech
			}
		}
	}
	GEU_artillery = {
		icon = GFX_science_decision
		allowed = {
		}
		visible = {
		}
		available = {
			not = {
				has_country_flag = GEU_special_weapon_on
			}
		}
		cost = 200
		days_remove = 150
		ai_will_do = {
			factor = 1
		}
		complete_effect = {
			set_country_flag = GEU_special_weapon_on
		}
		remove_effect = {
			clr_country_flag = GEU_special_weapon_on
			add_tech_bonus = {
				bonus = 1
				ahead_reduction = 2
				uses = 1
				category = artillery
			}
		}
	}
	GEU_armor = {
		icon = GFX_science_decision
		allowed = {
		}
		visible = {
		}
		available = {
			not = {
				has_country_flag = GEU_special_weapon_on
			}
		}
		cost = 200
		days_remove = 150
		ai_will_do = {
			factor = 1
		}
		complete_effect = {
			set_country_flag = GEU_special_weapon_on
		}
		remove_effect = {
			clr_country_flag = GEU_special_weapon_on
			add_tech_bonus = {
				bonus = 1
				ahead_reduction = 2
				uses = 1
				category = armor
			}
		}
	}
	GEU_motorized_equipment = {
		icon = GFX_science_decision
		allowed = {
		}
		visible = {
		}
		available = {
			not = {
				has_country_flag = GEU_special_weapon_on
			}
		}
		cost = 200
		days_remove = 150
		ai_will_do = {
			factor = 1
		}
		complete_effect = {
			set_country_flag = GEU_special_weapon_on
		}
		remove_effect = {
			clr_country_flag = GEU_special_weapon_on
			add_tech_bonus = {
				bonus = 1
				ahead_reduction = 2
				uses = 1
				category = motorized_equipment
			}
		}
	}
	GEU_naval_equipment = {
		icon = GFX_science_decision
		allowed = {
		}
		visible = {
		}
		available = {
			not = {
				has_country_flag = GEU_special_weapon_on
			}
		}
		cost = 200
		days_remove = 150
		ai_will_do = {
			factor = 1
		}
		complete_effect = {
			set_country_flag = GEU_special_weapon_on
		}
		remove_effect = {
			clr_country_flag = GEU_special_weapon_on
			add_tech_bonus = {
				bonus = 1
				ahead_reduction = 2
				uses = 1
				category = naval_equipment
			}
		}
	}
	GEU_air_equipment = {
		icon = GFX_science_decision
		allowed = {
		}
		visible = {
		}
		available = {
			not = {
				has_country_flag = GEU_special_weapon_on
			}
		}
		cost = 200
		days_remove = 150
		ai_will_do = {
			factor = 1
		}
		complete_effect = {
			set_country_flag = GEU_special_weapon_on
		}
		remove_effect = {
			clr_country_flag = GEU_special_weapon_on
			add_tech_bonus = {
				bonus = 1
				ahead_reduction = 2
				uses = 1
				category = air_equipment
			}
		}
	}
}

GEU_Diplomatic_matters = {
	GEU_diplo_attck_FROM = {
		icon = GFX_decision_generic_ignite_civil_war
		allowed = {
			always = no
		}
		target_trigger = {
			ROOT = { is_subject = no }
			FROM = {
				not = {
					or = {
						has_war_with = ROOT
						is_in_faction_with = ROOT
						is_subject_of = ROOT
					}
				}
			}
		}
		available = {
			FROM = {
				not = {
					or = {
						has_war_with = ROOT
						is_in_faction_with = ROOT
						is_subject_of = ROOT
					}
				}
			}
			not = {
				has_country_flag = GEU_war_plan_going_on
			}
			or = {
				any_home_area_neighbor_country = {
					or = {
						tag = FROM
						is_in_faction_with = FROM
					}
				}
				any_allied_country = {
					any_home_area_neighbor_country = {
						or = {
							tag = FROM
							is_in_faction_with = FROM
						}
					}
				}
			}
		}
		cost = 10
		days_remove = 15
		war_with_target_on_remove = yes
		complete_effect = {
			set_country_flag = GEU_war_plan_going_on
			FROM_country_is_defender_and_ROOT_is_accacker = yes
		}
		remove_effect = {
			clr_country_flag = GEU_war_plan_going_on
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
		ai_will_do = {
			base = 1000
			modifier = {
				any_home_area_neighbor_country = {
					has_war_with = ROOT
				}
				factor = 0
			}
			modifier = {
				FROM = {
					is_stronger_than_ROOT_and_not_vulnerable = yes
				}
				factor = 0
			}
		}
	}
	GEU_diplo_invite_FROM = {
		icon = GFX_decision_CHL_grant_full_rights_to_the_mapuche
		allowed = {
			always = no
		}
		target_trigger = {
			ROOT = {
				is_subject = no
				is_faction_leader = yes
			}
			FROM = {
				not = { has_country_flag = GEU_diplo_invite_FROM }
			}
		}
		available = {
			is_faction_leader = yes
			has_government = communism
			FROM = {
				has_government = communism
				is_in_faction = no
			}
			not = {
				or = {
					has_war_with = FROM
					is_in_faction_with = FROM
				}
			}
		}
		cost = 10
		days_remove = 15
		war_with_target_on_remove = yes
		remove_effect = {
			FROM = {
				set_country_flag = GEU_diplo_invite_FROM
				country_event = {
					id = generic.2008
				}
			}
		}
		ai_will_do = {
			base = 1000
		}
	}
	GEU_Discord_sov = {
		icon = GFX_decision_CHL_grant_full_rights_to_the_mapuche
		allowed = {
			always = no
		}
		target_trigger = {
			SOV = {
				is_faction_leader = yes
				has_government = communism
			}
			FROM = {
				has_government = communism
				is_in_faction_with = SOV
				is_subject = no
				NOT = {
					tag = SOV
				}
				NOT = {
					has_country_flag = GEU_invite_new_firend_already
				}
				not = {
					is_in_faction_with = ROOT
				}
				not = {
					has_war_with = ROOT
				}
			}
			ROOT = {
				is_subject = no
				is_faction_leader = yes
			}
		}
		available = {
			is_faction_leader = yes
			has_government = communism
			FROM = {
				has_government = communism
				custom_trigger_tooltip = {
					tooltip = is_in_third_international
					is_in_third_international = yes
				}
			}
			not = {
				or = {
					has_war_with = FROM
					is_in_faction_with = FROM
				}
			}
		}
		cost = 10
		days_remove = 15
		war_with_target_on_remove = yes
		remove_effect = {
			FROM = {
				set_country_flag = GEU_invite_new_firend_already
				country_event = {
					id = germany_union.0016
				}
			}
		}
		ai_will_do = {
			base = 1000
		}
	}
	##请求苏联援助装备
	GEU_ask_for_SOV_equipment = {
		icon = GFX_decision_generic_prepare_civil_war
		visible = {
			not = { has_country_flag = Reunit_germany_country }
			has_completed_focus = BAY_Request_assistance_from_Moscow
			SOV = {
				has_government = communism
				is_faction_leader = yes
				exists = yes
			}
		}
		available = {
		}
		cost = 15
		days_remove = 15
		days_re_enable = 120
		ai_will_do = {
			factor = 1
		}
		complete_effect = {
		}
		remove_effect = {
			SOV = { country_event = { id = germany_union.0041 } }
		}
	}
	##请求德国援助装备
	GEU_ask_for_GER_equipment = {
		icon = GFX_decision_generic_prepare_civil_war
		visible = {
			not = { has_country_flag = Reunit_germany_country }
			has_completed_focus = BAY_Request_assistance_from_Vienna
			GER = {
				not = { has_war_with = ROOT }
				is_faction_leader = yes
				exists = yes
			}
		}
		available = {
		}
		cost = 15
		days_remove = 15
		days_re_enable = 120
		ai_will_do = {
			factor = 1
		}
		complete_effect = {
		}
		remove_effect = {
			GER = { country_event = { id = germany_union.0041 } }
		}
	}
}

GEU_Rose_International = {
	GEU_invite_FROM_add_to_Rose_International = {
		icon = GFX_GEU_Rose_International_decision
		allowed = {
			is_germany_tag = yes
		}
		target_trigger = {
			ROOT = {
				is_subject = no
				is_faction_leader = yes
			}
			FROM = {
				not_in_any_economy_faction = yes
				or = {
					has_government = communism
					has_country_leader_ideology = socialism
				}
				not = { has_country_flag = GEU_invite_FROM_add_to_Rose_International }
				not = { has_idea = GEU_Rose_International_idea }
			}
		}
		target_array = allies
		available = {
			FROM = {
				custom_trigger_tooltip = {
					tooltip = has_left_government
					or = {
						has_government = communism
						has_country_leader_ideology = socialism
					}
				}
			}
			not = { has_war_with = FROM }
		}
		cost = 10
		days_remove = 15
		war_with_target_on_remove = yes
		remove_effect = {
			FROM = {
				set_country_flag = GEU_invite_FROM_add_to_Rose_International
				country_event = {
					id = germany_union.0038
				}
			}
		}
		ai_will_do = {
			base = 1000
		}
	}
	GEU_invite_FROM_add_to_Rose_International_neutral = {
		icon = GFX_GEU_Rose_International_decision
		allowed = {
			always = no
		}
		target_trigger = {
			ROOT = {
				is_subject = no
				is_faction_leader = yes
			}
			FROM = {
				not_in_any_economy_faction = yes
				or = {
					has_government = communism
					has_country_leader_ideology = socialism
				}
				not = { has_country_flag = GEU_invite_FROM_add_to_Rose_International }
				not = { has_idea = GEU_Rose_International_idea }
			}
		}
		available = {
			FROM = {
				custom_trigger_tooltip = {
					tooltip = has_left_government
					or = {
						has_government = communism
						has_country_leader_ideology = socialism
					}
				}
			}
			not = { has_war_with = FROM }
		}
		cost = 10
		days_remove = 15
		war_with_target_on_remove = yes
		remove_effect = {
			FROM = {
				set_country_flag = GEU_invite_FROM_add_to_Rose_International
				country_event = {
					id = germany_union.0038
				}
			}
		}
		ai_will_do = {
			base = 1000
		}
	}
}

GEU_Territorial_issues = {
	GEU_Territorial_negotiations = {
		target_trigger = {
			FROM = {
				any_controlled_state = {
					has_state_flag = L_GER
				}
				not = {
					has_country_flag = GEU_Territorial_negotiations_already
				}
			}
			ROOT = {
				is_subject = no
			}
		}
		cost = 50
		days_remove = 7
		remove_effect = {
			FROM = {
				set_country_flag = GEU_Territorial_negotiations_already
				country_event = {
					id = germany_union.0021
					days = 1
				}
			}
		}
	}
}

GEU_Spread_the_revolution = {
	GEU_Revolutionization = {
		target_trigger = {
			FROM = {
				is_subject_of = ROOT
				not = {
					and = {
						has_government = communism
						has_autonomy_state = autonomy_GEU_autonomy_state
					}
				}
			}
			ROOT = {
				is_subject = no
			}
		}
		cost = 30
		days_remove = 30
		remove_effect = {
			if = {
				limit = {
					FROM = {
						not = {
							or = {
								has_government = communism
							}
						}
					}
				}
				FROM = {
					set_politics = {
						ruling_party = communism
					}
				}
			}
			if = {
				limit = {
					FROM = {
						not = {
							or = {
								has_autonomy_state = autonomy_GEU_autonomy_state
							}
						}
					}
				}
				set_autonomy = {
					target = FROM
					autonomy_state = autonomy_GEU_autonomy_state
				}
			}
		}
	}

	GER_volkskommissariat_industrial_effort_decision = {
		icon = GFX_decision_generic_construction
		allowed = {
		}
		visible = {
			has_completed_focus = GER_industrialize_volkskommissariats
			NOT = { has_country_flag = GER_currently_improving_volkskommissariat_flag }
		}
		available = {
			num_of_civilian_factories_available_for_projects > 2
		}
		cost = 15
		modifier = {
			civilian_factory_use = 3
		}
		days_remove = 30
		fire_only_once = yes
		target_array = ROOT.subjects
		target_trigger = {
			FROM = {
				has_autonomy_state = autonomy_volkskommissariat
			}
		}
		complete_effect = {
			set_country_flag = GER_currently_improving_volkskommissariat_flag
		}
		remove_effect = {
			clr_country_flag = GER_currently_improving_volkskommissariat_flag
			FROM = {
				random_owned_controlled_state = {
					limit = {
						is_capital = yes
					}
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					add_extra_state_shared_building_slots = 2
				}
				country_event = {
					id = germany_union.0040
					hours = 6
				}
			}
		}
	}
}

War_against_DVL_decision = {
	The_war_escalated = {
		icon = GFX_decision_generic_ignite_civil_war
		available = {
			hidden_trigger = {
				always = no
			}
		}
		priority = 20
		days_mission_timeout = 100
		activation = {
			always = no
		}
		visible = {
		}
		cancel_if_not_visible = yes
		selectable_mission = yes
		cancel_trigger = {
			hidden_trigger = {
				has_war = no
			}
		}
		cancel_effect = {
			hidden_effect = {
				if = {
					limit = {
						not = { check_variable = { global.War_against_DVL_Var < 2 } }
					}
					GER = {
						dismantle_faction = yes
						create_faction = Axis
						add_to_faction = ITA
						add_to_faction = KMS
					}
					BAY = { drop_cosmetic_tag = yes }
					RHI = { drop_cosmetic_tag = yes }
				}
			}
		}
		timeout_effect = {
			hidden_effect = {
				activate_mission = The_war_escalated
			}
			add_to_variable = { global.War_against_DVL_Var = 1 }
			if = {
				limit = {
					not = { check_variable = { global.War_against_DVL_Var < 2 } }
					not = { has_global_flag = The_war_escalated_level_2 }
				}
				set_global_flag = The_war_escalated_level_2
				GER = {
					set_faction_name = Second_Alliance_against_DVL
					if = {
						limit = {
							RHI = { is_subject = no }
						}
						add_to_faction = RHI
					}
					if = {
						limit = {
							BAY = { is_subject = no }
						}
						add_to_faction = BAY
					}
				}
				every_state = {
					limit = {
						has_state_flag = Weimar_GER
						NOT = {
							or = {
								is_core_of = BAY
								is_claimed_by = BAY
							}
						}
					}
					add_claim_by = BAY
				}
				every_state = {
					limit = {
						has_state_flag = Weimar_GER
						NOT = {
							or = {
								is_core_of = RHI
								is_claimed_by = RHI
							}
						}
					}
					add_claim_by = RHI
				}
				DVL = { add_ideas = DVL_Morale_is_low }
			}
			if = {
				limit = {
					not = { check_variable = { global.War_against_DVL_Var < 3 } }
					not = { has_global_flag = The_war_escalated_level_3 }
				}
				set_global_flag = The_war_escalated_level_3
				GER = {
					if = {
						limit = {
							CZE = { is_subject = no }
						}
						add_to_faction = CZE
					}
					if = {
						limit = {
							DEN = { is_subject = no }
						}
						add_to_faction = DEN
					}
				}
			}
			if = {
				limit = {
					not = { check_variable = { global.War_against_DVL_Var < 4 } }
					not = { has_global_flag = The_war_escalated_level_4 }
				}
				set_global_flag = The_war_escalated_level_4
				GER = {
					if = {
						limit = {
							POL = { is_subject = no }
						}
						add_to_faction = POL
					}
				}
			}
			if = {
				limit = {
					not = { check_variable = { global.War_against_DVL_Var < 5 } }
					not = { has_global_flag = The_war_escalated_level_5 }
				}
				set_global_flag = The_war_escalated_level_5
				GER = {
					if = {
						limit = {
							FRA = { is_subject = no }
						}
						add_to_faction = FRA
					}
					if = {
						limit = {
							KMK = { is_subject = no }
						}
						add_to_faction = KMK
					}
				}
			}
		}
	}
}


