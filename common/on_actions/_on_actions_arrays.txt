on_actions = {
	on_startup = {
		effect = {
			# Setup up a player array  #定义一个作用域
			every_country = {
				limit = {
					is_ai = no
				}
				add_to_array = {
					# It will automatically add the scope
					array = global.players
				}
			}
			SOV = {
				add_ideas = faction_leader_third_international
			}
			GER = {
				add_ideas = faction_leader_axis
			}
			ENG = {
				add_ideas = faction_leader_ally
				news_event = {
					id = generic.2018
					days = 21
				}
				news_event = {
					id = generic.2019
					days = 386
				}
			}
			DVL = {
				add_ideas = faction_leader_Imperial_Front
			}
			SOV = {
				set_variable = {
					adorable_heart_SOV_his_page = 1
				}
			}
			FRA = {
				set_variable = {
					FRA_operation_window_var = 0
				}
			}
			AHM = {
				country_event = {
					id = chi.1009
					days = 365
				}
			}
			every_state = {
				add_to_array = {
					global.ah_formables_states_array = THIS.id
				}
			}
			every_state = {
				limit = {
					or = {
						is_core_of = ABY
						is_core_of = GEH
						is_core_of = TRY
						is_core_of = SHJ
						is_core_of = KVO
						is_core_of = RED
						is_core_of = MIL
						is_core_of = AKK
					}
				}
				set_state_flag = is_BA_state_area
			}
			every_state = {
				limit = {
					is_on_continent = europe
					is_core_of = GRE
				}
				set_state_flag = is_GRE_state_area
			}
			every_state = {
				limit = {
					is_core_of = BUL
				}
				set_state_flag = is_BUL_state_area
			}
			every_state = {
				limit = {
					is_core_of = ROM
				}
				set_state_flag = is_ROM_state_area
			}
			every_state = {
				limit = {
					or = {
						state = 186
						state = 47
						state = 768
						state = 185
						state = 758
						state = 1076
						state = 731
						state = 989
					}
				}
				set_state_flag = is_GRE_state_area_small
			}
			every_state = {
				limit = {
					is_controlled_by = ITA
				}
				set_state_flag = is_ITA_state_area
			}
			every_state = {
				limit = {
					is_controlled_by = ALS
				}
				set_state_flag = is_ALS_state_area
			}
			every_state = {
				limit = {
					is_controlled_by = RMC
				}
				set_state_flag = is_RMC_state_area
			}
			every_state = {
				limit = {
					is_controlled_by = MOW
				}
				set_state_flag = is_MOW_state_area
			}
			every_state = {
				limit = {
					is_core_of = ALB
				}
				set_state_flag = is_ALB_state_area
			}
			every_state = {
				limit = {
					is_core_of = MAC
				}
				set_state_flag = is_MAC_state_area
			}
			every_state = {
				limit = {
					is_core_of = TRA
				}
				set_state_flag = is_TRA_state_area
			}
			every_state = {
				limit = {
					or = {
						is_controlled_by = SOV
					}
				}
				set_state_flag = Soviet_union_state_area
			}
			every_state = {
				limit = {
					or = {
						region = 165
						region = 130
					}
				}
				set_state_flag = is_UKR_state_area
			}
			every_state = {
				limit = {
					region = 39
				}
				set_state_flag = is_BLR_state_area
			}
			every_state = {
				limit = {
					region = 136
				}
				set_state_flag = is_TAM_state_area
			}
			every_state = {
				limit = {
					or = {
						state = 1080
						state = 231
					}
				}
				set_state_flag = is_GEO_state_area
			}
			every_state = {
				limit = {
					state = 229
				}
				set_state_flag = is_AZR_state_area
			}
			every_state = {
				limit = {
					region = 135
				}
				set_state_flag = is_KUB_state_area
			}
			every_state = {
				limit = {
					or = {
						state = 215
						state = 146
						state = 216
					}
				}
				set_state_flag = is_KAR_state_area
			}
			every_state = {
				limit = {
					state = 137
				}
				set_state_flag = is_CRI_state_area
			}
			every_state = {
				limit = {
					has_state_flag = Soviet_union_state_area
					not = {
						or = {
							region = 165
							region = 130
							region = 39
							region = 136
							state = 1080
							state = 231
							state = 229
							region = 135
							state = 215
							state = 146
							state = 216
							state = 137
						}
					}
				}
				set_state_flag = is_RUS_state_area
			}
			every_state = {
				limit = {
					is_core_of = POL
				}
				set_state_flag = is_POL_state_area
			}
			every_state = {
				limit = {
					or = {
						state = 97
						state = 98
						state = 87
						state = 90
						state = 10
						state = 92
						state = 1088
					}
				}
				set_state_flag = is_little_POL_state_area
			}
		}
	}
	on_monthly = {
		effect = {
		}
	}
	on_state_control_changed = {
		effect = {
			### Integration Check
			FROM.FROM = {
				if = {
					limit = {
						NOT = { is_core_of = ROOT }
						impassable = no
					}
					if = {
						limit = {
							any_country_with_core = {
								has_variable = ROOT.can_integrate_@THIS
								set_temp_variable = { integration_target = THIS }
							}
						}
						if = {
							limit = {
								NOT = {
									AND = {
										has_resistance = yes
										occupied = { has_variable = ROOT.can_integrate_@THIS }
									}
								}
							}
							if = {
								limit = { has_resistance = yes }
								set_temp_variable = { previous_compliance = compliance }
								set_temp_variable = { previous_resistance = resistance }
								cancel_resistance = yes
							}
							start_resistance = var:integration_target
							set_compliance = var:previous_compliance
							set_resistance = var:previous_resistance
						}
						ROOT = {
							var:integration_target = {
								set_occupation_law_where_available = territorial_integration_95
								set_occupation_law_where_available = territorial_integration_80
								set_occupation_law_where_available = territorial_integration
							}
						}
					}
					else_if = {
						limit = { has_variable = can_integrate_@ROOT }
						start_state_integration_resistance = yes
					}
					else = {
						clear_state_integration_resistance = yes
					}
				}
				else = {
					clear_state_integration_resistance = yes
				}
			}
		}
	}
}
