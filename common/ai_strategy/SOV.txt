# befriend
# conquer
# antagonize
# build_ship
# build_army
# unit_ratio
# build_building
# research_tech
# garrison
# protect
# influence

#生产制造
	SOV_unit_production = {
		allowed = {
			original_tag = SOV
		}
		enable = {
			always = yes
		}
		abort = {
			always = no
		}

		ai_strategy = {
			type = role_ratio
			id = garrison
			value = 0
		}

		ai_strategy = {
			type = role_ratio
			id = paratroopers
			value = 0
		}

		ai_strategy = {
			type = role_ratio
			id = mountaineers
			value = 1
		}

		ai_strategy = {
			type = role_ratio
			id = marines
			value = 0
		}

		ai_strategy = {
			type = role_ratio
			id = cavalry
			value = 0
		}

		ai_strategy = {
			type = role_ratio
			id = motorized
			value = 0
		}

		ai_strategy = {
			type = role_ratio
			id = mechanized
			value = 0
		}

		ai_strategy = {
			type = role_ratio
			id = armor
			value = 50
		}

		ai_strategy = { 
			type = railway_gun_divisions_ratio
			value = 5
		}

		ai_strategy = {
			type = role_ratio
			id = infantry
			value = 70 #because doctrine 70
		}
		
	}

	SOV_air_production = {

		allowed = {
			original_tag = SOV
		}

		enable = {
			always = yes
		}

		ai_strategy = {
			type = unit_ratio
			id = fighter
			value = 35
		}

		ai_strategy = {
			type = equipment_production_factor
			id = fighter
			value = 50
		}

		ai_strategy = {
			type = unit_ratio
			id = cas
			value = 40
		}

		ai_strategy = {
			type = equipment_production_factor
			id = cas
			value = 50
		}

		ai_strategy = {
			type = unit_ratio
			id = naval_bomber
			value = 2
		}

		ai_strategy = {
			type = unit_ratio
			id = strategic_bomber
			value = 3
		}

		ai_strategy = {
			type = unit_ratio
			id = heavy_fighter
			value = 0
		}

		ai_strategy = {
			type = equipment_production_factor
			id = heavy_fighter
			value = 0
		}

		ai_strategy = {
			type = equipment_variant_production_factor
			id = small_plane_airframe
			value = 50
		}

		ai_strategy = {
			type = equipment_variant_production_factor
			id = small_plane_cas_airframe
			value = 100
		}

		ai_strategy = {
			type = equipment_variant_production_factor
			id = large_plane_airframe
			value = 20
		}

	}

	# SOV_AUTO_META_production = {
	# 	allowed = {
	# 		original_tag = SOV
	# 	}
	# 	enable = {
	# 		has_tech = KEI_AUTO_META_0
	# 	}
	# 	ai_strategy = {
	# 		type = role_ratio
	# 		id = motorized
	# 		value = 15
	# 	}
	# }

	SOV_more_armor = {
		allowed = {
			original_tag = SOV
		}
		enable = {
			arms_factory > 299
		}
		
		abort_when_not_enabled = yes

		ai_strategy = {
			type = role_ratio
			id = armor
			value = 25
		}

		ai_strategy = {
			type = role_ratio
			id = infantry
			value = -20
		}

		ai_strategy = {
			type = equipment_production_factor
			id = armor
			value = 15
		}
	}

	SOV_equipment_production = {
		allowed = {
			original_tag = SOV
		}
		enable = {
			always = yes
		}
		ai_strategy = {
			type = equipment_production_factor
			id = tactical_bomber
			value = -20
		}

		ai_strategy = {
			type = equipment_production_factor
			id = fighter
			value = 30 #Accounted for
		}

		ai_strategy = {
			type = equipment_production_factor
			id = cas
			value = 30
		}

		ai_strategy = {
			type = equipment_production_factor
			id = infantry
			value = 25
		}

		ai_strategy = {
			type = equipment_production_factor
			id = artillery
			value = 40
		}

		ai_strategy = {
			type = equipment_production_min_factories
			id = anti_tank
			value = 1
		}

		ai_strategy = {
			type = equipment_production_min_factories
			id = artillery
			value = 1
		}

		ai_strategy = {
			type = equipment_production_factor
			id = armor
			value = 35
		}

		ai_strategy = {
			type = equipment_production_min_factories
			id = train
			value = 1
		}
	}

	SOV_artillery_production = {
		allowed = {
			original_tag = SOV
		}
		enable = {
			has_equipment = {
				artillery_equipment < 0
			}
		}

		abort_when_not_enabled = yes

		ai_strategy = {
			type = equipment_production_min_factories
			id = artillery
			value = 8
		}
	}

	SOV_infantry_production = {
		allowed = {
			original_tag = SOV
		}
		enable = {
			has_equipment = {
				infantry_equipment < 100
			}
		}

		abort = {
			has_equipment = {
				infantry_equipment > 5000
			}
		}

		ai_strategy = {
			type = equipment_production_min_factories
			id = infantry
			value = 15
		}
		ai_strategy = { 
			type = equipment_production_factor
			id = infantry
			value = 50
		}
	}

	SOV_no_more_storage_for_rifles = {
		allowed = {
			original_tag = SOV
		}
		enable = {
			has_equipment = {
				infantry_equipment > 250000
			}
		}

		abort = {
			has_equipment = {
				infantry_equipment < 5000
			}
		}

		ai_strategy = { 
			type = equipment_production_factor
			id = infantry
			value = -50
		}
	}

	SOV_no_more_storage_for_artillery = {
		allowed = {
			original_tag = SOV
		}
		enable = {
			has_equipment = {
				artillery_equipment > 25000
			}
		}

		abort = {
			has_equipment = {
				artillery_equipment < 1000
			}
		}
		
		ai_strategy = { 
			type = equipment_production_factor
			id = artillery
			value = -50
		}
	}
	
	SOV_no_more_storage_for_support_equipment = {
		allowed = {
			original_tag = SOV
		}
		enable = {
			has_equipment = {
				support_equipment > 25000
			}
		}

		abort = {
			has_equipment = {
				support_equipment < 1000
			}
		}
		
		ai_strategy = { 
			type = equipment_production_factor
			id = support
			value = -50
		}
	}

	SOV_medium_tank_production = {
		allowed = {
			original_tag = SOV
		}
		enable = { 
			has_tech = basic_medium_tank_chassis
		}
		abort = { 
			has_tech = main_battle_tank_chassis
		}
		
		ai_strategy = { 
			type = equipment_production_factor
			id = armor
			value = 30
		}
		ai_strategy = { 
			type = equipment_production_min_factories
			id = armor
			value = 1
		}
		ai_strategy = {
			type = equipment_variant_production_factor
			id = light_tank_chassis
			value = 50
		}
		# ai_strategy = {
		# 	type = equipment_variant_production_factor
		# 	id = medium_tank_destroyer_chassis
		# 	value = 50
		# }
		ai_strategy = { 
			type = equipment_variant_production_factor 
			id = medium_tank_chassis 
			value = 50
		}
	} 

	SOV_mechanised_infantry = {
		allowed = {
			original_tag = SOV
		}
		enable = { 
			has_tech = mechanised_infantry
		}
		abort = {
			has_equipment = { mechanized_equipment > 1000 } 
		}
		
		ai_strategy = { 
			type = equipment_variant_production_factor
			id = mechanized_equipment
			value = 20
		}
	} 

	SOV_flame_tank_production = {
		allowed = {
			original_tag = SOV
		}
		enable = { 
			has_tech = tech_engineers2
		}
		
		ai_strategy = { 
			type = equipment_production_min_factories 
			id = flame
			value = 4 
		}
	} 

	SOV_naval_role_ratios_historical = {
		allowed = {
			has_dlc = "Man the Guns"
			original_tag = SOV
		}

		enable = {
			always = yes
		}

		ai_strategy = {
			type = role_ratio
			id = naval_capital_bb
			value = -25
		}

		ai_strategy = {
			type = role_ratio
			id = naval_capital_bc
			value = -100
		}

		ai_strategy = {
			type = role_ratio
			id = naval_carrier
			value = 50
		}

		ai_strategy = {
			type = role_ratio
			id = naval_submarine
			value = 150
		}

		ai_strategy = {
			type = role_ratio
			id = naval_screen
			value = 150
		}

		ai_strategy = {
			type = role_ratio
			id = naval_cruiser_light
			value = -15
		}

		ai_strategy = {
			type = role_ratio
			id = naval_cruiser_heavy
			value = 150
		}

		ai_strategy = {
			type = role_ratio
			id = naval_mine_sweeper
			value = -15
		}

		ai_strategy = {
			type = role_ratio
			id = naval_mine_layer
			value = -80
		}
	}

	SOV_more_patrol_bombers = {
		allowed = {
			original_tag = SOV
		}
		enable = {
			has_navy_size = {
				size > 50
			}
			is_major = yes
		}
		ai_strategy = {
			type = unit_ratio
			id = maritime_patrol_plane
			value = 1
		}
		ai_strategy = {
			type = equipment_production_factor
			id = maritime_patrol_plane
			value = 1
		}
	}

	SOV_wants_civ = {
		allowed = {
			original_tag = SOV
		}
		enable = {
			date < 1939.1.1
			num_of_civilian_factories < 200
		}
		abort_when_not_enabled = yes
		ai_strategy = {
			type = building_target
			id = industrial_complex
			value = 1000
		}
	}

	SOV_wants_arms_factory = {
		allowed = {
			original_tag = SOV
		}
		enable = {
			num_of_civilian_factories > 200
		}
		abort = {
			num_of_military_factories > 200
		}
		ai_strategy = {
			type = building_target
			id = arms_factory
			value = 1000
		}
	}

	SOV_build_tankograd = {
		allowed = {
			original_tag = SOV
		}
		enable = { 
			has_completed_focus = SOV_build_tank_city
			num_of_civilian_factories > 120
		}
		abort = {
			num_of_military_factories > 200
		}
		
		ai_strategy = {
			type = build_building
			id = arms_factory
			target = 405
			value = 2000
		}
		
		ai_strategy = {
			type = build_building
			id = arms_factory
			target = 586
			value = 2000
		}
		
		ai_strategy = {
			type = build_building
			id = arms_factory
			target = 653
			value = 2000
		}
		
		ai_strategy = {
			type = build_building
			id = arms_factory
			target = 572
			value = 2000
		}
		
		ai_strategy = {
			type = build_building
			id = arms_factory
			target = 571
			value = 2000
		}
		
		ai_strategy = {
			type = build_building
			id = arms_factory
			target = 570
			value = 2000
		}
		
		ai_strategy = {
			type = build_building
			id = arms_factory
			target = 40
			value = 2000
		}
		
		ai_strategy = {
			type = build_building
			id = arms_factory
			target = 568
			value = 2000
		}
		
		ai_strategy = {
			type = build_building
			id = arms_factory
			target = 569
			value = 2000
		}
		
		ai_strategy = {
			type = build_building
			id = arms_factory
			target = 408
			value = 2000
		}
	}

	SOV_build_radar_stations = {
		allowed = {
			original_tag = SOV
		}

		enable = {
			has_tech = radio_detection
		}

		abort_when_not_enabled = yes
	
		ai_strategy = {
			type = build_building
			id = radar_station
			target = 195 #leningrad
			value = 100
		}
		ai_strategy = {
			type = build_building
			id = radar_station
			target = 219 #moscow
			value = 100
		}
		ai_strategy = {
			type = build_building
			id = radar_station
			target = 217 #stalingrad
			value = 100
		}
	}

	UKR_Lada_likes_corn = {
		allowed = {
			original_tag = UKR
		}
		enable = {
			date < 1939.1.1
			has_government = communism
		}
		abort_when_not_enabled = yes
		ai_strategy = {
			type = building_target
			id = industrial_complex
			value = 1000
		}
	}

	SOV_land_xp_spend = {
		allowed = {
			original_tag = SOV
		}

		enable = {
			date < 1940.1.1
		}

		abort_when_not_enabled = yes

		ai_strategy = {
			type = land_xp_spend_priority
			id = division_template
			value = 30
		}
	}


#军队行为

	SOV_home_land_is_safe = {
		allowed = {
			original_tag = SOV
		}

		enable = {
			always = yes
		}

		ai_strategy = {
			type = garrison
			value = -100
		}
	}

	SOV_rush_to_Ukraine = {
		allowed = { 
			original_tag = SOV 
		}

		enable = {
			OR = {
				has_war_with = UKR
				AND = {
					focus_progress = { focus = SOV_ultimatum_to_Kiev progress > 0 }
					NOT = { has_completed_focus = SOV_ultimatum_to_Kiev }
				}
				has_completed_focus = SOV_ultimatum_to_Kiev
			}
			UKR = { is_in_faction = no }
		}

		abort = {
			NOT = {
				AND = {
					OR = {
						has_war_with = UKR
						AND = {
							focus_progress = { focus = SOV_ultimatum_to_Kiev progress > 0 }
							NOT = { has_completed_focus = SOV_ultimatum_to_Kiev }
						}
						has_completed_focus = SOV_ultimatum_to_Kiev
					}
					UKR = { is_in_faction = no }
				}
			}
		}

		ai_strategy = {
			type = front_unit_request
			tag = UKR
			value = 999
		}

		ai_strategy = {
			type = front_control
			tag = UKR
			ratio > 0.10
			priority = 50
			ordertype = front
			execution_type = rush
			manual_attack = no
		}

		ai_strategy = {
			type = front_control
			state_trigger = {
				state = 202
				is_controlled_by = UKR
			}
			ratio > 0.10
			priority = 75
			ordertype = front
			execution_type = rush
			manual_attack = no
		}
	}

	SOV_defensive_DVL_careful = {
		allowed = { 
			tag = SOV 
		}

		enable = {
			has_war_with = DVL
			OR = {
				DVL = { surrender_progress < 0.20 }
				DVL = { has_manpower > 100000 }
			}
		}
	
		abort_when_not_enabled = yes
	
		ai_strategy = {
			type = front_control
			country_trigger = {
				OR = {
					tag = DVL
					is_in_faction_with = DVL
				}
			}
			ordertype = front
			execution_type = careful
		}
	}

	SOV_offensive_DVL_for_western_front_ally = {
		enable = {
			has_war_with = DVL
			is_neighbor_of = SOV
			is_in_faction_with = SOV
			DVL = { has_manpower > 100000 }
		}
		
		abort_when_not_enabled = yes

		ai_strategy = {
			type = front_control
			priority = 100
			country_trigger = { is_in_faction_with = DVL }
			ratio > 0.75
			execution_type = careful
			execute_order = no
		}
	}

	SOV_offensive_assignments = {
		enable = {
			has_war_with = DVL
	
			is_in_faction_with = SOV
		}
		abort_when_not_enabled = yes	
	
		ai_strategy = {
			type = front_armor_score
			id = "DVL"
			value = 50000
		}
	}

#情报机构

	SOV_the_more_powerful_KGB = {
		allowed = {
			original_tag = SOV
		}
		enable = {
			always = yes
		}

		abort = {
			always = no
		}

		ai_strategy = {
			type = intelligence_agency_usable_factories
			value = 1000
		}

		ai_strategy = {
			type = intelligence_agency_branch_desire_factor
			id = branch_defense
			value = 1500
		}
		ai_strategy = {
			type = intelligence_agency_branch_desire_factor
			id = branch_crypto
			value = 2000
		}

		ai_strategy = {
			type = intelligence_agency_usable_factories
			value = 20
		}

		ai_strategy = {
			type = operation_equipment_priority
			value = 100
		}

	}

	SOV_Willows_own_son = {

		allowed = {
			tag = SOV
		}

		enable = {
			date < 1939.6.1
		}

		abort_when_not_enabled = yes

		ai_strategy = {
			type = operative_mission
			mission = build_intel_network
			value = 2500
			mission_target = AHM
		}

		ai_strategy = {
			type = operative_operation
			value = 2500
			operation = operation_infiltrate_civilian
			operation_target = AHM
		}

		ai_strategy = {
			type = operative_operation
			value = 5000
			operation = operation_steal_tech_civilian
			operation_target = AHM
		}
	}
	
	SOV_infiltrate_DVL = {
		
		allowed = {
			tag = SOV
		}
		
		enable = {
			country_exists = DVL
			date > 1941.1.1
		}
		
		abort_when_not_enabled = yes

		ai_strategy = {
			type = operative_operation
			operation = operation_collaboration_government
			value = 2500
			operation_target = DVL
		}
		
		ai_strategy = {
			type = operative_mission
			mission = build_intel_network
			value = 999
			mission_target = DVL
		}

	}

	SOV_overthrow_BAL = {

		allowed = {
			tag = SOV
		}
		
		enable = {
			BAL = {
				has_idea = SOV_ideological_assembly
			}
		}
		
		abort_when_not_enabled = yes
			
		ai_strategy = {
			type = operative_mission
			mission = build_intel_network
			value = 1000
			mission_target = BAL
		}

		ai_strategy = {
			type = operative_mission
			mission = boost_ideology
			value = 1000
			mission_target = BAL
		}
	}

	SOV_overthrow_FIN = {

		allowed = {
			tag = SOV
		}
		
		enable = {
			FIN = {
				has_idea = SOV_ideological_assembly
			}
		}
		
		abort_when_not_enabled = yes
			
		ai_strategy = {
			type = operative_mission
			mission = build_intel_network
			value = 1000
			mission_target = FIN
		}

		ai_strategy = {
			type = operative_mission
			mission = boost_ideology
			value = 1000
			mission_target = FIN
		}
	}

	SOV_overthrow_AFG = {

		allowed = {
			tag = SOV
		}
		
		enable = {
			AFG = {
				has_idea = SOV_ideological_assembly
			}
		}
		
		abort_when_not_enabled = yes
			
		ai_strategy = {
			type = operative_mission
			mission = build_intel_network
			value = 1000
			mission_target = AFG
		}

		ai_strategy = {
			type = operative_mission
			mission = boost_ideology
			value = 1000
			mission_target = AFG
		}
	}

#外交

	SOV_dont_mess_with_volunteers_for_no_communism_nations = { # Reverse strategy

		reversed = yes

		allowed = {
			original_tag = SOV
		}

		enable = {
			NOT = {
				has_government = communism
				has_war_with = SOV
			}
		}

		abort_when_not_enabled = yes

		ai_strategy = {
			type = support
			id = "SOV"
			value = -10
		}

		ai_strategy = {
			type = send_volunteers_desire
			id = "SOV"
			value = -10
		}

	}

	SOV_send_volunteers = { # Reverse strategy

		reversed = yes

		allowed = {
			original_tag = SOV
		}

		enable = {


			if = {
				limit = { NOT = { has_completed_focus = SOV_Support_Viet_Minh } }
				NOT = {
					tag = CAM
					tag = VIN
				}
			}
			OR = {
				has_country_flag = SWE_Communist_Party_Cabinet
				has_government = communism
			}
			NOT = { 
				any_enemy_country = {
					has_government = communism
					is_subject = no
					OR = {
						is_faction_leader = yes
						is_in_faction = no
					}
				}
			}
			NOT = {
				has_country_leader_ideology = anarchist_communism
			}
			NOT = {
				capital_scope = {
					is_on_continent = africa
				}
			}
			if = {
				limit = { tag = PAN }
				always = yes
			}
			else_if = {
				limit = {
					UKR = {
						exists = yes
						NOT = { has_government =  communism }
					}
				}
				always = no
			}
		}

		abort_when_not_enabled = yes

		ai_strategy = {
			type = send_volunteers_desire
			id = "SOV"
			value = 100
		}
	}

	#日苏关系
	SOV_dip_with_JAP = {
		allowed = {
			original_tag = SOV
		}
		enable = {
			has_non_aggression_pact_with = JAP
		}
		abort_when_not_enabled = yes
		ai_strategy = {
			type = befriend
			id = JAP
			value = 100
		}
	}

	JAP_diplomacy_with_SOV = {
		allowed = {
			original_tag = JAP
		}

		enable = {
			has_non_aggression_pact_with = SOV
		}
		abort_when_not_enabled = yes

		ai_strategy = {
			type = befriend
			id = SOV
			value = 100
		}
	}

	#苏戴关系
	SOV_dip_with_DVL = {
		allowed = {
			original_tag = SOV
		}
		enable = {
			always = yes
		}
		ai_strategy = {
			type = conquer
			id = DVL
			value = 100
		}	
		ai_strategy = {
			type = consider_weak
			id = DVL
			value = 100
		}			
	}

	SOV_dip_with_democracy = {

		enable = {
			OR = {
				tag = FRA
				tag = NPT
				tag = ENG
				tag = GER
				tag = ITA
			}
			NOT = { tag = SOV }
			DVL = {
				exists = yes
				is_subject = no
			}
		}

		ai_strategy = {
			type = befriend
			id = SOV
			value = 25
		}		
	}

	#苏土关系
	SOV_dip_with_TUR = {
		allowed = {
			original_tag = SOV
		}
		enable = {
			has_idea = SOV_treaty_of_friendship_S_and_T
		}
		abort_when_not_enabled = yes
		ai_strategy = {
			type = befriend
			id = TUR
			value = 10
		}
	}

	TUR_diplomacy_with_SOV = {
		allowed = {
			original_tag = TUR
		}
		enable = {
			SOV = { has_idea = SOV_treaty_of_friendship_S_and_T }
		}
		abort_when_not_enabled = yes
		ai_strategy = {
			type = befriend
			id = SOV
			value = 10
		}
	}

	#中苏关系
	SOV_ignore_china = {
		reversed = yes
		allowed = {
			original_tag = SOV
		}
		enable = {
			NOT = { has_war_with = SOV }
			OR = {
				tag = MAN
				tag = SIK
				tag = MON
			}
		}

		ai_strategy = {
			type = befriend
			id = "SOV"
			value = 25
		}
	}

	china_ignore_SOV = {

		allowed = {
			OR = {
				original_tag = MAN
				original_tag = SIK
				original_tag = MON
			}
		}
		enable = {
			NOT = { has_war_with = SOV }
		}

		ai_strategy = {
			type = befriend
			id = SOV
			value = 25
		}
	}

	SOV_support_to_MAN = {
		allowed = {
			original_tag = SOV
		}
		enable = {
			MAN = { has_government = communism }
		}
		abort_when_not_enabled = yes
		ai_strategy = {
			type = send_lend_lease_desire
			id = MAN
			value = 25
		}
	}

	#苏伊关系
	SOV_ignore_PER = {
		allowed = {
			original_tag = SOV
		}
		enable = {
			NOT = { has_war_with = PER }
		}
		ai_strategy = {
			type = conquer
			id = PER
			value = 15
		}
	}

#军通

	SOV_ask_for_access_in_war = {
		reversed = yes

		allowed = {
			original_tag = SOV
		}

		enable = {
			DVL = {
				exists = yes
				is_major = yes
				is_subject = no
			}
			is_ai = yes
			NOT = {
				OR = {
					is_in_faction_with = SOV
					has_military_access_to = SOV
				}
			}
			has_war_together_with = DVL
		}
	
		ai_strategy = {
			type = diplo_action_desire
			id = "SOV"
			target = military_access
			value = 1000
		}
	}
