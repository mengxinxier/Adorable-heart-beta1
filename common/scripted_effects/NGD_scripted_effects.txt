#统一北美
NGD_unit_NA_effect = {
	set_cosmetic_tag = NGD_NA
}
#统一北美
NGD_unit_NA_super_event = {
	if = {
		limit = {
			has_government = communism
		}
		set_country_flag = super_event_NGD_NA
		set_country_flag = adorable_heart_Super_Event_Visible
		adorable_heart_fire_super_event = yes
	}
}
#经济恢复
NGD_Alleviating_the_Great_Depression = {
	custom_effect_tooltip = GER_economic_recovery_tt
	if = {
		limit = {
			has_idea = NGD_The_Great_Depression
		}
		swap_ideas = {
			remove_idea = NGD_The_Great_Depression
			add_idea = NGD_The_Great_Depression_1
		}
	}
	else_if = {
		limit = {
			has_idea = NGD_The_Great_Depression_1
		}
		swap_ideas = {
			remove_idea = NGD_The_Great_Depression_1
			add_idea = NGD_The_Great_Depression_2
		}
	}
	else_if = {
		limit = {
			has_idea = NGD_The_Great_Depression_2
		}
		swap_ideas = {
			remove_idea = NGD_The_Great_Depression_2
			add_idea = NGD_The_Great_Depression_3
		}
	}
	else_if = {
		limit = {
			has_idea = NGD_The_Great_Depression_3
		}
		swap_ideas = {
			remove_idea = NGD_The_Great_Depression_3
			add_idea = NGD_The_Great_Depression_4
		}
	}
	else_if = {
		limit = {
			has_idea = NGD_The_Great_Depression_4
		}
		swap_ideas = {
			remove_idea = NGD_The_Great_Depression_4
			add_idea = NGD_The_Great_Depression_5
		}
	}
	else_if = {
		limit = {
			has_idea = NGD_The_Great_Depression_5
		}
		swap_ideas = {
			remove_idea = NGD_The_Great_Depression_5
			add_idea = NGD_The_Great_Depression_6
		}
	}
	else_if = {
		limit = {
			has_idea = NGD_The_Great_Depression_6
		}
		swap_ideas = {
			remove_idea = NGD_The_Great_Depression_6
			add_idea = NGD_The_Great_Depression_7
		}
	}
	else_if = {
		limit = {
			has_idea = NGD_The_Great_Depression_7
		}
		remove_ideas = NGD_The_Great_Depression_7
	}
}
#计算影响力
NGD_Calculate_impact = {
	set_variable = {
		total_impact_of_NGD_CPC = POWER_OF_ganyu_SEATS
	}
	add_to_temp_variable = {
		total_impact_of_NGD_CPC = POWER_OF_hutao_SEATS
	}
	add_to_temp_variable = {
		total_impact_of_NGD_CPC = POWER_OF_keqing_SEATS
	}
	divide_variable = {
		var = POWER_OF_ganyu_SEATS
		value = total_impact_of_NGD_CPC
	}
	multiply_variable = {
		var = POWER_OF_ganyu_SEATS
		value = 100
	}
	divide_variable = {
		var = POWER_OF_hutao_SEATS
		value = total_impact_of_NGD_CPC
	}
	multiply_variable = {
		var = POWER_OF_hutao_SEATS
		value = 100
	}
	divide_variable = {
		var = POWER_OF_keqing_SEATS
		value = total_impact_of_NGD_CPC
	}
	multiply_variable = {
		var = POWER_OF_keqing_SEATS
		value = 100
	}
	NGD_Compute_seats_communism = yes
}
#计算席位
NGD_Compute_seats_communism = {
	set_variable = {
		POWER_OF_ganyu_SEATS = POWER_OF_ganyu
	}
	set_variable = {
		POWER_OF_hutao_SEATS = POWER_OF_hutao
	}
	set_variable = {
		POWER_OF_keqing_SEATS = 450
	}
	multiply_variable = {
		var = POWER_OF_ganyu_SEATS
		value = 4.5
	}
	multiply_variable = {
		var = POWER_OF_hutao_SEATS
		value = 4.5
	}
	round_variable = POWER_OF_ganyu_SEATS
	round_variable = POWER_OF_hutao_SEATS
	subtract_from_variable = {
		POWER_OF_keqing_SEATS = POWER_OF_ganyu_SEATS
	}
	subtract_from_variable = {
		POWER_OF_keqing_SEATS = POWER_OF_hutao_SEATS
	}
	#
	set_temp_variable = {
		red_end = POWER_OF_ganyu_SEATS
	}
	add_to_temp_variable = {
		red_end = POWER_OF_hutao_SEATS
	}
	#
	set_temp_variable = {
		dark_red_end = red_end
	}
	add_to_temp_variable = {
		dark_red_end = POWER_OF_keqing_SEATS
	}
	#
	clear_array = ROOT.NGD_legco_frame
	resize_array = {
		array = NGD_legco_frame
		value = 1
		size = POWER_OF_ganyu_SEATS
	}
	resize_array = {
		array = NGD_legco_frame
		value = 2
		size = red_end
	}
	resize_array = {
		array = NGD_legco_frame
		value = 3
		size = dark_red_end
	}
}
#革命战争
NGD_Revolutionary_war = {
	hidden_effect = {
		386 = {
			if = {
				limit = {
					is_controlled_by = ROOT
				}
				USN = {
					transfer_state =  PREV
				}
			}
		}
		ROOT = {
			every_core_state = {
				add_core_of = USN
			}
			transfer_units_fraction = {
				target = USN
				size = 0.1
				stockpile_ratio = 0.1
				army_ratio = 0.1
				navy_ratio = 0.1
				air_ratio = 0.1
				keep_unit_leaders_trigger = {
					NOT = {
						has_unit_leader_flag = my_test_flag
					}
				}
			}
			every_character = {
				limit = {
					or = {
						is_character = NGD_Business_Federation
						is_character = NGD_kristen
						is_character = NGD_Tse_ven_Soong
						is_character = NGD_hu_shih
						is_character = NGD_du_yuesheng
						is_character = NGD_wei_lihuang
						is_character = NGD_Xingqiu
						is_character = NGD_Jingyuan
						is_character = NGD_fuxuan
						is_character = NGD_Sushang
						is_character = NGD_Tingyun
						is_character = NGD_Kamisato_Ayato
						is_character = NGD_Kamisato_Ayaka
						is_character = NGD_Thoma
						is_character = NGD_Kaedehara_Kazuha
						is_character = NGD_empier_chongzhen
						is_character = NGD_Kaedehara_Kazuha
					}
				}
				set_nationality = USN
			}
			USN = {
				inherit_technology = ROOT
				set_politics = {
					ruling_party = democratic
				}
				promote_character = NGD_Business_Federation
			}
		}
	}
}