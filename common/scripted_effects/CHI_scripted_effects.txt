ROOT_get_in_the_competition_for_China_reunification = {
	custom_effect_tooltip = Participate_in_the_competition_for_China_reunification
	set_country_flag = Participate_in_the_competition_for_China_reunification
	every_state = {
		limit = {
			has_state_flag = is_whole_chinese_state_area
			not = { is_core_of = ROOT }
		}
		add_claim_by = ROOT
	}
	ROOT = {
		CHI = { enable_country_integration_50_compliance = yes }
		ROC = { enable_country_integration_50_compliance = yes }
		PRC = { enable_country_integration_50_compliance = yes }
		CCC = { enable_country_integration_50_compliance = yes }
		SHH = { enable_country_integration_50_compliance = yes }
		YUN = { enable_country_integration_50_compliance = yes }
		SIC = { enable_country_integration_50_compliance = yes }
		XSM = { enable_country_integration_50_compliance = yes }
		MAN = { enable_country_integration_50_compliance = yes }
		ROC = { enable_country_integration_50_compliance = yes }
		FUJ = { enable_country_integration_50_compliance = yes }
		WUH = { enable_country_integration_50_compliance = yes }
		MON = { enable_country_integration_80_compliance = yes }
		SIK = { enable_country_integration_80_compliance = yes }
		TIB = { enable_country_integration_80_compliance = yes }
		TRM = { enable_country_integration_80_compliance = yes }
	}
}

THIS_get_in_the_competition_for_China_reunification = {
	custom_effect_tooltip = Participate_in_the_competition_for_China_reunification
	set_country_flag = Participate_in_the_competition_for_China_reunification
	every_state = {
		limit = {
			has_state_flag = is_whole_chinese_state_area
			not = { is_core_of = PREV }
		}
		add_claim_by = PREV
	}
	CHI = { enable_country_integration_50_compliance = yes }
	ROC = { enable_country_integration_50_compliance = yes }
	PRC = { enable_country_integration_50_compliance = yes }
	CCC = { enable_country_integration_50_compliance = yes }
	SHH = { enable_country_integration_50_compliance = yes }
	YUN = { enable_country_integration_50_compliance = yes }
	SIC = { enable_country_integration_50_compliance = yes }
	XSM = { enable_country_integration_50_compliance = yes }
	MAN = { enable_country_integration_50_compliance = yes }
	ROC = { enable_country_integration_50_compliance = yes }
	FUJ = { enable_country_integration_50_compliance = yes }
	WUH = { enable_country_integration_50_compliance = yes }
	MON = { enable_country_integration_80_compliance = yes }
	SIK = { enable_country_integration_80_compliance = yes }
	TIB = { enable_country_integration_80_compliance = yes }
	TRM = { enable_country_integration_80_compliance = yes }
}

CHI_Stable_society = {
	custom_effect_tooltip = CHI_Stable_society_tt
	if = {
		limit = {
			has_idea = CHI_Political_instability_4
		}
		remove_ideas = CHI_Political_instability_4
		set_country_flag = Stable_society_done
	}
	if = {
		limit = {
			has_idea = CHI_Political_instability_3
		}
		swap_ideas = {
			remove_idea = CHI_Political_instability_3
			add_idea = CHI_Political_instability_4
		}
	}
	if = {
		limit = {
			has_idea = CHI_Political_instability_2
		}
		swap_ideas = {
			remove_idea = CHI_Political_instability_2
			add_idea = CHI_Political_instability_3
		}
	}
	if = {
		limit = {
			has_idea = CHI_Political_instability_1
		}
		swap_ideas = {
			remove_idea = CHI_Political_instability_1
			add_idea = CHI_Political_instability_2
		}
	}
}

CHI_Famine_relief = {
	custom_effect_tooltip = CHI_Famine_relief_tt
	if = {
		limit = {
			has_idea = CHI_famine_5
		}
		remove_ideas = {
			CHI_famine_5
		}
	}
	if = {
		limit = {
			has_idea = CHI_famine_4
		}
		swap_ideas = {
			remove_idea = CHI_famine_4
			add_idea = CHI_famine_5
		}
	}
	if = {
		limit = {
			has_idea = CHI_famine_3
		}
		swap_ideas = {
			remove_idea = CHI_famine_3
			add_idea = CHI_famine_4
		}
	}
	if = {
		limit = {
			has_idea = CHI_famine_2
		}
		swap_ideas = {
			remove_idea = CHI_famine_2
			add_idea = CHI_famine_3
		}
	}
	if = {
		limit = {
			has_idea = CHI_famine_1
		}
		swap_ideas = {
			remove_idea = CHI_famine_1
			add_idea = CHI_famine_2
		}
	}
}

CHI_Improve_industry = {
	custom_effect_tooltip = CHI_Improve_industry_tt
	if = {
		limit = {
			has_idea = CHI_Deformed_industry_5
		}
		remove_ideas = CHI_Deformed_industry_5
	}
	if = {
		limit = {
			has_idea = CHI_Deformed_industry_4
		}
		swap_ideas = {
			remove_idea = CHI_Deformed_industry_4
			add_idea = CHI_Deformed_industry_5
		}
	}
	if = {
		limit = {
			has_idea = CHI_Deformed_industry_3
		}
		swap_ideas = {
			remove_idea = CHI_Deformed_industry_3
			add_idea = CHI_Deformed_industry_4
		}
	}
	if = {
		limit = {
			has_idea = CHI_Deformed_industry_2
		}
		swap_ideas = {
			remove_idea = CHI_Deformed_industry_2
			add_idea = CHI_Deformed_industry_3
		}
	}
	if = {
		limit = {
			has_idea = CHI_Deformed_industry_1
		}
		swap_ideas = {
			remove_idea = CHI_Deformed_industry_1
			add_idea = CHI_Deformed_industry_2
		}
	}
}

CHI_huanjiexingzhengyali = {
	custom_effect_tooltip = CHI_huanjiexingzhengyali_tt
	if = {
		limit = {
			has_idea = ROC_crushed_country_4
		}
		remove_ideas = ROC_crushed_country_4
	}
	if = {
		limit = {
			has_idea = ROC_crushed_country_3
		}
		swap_ideas = {
			remove_idea = ROC_crushed_country_3
			add_idea = ROC_crushed_country_4
		}
	}
	if = {
		limit = {
			has_idea = ROC_crushed_country_2
		}
		swap_ideas = {
			remove_idea = ROC_crushed_country_2
			add_idea = ROC_crushed_country_3
		}
	}
	if = {
		limit = {
			has_idea = ROC_crushed_country_1
		}
		swap_ideas = {
			remove_idea = ROC_crushed_country_1
			add_idea = ROC_crushed_country_2
		}
	}
}

ROC_remove_all_ideas = {
	hidden_effect = {
		remove_ideas = {
			ROC_Changli_idea
			ROC_Wang_Jingwei_idea
			ROC_Wang_Jingwei_idea2
			ROC_Wang_Jingwei_idea3
			ROC_ChIang_Kaishek_idea
			ROC_ChIang_Kaishek_idea2
			ROC_Provisional_Senate_idea
		}
	}
}

ROC_Democratic_elections_vice_president = {
	hidden_effect = {
		if = {
			limit = {
				has_country_leader = {
					ruling_only = yes
					character = ROC_ChIang_Kaishek
				}
			}
			ROC_remove_all_ideas = yes
			add_ideas = ROC_ChIang_Kaishek_idea2
		}
		if = {
			limit = {
				has_country_leader = {
					ruling_only = yes
					character = ROC_Wang_Jingwei
				}
			}
			ROC_remove_all_ideas = yes
			add_ideas = ROC_Wang_Jingwei_idea3
		}
	}
}

PRC_remove_all_ideas = {
	hidden_effect = {
		remove_ideas = {
			PRC_lidesheng_idea
			PRC_cornered_fox_idea
			PRC_Shu_idea
			PRC_lin_miao_idea
			PRC_Yoshida_Yuko_idea
			PRC_Zheng_chaolin_idea
		}
	}
}

# 保持原政府傀儡-中国军阀
CHI_puppet_released_tag_and_old_govern = {
	var:tag_to_release = {
		hidden_effect = {
			set_variable = { old_govern_democratic_popularity = ROOT.party_popularity_100@democratic }
			clamp_variable = {
				var = old_govern_democratic_popularity
				min = 0
				max = 100
			}
			set_variable = { old_govern_communism_popularity = ROOT.party_popularity_100@communism }
			clamp_variable = {
				var = old_govern_communism_popularity
				min = 0
				max = 100
			}
			set_variable = { old_govern_neutrality_popularity = ROOT.party_popularity_100@neutrality }
			clamp_variable = {
				var = old_govern_neutrality_popularity
				min = 0
				max = 100
			}
			set_variable = { old_govern_fascism_popularity = ROOT.party_popularity_100@fascism }
			clamp_variable = {
				var = old_govern_fascism_popularity
				min = 0
				max = 100
			}
			if = {
				limit = {
					has_government = democratic
				}
				set_country_flag = old_govern_is_democratic_flag
			}
			if = {
				limit = {
					has_government = neutrality
				}
				set_country_flag = old_govern_is_neutral_flag
			}
			if = {
				limit = {
					has_government = communism
				}
				set_country_flag = old_govern_is_communistic_flag
			}
			if = {
				limit = {
					has_government = fascism
				}
				set_country_flag = old_govern_is_fascist_flag
			}
		}
	}
	custom_effect_tooltip = puppet_released_tag_and_old_govern_tt
	set_autonomy = {
		target = var:tag_to_release
		autonomous_state = China_Provinces
	}
	var:tag_to_release = {
		hidden_effect = {
			set_popularities = {
				democratic = old_govern_democratic_popularity
				fascism = old_govern_fascism_popularity
				communism = old_govern_communism_popularity
				neutrality = old_govern_neutrality_popularity
			}
			if = {
				limit = {
					has_country_flag = old_govern_is_democratic_flag
				}
				set_politics = { ruling_party = democratic }
			}
			if = {
				limit = {
					has_country_flag = old_govern_is_neutral_flag
				}
				set_politics = { ruling_party = neutrality }
			}
			if = {
				limit = {
					has_country_flag = old_govern_is_communistic_flag
				}
				set_politics = { ruling_party = communism }
			}
			if = {
				limit = {
					has_country_flag = old_govern_is_fascist_flag
				}
				set_politics = { ruling_party = fascism }
			}
		}
		drop_cosmetic_tag = yes
		mark_focus_tree_layout_dirty = yes
	}
}
