##ENG圣杯预设

	ENG_yiyuan_icon_frames = {   #圣杯议会的gui图变化+计算议会支持
		set_variable = {
			VAR_ENG_syy_support = VAR_ENG_syy_support_jc
		}
		add_to_variable = { 
			VAR_ENG_syy_support = VAR_ENG_syy_support_ewxg 
		}
		set_variable = {
			VAR_ENG_xyy_support = VAR_ENG_xyy_support_jc
		}	
		add_to_variable = { 
			VAR_ENG_xyy_support = ENG_VAR_ewzc_xyyxw  
		}
		add_to_variable = { 
			VAR_ENG_xyy_support = ENG_VAR_ewzc_dqzcl  
		}
		add_to_variable = { 
			VAR_ENG_xyy_support = VAR_ENG_xyy_support_ewxg 
		}
		VAR_ENG_syy_support_clamp = yes
		VAR_ENG_xyy_support_clamp = yes
		#图片变化
		set_temp_variable = { ENG_syy_support_temp = VAR_ENG_syy_support }
		divide_temp_variable = { ENG_syy_support_temp = VAR_ENG_syy_support_total }
		multiply_temp_variable = { ENG_syy_support_temp = 21 }
		if = {
			limit = { check_variable = { ENG_syy_support_temp > 0 } }
			clamp_temp_variable = {
				var = ENG_syy_support_temp
				min = 1
				max = 21
			}
		}
		else = {
			set_temp_variable = { ENG_syy_support_temp = 1 }
		}
		set_variable = { 
			ENG_current_shangyiyuan_icon_frame = ENG_syy_support_temp 
		}

		set_temp_variable = { ENG_xyy_support_temp = VAR_ENG_xyy_support }
		divide_temp_variable = { ENG_xyy_support_temp = VAR_ENG_xyy_support_total }
		multiply_temp_variable = { ENG_xyy_support_temp = 21 }
		if = {
			limit = { check_variable = { ENG_xyy_support_temp > 0 } }
			clamp_temp_variable = {
				var = ENG_xyy_support_temp
				min = 1
				max = 21
			}
		}
		else = {
			set_temp_variable = { ENG_xyy_support_temp = 1 }		
		}
		set_variable = {
			ENG_current_xiayiyuan_icon_frame = ENG_xyy_support_temp 
		}
	}
	VAR_ENG_wjcd_clamp = { #限制大萧条危机程度的大小
		clamp_variable = {
			var = VAR_ENG_wjcd
			min = 0
			max = 100
		}
	}
	VAR_ENG_syrs_clamp = {  #限制大萧条失业人数的大小
		clamp_variable = {
			var = VAR_ENG_syrs
			min = 0
			max = 9999
		}
	}
	VAR_ENG_syy_support_clamp = {  #限制上议院(贵族院)支持
		clamp_variable = {
			var = VAR_ENG_syy_support
			min = 0
			max = 120
		}
	}
	VAR_ENG_xyy_support_clamp = {  #限制下议院(平民院)支持
		clamp_variable = {
			var = VAR_ENG_xyy_support
			min = 0
			max = 600
		}
	}
	VAR_ENG_jisuan_influence_jijindu = { #影响力和激进度相关计算合集
		VAR_ENG_all_influence_clamp = yes
		VAR_ENG_all_jijindu_clamp = yes
		ENG_jisuan_all_support = yes
		ENG_jisuan_VAR_ewzc_dqzcl = yes
	}
	VAR_ENG_all_influence_clamp = { #限制各党派影响力
		clamp_variable = { #限制工党-保守党联盟支持度
			var = ENG_gongdang_baoshoudang_influence
			min = 0
			max = 200
		}
		clamp_variable = { #限制联合阵线支持度
			var = ENG_lianhezhenxian_influence
			min = 0
			max = 200
		}
		clamp_variable = { #限制圣杯皇室支持度
			var = ENG_sbhs_influence
			min = 0
			max = 200
		}
		clamp_variable = { #限制前进同盟支持度
			var = ENG_qjlm_influence
			min = 0
			max = 200
		}
	}
	VAR_ENG_all_jijindu_clamp  = { #限制各党派激进度
		clamp_variable = { #限制工党-保守党联盟激进度
			var = ENG_gongdang_baoshoudang_jijindu
			min = 0
			max = 100
		}
		clamp_variable = { #限制联合阵线激进度
			var = ENG_lianhezhenxian_jijindu
			min = 0
			max = 100
		}
		clamp_variable = { #限制圣杯皇室激进度
			var = ENG_sbhs_jijindu
			min = 0
			max = 100
		}
		clamp_variable = { #限制前进同盟激进度
			var = ENG_qjlm_jijindu
			min = 0
			max = 100
		}
	}
	ENG_jisuan_all_support = {  #计算各党派支持率
	 #计算各党派总影响力
		set_variable = {
			VAR_ENG_all_influence = ENG_lianhezhenxian_influence
		}
		add_to_variable = { 
			VAR_ENG_all_influence = ENG_gongdang_baoshoudang_influence  
		}
		add_to_variable = { 
			VAR_ENG_all_influence =  ENG_sbhs_influence  
		}
		add_to_variable = { 
			VAR_ENG_all_influence = ENG_qjlm_influence  
		}
	 #计算各党派支持
		set_variable = {
			ENG_lianhezhenxian_support = ENG_lianhezhenxian_influence
		}
		divide_variable = { 
			ENG_lianhezhenxian_support = VAR_ENG_all_influence 
		}
		
		set_variable = {
			ENG_gongdang_baoshoudang_support = ENG_gongdang_baoshoudang_influence
		}
		divide_variable = { 
			ENG_gongdang_baoshoudang_support = VAR_ENG_all_influence 
		}
		
		set_variable = {
			ENG_sbhs_support = ENG_sbhs_influence
		}
		divide_variable = { 
			ENG_sbhs_support = VAR_ENG_all_influence 
		}
		
		set_variable = {
			ENG_qjlm_support = ENG_qjlm_influence
		}
		divide_variable = { 
			ENG_qjlm_support = VAR_ENG_all_influence 
		}
	}
	ENG_jisuan_VAR_dxtdyx = { #计算大萧条的影响
		if = {
			limit = {
				has_country_flag = FLAG_ENG_daxiaotiao
			}
			set_variable = {
				ENG_VAR_dxtdyx_1 = VAR_ENG_wjcd
			}
		
			multiply_variable = {
				var = ENG_VAR_dxtdyx_1
				value = -0.01
			}
		
			set_variable = {
				ENG_VAR_dxtdyx_2 = VAR_ENG_syrs
			}
		
			multiply_variable = {  #
				var = ENG_VAR_dxtdyx_2
				value = 0.002
			}
		
			set_variable = { #大萧条影响
				ENG_VAR_dxtdyx = ENG_VAR_dxtdyx_1
			}
		
			multiply_variable = {
				var = ENG_VAR_dxtdyx
				value = ENG_VAR_dxtdyx_2
			}
		}
	}
	ENG_panduan_yxgyh = { #判断有限国有化民族精神
		if = {
			limit = { 
				has_idea = ENG_idea_yxgyh
			}
			swap_ideas = {
				remove_idea = ENG_idea_yxgyh
				add_idea = ENG_idea_yxgyh_2
			} 
		}
		else_if = {
			limit = { 
				has_idea = ENG_idea_yxgyh_2
			}
			swap_ideas = {
				remove_idea = ENG_idea_yxgyh_2
				add_idea = ENG_idea_yxgyh_3
			} 
			set_country_flag = FLAG_ENG_complet_gycz_gyh_2
		}
		else_if = {
			limit = { 
				has_idea = ENG_idea_yxgyh_3
			}
			swap_ideas = {
				remove_idea = ENG_idea_yxgyh_3
				add_idea = ENG_idea_yxgyh_4
			} 
		}
		else_if = {
			limit = { 
				has_idea = ENG_idea_yxgyh_4
			}
			swap_ideas = {
				remove_idea = ENG_idea_yxgyh_4
				add_idea = ENG_idea_yxgyh_5
			} 
		}
	}
	ENG_panduan_ldqy = { #判断垄断企业民族精神
		if = {
			limit = { 
				has_idea = ENG_idea_ldqy
			}
			swap_ideas = {
				remove_idea = ENG_idea_ldqy
				add_idea = ENG_idea_ldqy_2
			} 
			custom_effect_tooltip = ENG_tooltip_VAR_exincome_modifier_add_2
		}
		else_if = {
			limit = { 
				has_idea = ENG_idea_ldqy_2
			}
			swap_ideas = {
				remove_idea = ENG_idea_ldqy_2
				add_idea = ENG_idea_ldqy_3
			} 
			custom_effect_tooltip = ENG_tooltip_VAR_exincome_modifier_add_2
			set_country_flag = FLAG_ENG_complet_gycz_gyh_2
		}
		else_if = {
			limit = { 
				has_idea = ENG_idea_ldqy_3
			}
			swap_ideas = {
				remove_idea = ENG_idea_ldqy_3
				add_idea = ENG_idea_ldqy_4
			} 
			custom_effect_tooltip = ENG_tooltip_VAR_exincome_modifier_add_2
		}
		else_if = {
			limit = { 
				has_idea = ENG_idea_ldqy_4
			}
			swap_ideas = {
				remove_idea = ENG_idea_ldqy_4
				add_idea = ENG_idea_ldqy_5
			} 
			custom_effect_tooltip = ENG_tooltip_VAR_exincome_modifier_add_2
		}
	}
	ENG_jisuan_jbsc = { #军备生产相关计算
		set_variable = { #hcp花费
			ENG_VAR_jbsc_hcphf = 6
		}
		multiply_variable = {
			var = ENG_VAR_jbsc_hcphf
			value = VAR_ENG_jhgs_gm #军火公司规模
		}
		set_variable = {
			ENG_VAR_jbsc_hcphf_2 = ENG_VAR_jbsc_hcphf
		}
		multiply_variable = {
			var = ENG_VAR_jbsc_hcphf_2
			value = -1
		}

		set_variable = {
			ENG_VAR_jbsc_bbzb = 400
		}
		multiply_variable = {
			var = ENG_VAR_jbsc_bbzb
			value = VAR_ENG_jhgs_gm
		}
		set_variable = {
			ENG_VAR_jbsc_hp = 50
		}
		multiply_variable = {
			var = ENG_VAR_jbsc_hp
			value = VAR_ENG_jhgs_gm
		}
		set_variable = {
			ENG_VAR_jbsc_zyzb = 50
		}
		multiply_variable = {
			var = ENG_VAR_jbsc_zyzb
			value = VAR_ENG_jhgs_gm
		}
		set_variable = {
			ENG_VAR_jbsc_kc = 80
		}
		multiply_variable = {
			var = ENG_VAR_jbsc_kc
			value = VAR_ENG_jhgs_gm
		}

		set_variable = {
			ENG_VAR_jbsc_ph = 8
		}
		multiply_variable = {
			var = ENG_VAR_jbsc_ph
			value = VAR_ENG_jhgs_gm
		}
		set_variable = {
			ENG_VAR_jbsc_bte = 8
		}
		multiply_variable = {
			var = ENG_VAR_jbsc_bte
			value = VAR_ENG_jhgs_gm
		}
		set_variable = {
			ENG_VAR_jbsc_sy = 8
		}
		multiply_variable = {
			var = ENG_VAR_jbsc_sy
			value = VAR_ENG_jhgs_gm
		}
		set_variable = {
			ENG_VAR_jbsc_ds = 4
		}
		multiply_variable = {
			var = ENG_VAR_jbsc_ds
			value = VAR_ENG_jhgs_gm
		}
		set_variable = {
			ENG_VAR_jbsc_zo = 4
		}
		multiply_variable = {
			var = ENG_VAR_jbsc_zo
			value = VAR_ENG_jhgs_gm
		}
		set_variable = {
			ENG_VAR_jbsc_hlfks = 4
		}
		multiply_variable = {
			var = ENG_VAR_jbsc_hlfks
			value = VAR_ENG_jhgs_gm
		}
		set_variable = {
			ENG_VAR_jbsc_at = 50
		}
		multiply_variable = {
			var = ENG_VAR_jbsc_at
			value = VAR_ENG_jhgs_gm
		}
		set_variable = {
			ENG_VAR_jbsc_wks = 20
		}
		multiply_variable = {
			var = ENG_VAR_jbsc_wks
			value = VAR_ENG_jhgs_gm
		}
		set_variable = {
			ENG_VAR_jbsc_szj = 14
		}
		multiply_variable = {
			var = ENG_VAR_jbsc_szj
			value = VAR_ENG_jhgs_gm
		}
		set_variable = {
			ENG_VAR_jbsc_pdlg = 7
		}
		multiply_variable = {
			var = ENG_VAR_jbsc_pdlg
			value = VAR_ENG_jhgs_gm
		}

	}
    #金融相关
		ENG_panding_thpz = { #判定通胀影响
			hidden_effect = {
				if = {
					limit = {
						check_variable = { 
							VAR_ENG_tzl > 5
						}	
					}
					ENG_jisuan_VAR_thpzl = yes
					add_ideas = ENG_idea_thpz
				}
				else_if = {
					limit = {
						AND = {
							check_variable = { 
								VAR_ENG_tzl < 6
							}
							check_variable = { 
								VAR_ENG_tzl > -6
							}		
						}
					}
					set_variable = { ENG_VAR_thpzl_1 = 0 }
					set_variable = { ENG_VAR_thjsl_1 = 0 }
					remove_ideas = ENG_idea_thpz
					remove_ideas = ENG_idea_thjs
				}
				else_if = {
					limit = {
						check_variable = { 
							VAR_ENG_tzl < -5
						}	
					}
					ENG_jisuan_VAR_thjsl = yes
					add_ideas = ENG_idea_thjs
				}
			}
		}

		ENG_jisuan_VAR_thpzl = { #计算通胀的影响
			set_variable = {
				ENG_VAR_thpzl_1 = VAR_ENG_tzl
			}
			add_to_variable = { 
				ENG_VAR_thpzl_1 = -5
			}
			multiply_variable = {
				var = ENG_VAR_thpzl_1
				value = -0.03
			}
		}
		ENG_jisuan_VAR_thjsl = { #计算通缩的影响
			set_variable = {
				ENG_VAR_thjsl_1 = VAR_ENG_tzl
			}
			add_to_variable = { 
				ENG_VAR_thjsl_1 = 5
			}
			multiply_variable = {
				var = ENG_VAR_thjsl_1
				value = 0.03
			}
		}
		ENG_jisuan_sbwggz_lixi_1 = { #计算全年债券利息
			set_variable = {
				ENG_VAR_sbwggz_lixi = VAR_ENG_sbwggz_fxl
			}	
			multiply_variable = {
				var = ENG_VAR_sbwggz_lixi
				value = VAR_ENG_sbwggz_ll
			}
			multiply_variable = {
				var = ENG_VAR_sbwggz_lixi
				value = -1
			}
		}
		ENG_jisuan_sbwggz_lixi_2 = { #计算半年债券利息
			set_variable = {
				ENG_VAR_sbwggz_lixi = VAR_ENG_sbwggz_fxl
			}	
			multiply_variable = {
				var = ENG_VAR_sbwggz_lixi
				value = VAR_ENG_sbwggz_ll
			}
			multiply_variable = {
				var = ENG_VAR_sbwggz_lixi
				value = -0.5
			}
		}
		ENG_panding_sbwggz_cfrw = { #判定是否触发债券到期任务
			if = {
				limit = {
					NOT = {
						has_country_flag = FLAG_ENG_sbwggz_cfrw
					}
				}
				activate_mission = ENG_mission_sbwggz_daoqi
			}
		}

	ENG_jisuan_VAR_ewzc_xyyxw = { #计算由下议院席位获得的额外支持
		if = {
			limit = {
				has_country_flag = FLAG_ENG_gdbsd_sx
			}
			set_variable = {
				ENG_VAR_ewzc_xyyxw = VAR_ENG_gdbsd_xw
			}
			multiply_variable = {
				var = ENG_VAR_ewzc_xyyxw
				value = 0.2
			}
		}
		else_if = {
			limit = {
				has_country_flag = FLAG_ENG_lhzx_sx
			}
			set_variable = {
				ENG_VAR_ewzc_xyyxw = VAR_ENG_lhzx_xw
			}
			multiply_variable = {
				var = ENG_VAR_ewzc_xyyxw
				value = 0.2
			}
		}
		else_if = {
			limit = {
				has_country_flag = FLAG_ENG_sbhs_sx
			}
			set_variable = {
				ENG_VAR_ewzc_xyyxw = VAR_ENG_sbhs_xw
			}
			multiply_variable = {
				var = ENG_VAR_ewzc_xyyxw
				value = 0.2
			}
		}
		else_if = {
			limit = {
				has_country_flag = FLAG_ENG_qjlm_sx
			}
			set_variable = {
				ENG_VAR_ewzc_xyyxw = VAR_ENG_qjlm_xw
			}
			multiply_variable = {
				var = ENG_VAR_ewzc_xyyxw
				value = 0.2
			}
		}
		round_variable = ENG_VAR_ewzc_xyyxw
		ENG_yiyuan_icon_frames = yes
	}
	ENG_jisuan_VAR_ewzc_dqzcl = { #计算由当前支持率获得的额外支持
		if = {
			limit = {
				has_country_flag = FLAG_ENG_gdbsd_sx
			}
			set_variable = {
				ENG_VAR_ewzc_dqzcl = ENG_gongdang_baoshoudang_support
			}
			
		}
		else_if = {
			limit = {
				has_country_flag = FLAG_ENG_lhzx_sx
			}
			set_variable = {
				ENG_VAR_ewzc_dqzcl = ENG_lianhezhenxian_support
			}
			
		}
		else_if = {
			limit = {
				has_country_flag = FLAG_ENG_sbhs_sx
			}
			set_variable = {
				ENG_VAR_ewzc_dqzcl = ENG_sbhs_support
			}
			
		}
		else_if = {
			limit = {
				has_country_flag = FLAG_ENG_qjlm_sx
			}
			set_variable = {
				ENG_VAR_ewzc_dqzcl = ENG_qjlm_support
			}
			
		}
		multiply_variable = {
			var = ENG_VAR_ewzc_dqzcl
			value = 100
		}
		round_variable = ENG_VAR_ewzc_dqzcl
		ENG_yiyuan_icon_frames = yes
	}
	ENG_jisuan_bop_zyzd = { #计算bop中左翼主导的收益
		set_variable = {
			ENG_VAR_ewzc_xyyxw_zyzd = VAR_ENG_lhzx_xw
		}
		multiply_variable = {
			var = ENG_VAR_ewzc_xyyxw_zyzd
			value = 0.2
		}
		set_variable = {
			ENG_VAR_ewzc_dqzcl_zyzd = ENG_lianhezhenxian_support
		}
		multiply_variable = {
			var = ENG_VAR_ewzc_dqzcl_zyzd
			value = 100
		}
		round_variable = ENG_VAR_ewzc_dqzcl_zyzd
		round_variable = ENG_VAR_ewzc_xyyxw_zyzd
		set_variable = {
			ENG_VAR_ewzc_zyzd = ENG_VAR_ewzc_dqzcl_zyzd
		}
		add_to_variable = {
			ENG_VAR_ewzc_zyzd = ENG_VAR_ewzc_xyyxw_zyzd
		}
	}

	ENG_sheding_yhzc_85_300 = {  #议案初始支持为上议院85，下议院300，并计算额外支持
		set_variable = {
			VAR_ENG_syy_support_jc = 85
		}
		set_variable = {
			VAR_ENG_xyy_support_jc = 300
		}	
		ENG_yiyuan_icon_frames = yes
	}
	ENG_sheding_yhzc_75_285 = {  #议案初始支持为上议院75，下议院285，并计算额外支持
		set_variable = {
			VAR_ENG_syy_support_jc = 75
		}
		set_variable = {
			VAR_ENG_xyy_support_jc = 285
		}	
		ENG_yiyuan_icon_frames = yes
	}
	ENG_sheding_yhzc_65_265 = {  #议案初始支持为上议院65，下议院265，并计算额外支持
		set_variable = {
			VAR_ENG_syy_support_jc = 65
		}
		set_variable = {
			VAR_ENG_xyy_support_jc = 265
		}	
		ENG_yiyuan_icon_frames = yes
	}
	ENG_sheding_yhzc_55_285 = {  #议案初始支持为上议院55，下议院285，并计算额外支持
		set_variable = {
			VAR_ENG_syy_support_jc = 55
		}
		set_variable = {
			VAR_ENG_xyy_support_jc = 285
		}	
		ENG_yiyuan_icon_frames = yes
	}
	ENG_sheding_yhzc_75_265 = {  #议案初始支持为上议院75，下议院265，并计算额外支持
		set_variable = {
			VAR_ENG_syy_support_jc = 75
		}
		set_variable = {
			VAR_ENG_xyy_support_jc = 265
		}	
		ENG_yiyuan_icon_frames = yes
	}

	ENG_jisuan_xuanju_jieguo = {  #计算选举结果
		clr_country_flag = FLAG_ENG_gdbsd_sx
		clr_country_flag = FLAG_ENG_lhzx_sx
		clr_country_flag = FLAG_ENG_sbhs_sx
		clr_country_flag = FLAG_ENG_qjlm_sx

		if = { #工党保守党胜选
			limit = {
				check_variable = { 
					ENG_gongdang_baoshoudang_support > ENG_lianhezhenxian_support 
				}
				check_variable = { 
					ENG_gongdang_baoshoudang_support > ENG_sbhs_support 
				}
				check_variable = { 
					ENG_gongdang_baoshoudang_support > ENG_qjlm_support 
				}
			}
			set_country_flag = FLAG_ENG_gdbsd_sx
		}
		else_if = { #联合阵线胜选
			limit = {
				check_variable = { 
					ENG_lianhezhenxian_support > ENG_gongdang_baoshoudang_support 
				}
				check_variable = { 
					ENG_lianhezhenxian_support > ENG_sbhs_support 
				}
				check_variable = { 
					ENG_lianhezhenxian_support > ENG_qjlm_support 
				}
			}
			set_country_flag = FLAG_ENG_gdbsd_sx
		}
		else_if = { #圣杯皇室胜选
			limit = {
				check_variable = { 
					ENG_sbhs_support > ENG_lianhezhenxian_support 
				}
				check_variable = { 
					ENG_sbhs_support > ENG_gongdang_baoshoudang_support 
				}
				check_variable = { 
					ENG_sbhs_support > ENG_qjlm_support 
				}
			}
			set_country_flag = FLAG_ENG_gdbsd_sx
		}
		else_if = { #前进联盟胜选
			limit = {
				check_variable = { 
					ENG_qjlm_support > ENG_lianhezhenxian_support 
				}
				check_variable = { 
					ENG_qjlm_support > ENG_sbhs_support 
				}
				check_variable = { 
					ENG_qjlm_support > ENG_gongdang_baoshoudang_support 
				}
			}
			set_country_flag = FLAG_ENG_gdbsd_sx
		}


	}
	ENG_jisuan_xyy_xiweifenpei = {  #下议院席位分配计算
		set_variable = {
			VAR_ENG_gdbsd_xw = 590
		}
		multiply_variable = {
			var = VAR_ENG_gdbsd_xw
			value = ENG_gongdang_baoshoudang_support
		}

		set_variable = {
			VAR_ENG_lhzx_xw = 590
		}
		multiply_variable = {
			var = VAR_ENG_lhzx_xw
			value = ENG_lianhezhenxian_support
		}

		set_variable = {
			VAR_ENG_sbhs_xw = 590
		}
		multiply_variable = {
			var = VAR_ENG_sbhs_xw
			value = ENG_sbhs_support
		}

		set_variable = {
			VAR_ENG_qjlm_xw = 590
		}
		multiply_variable = {
			var = VAR_ENG_qjlm_xw
			value = ENG_qjlm_support
		}
		round_variable = VAR_ENG_gdbsd_xw
		round_variable = VAR_ENG_lhzx_xw
		round_variable = VAR_ENG_sbhs_xw
		round_variable = VAR_ENG_qjlm_xw
		ENG_jisuan_VAR_ewzc_xyyxw = yes
	}

#执政党相关预设
	ENG_yushe_zzd_influence_add_10 = { #执政党影响力增加10
		if = {
			limit = {
				has_country_flag = FLAG_ENG_gdbsd_sx
			}
			add_to_variable = { 
				ENG_gongdang_baoshoudang_influence = 10 
			}			
		}
		else_if = {
			limit = {
				has_country_flag = FLAG_ENG_lhzx_sx
			}
			add_to_variable = { 
				ENG_lianhezhenxian_influence = 10 
			}	
		}
		else_if = {
			limit = {
				has_country_flag = FLAG_ENG_sbhs_sx
			}
			add_to_variable = { 
				ENG_sbhs_influence = 10 
			}	
		}
		else_if = {
			limit = {
				has_country_flag = FLAG_ENG_qjlm_sx
			}
			add_to_variable = { 
				ENG_qjlm_influence = 10 
			}	
		}
		VAR_ENG_jisuan_influence_jijindu = yes		
	}
	ENG_yushe_zzd_influence_add_5 = { #执政党影响力增加5
		if = {
			limit = {
				has_country_flag = FLAG_ENG_gdbsd_sx
			}
			add_to_variable = { 
				ENG_gongdang_baoshoudang_influence = 5 
			}			
		}
		else_if = {
			limit = {
				has_country_flag = FLAG_ENG_lhzx_sx
			}
			add_to_variable = { 
				ENG_lianhezhenxian_influence = 5 
			}	
		}
		else_if = {
			limit = {
				has_country_flag = FLAG_ENG_sbhs_sx
			}
			add_to_variable = { 
				ENG_sbhs_influence = 5
			}	
		}
		else_if = {
			limit = {
				has_country_flag = FLAG_ENG_qjlm_sx
			}
			add_to_variable = { 
				ENG_qjlm_influence = 5
			}	
		}
		VAR_ENG_jisuan_influence_jijindu = yes		
	}
	ENG_yushe_zzd_influence_add_1 = { #执政党影响力增加1
		if = {
			limit = {
				has_country_flag = FLAG_ENG_gdbsd_sx
			}
			add_to_variable = { 
				ENG_gongdang_baoshoudang_influence = 1 
			}			
		}
		else_if = {
			limit = {
				has_country_flag = FLAG_ENG_lhzx_sx
			}
			add_to_variable = { 
				ENG_lianhezhenxian_influence = 1 
			}	
		}
		else_if = {
			limit = {
				has_country_flag = FLAG_ENG_sbhs_sx
			}
			add_to_variable = { 
				ENG_sbhs_influence = 1
			}	
		}
		else_if = {
			limit = {
				has_country_flag = FLAG_ENG_qjlm_sx
			}
			add_to_variable = { 
				ENG_qjlm_influence = 1
			}	
		}
		VAR_ENG_jisuan_influence_jijindu = yes		
	}
	ENG_yushe_zzd_influence_jian_10 = { #执政党影响力减少10
		if = {
			limit = {
				has_country_flag = FLAG_ENG_gdbsd_sx
			}
			add_to_variable = { 
				ENG_gongdang_baoshoudang_influence = -10 
			}			
		}
		else_if = {
			limit = {
				has_country_flag = FLAG_ENG_lhzx_sx
			}
			add_to_variable = { 
				ENG_lianhezhenxian_influence = -10 
			}	
		}
		else_if = {
			limit = {
				has_country_flag = FLAG_ENG_sbhs_sx
			}
			add_to_variable = { 
				ENG_sbhs_influence = -10 
			}	
		}
		else_if = {
			limit = {
				has_country_flag = FLAG_ENG_qjlm_sx
			}
			add_to_variable = { 
				ENG_qjlm_influence = -10 
			}	
		}
		VAR_ENG_jisuan_influence_jijindu = yes		
	}
	ENG_yushe_zzd_influence_jian_5 = { #执政党影响力减少5
		if = {
			limit = {
				has_country_flag = FLAG_ENG_gdbsd_sx
			}
			add_to_variable = { 
				ENG_gongdang_baoshoudang_influence = -5 
			}			
		}
		else_if = {
			limit = {
				has_country_flag = FLAG_ENG_lhzx_sx
			}
			add_to_variable = { 
				ENG_lianhezhenxian_influence = -5 
			}	
		}
		else_if = {
			limit = {
				has_country_flag = FLAG_ENG_sbhs_sx
			}
			add_to_variable = { 
				ENG_sbhs_influence = -5
			}	
		}
		else_if = {
			limit = {
				has_country_flag = FLAG_ENG_qjlm_sx
			}
			add_to_variable = { 
				ENG_qjlm_influence = -5
			}	
		}
		VAR_ENG_jisuan_influence_jijindu = yes		
	}
	ENG_jiesuan_zzd_influence_monthly = { #每月执政党影响力结算
		if = {
			limit = {
				has_country_flag = FLAG_ENG_gdbsd_sx
			}
			add_to_variable = { 
				ENG_gongdang_baoshoudang_influence = VAR_ENG_zzd_infulunce_monthly
			}			
		}
		else_if = {
			limit = {
				has_country_flag = FLAG_ENG_lhzx_sx
			}
			add_to_variable = { 
				ENG_lianhezhenxian_influence = VAR_ENG_zzd_infulunce_monthly 
			}	
		}
		else_if = {
			limit = {
				has_country_flag = FLAG_ENG_sbhs_sx
			}
			add_to_variable = { 
				ENG_sbhs_influence = VAR_ENG_zzd_infulunce_monthly
			}	
		}
		else_if = {
			limit = {
				has_country_flag = FLAG_ENG_qjlm_sx
			}
			add_to_variable = { 
				ENG_qjlm_influence = VAR_ENG_zzd_infulunce_monthly
			}	
		}
		VAR_ENG_jisuan_influence_jijindu = yes		
	}



#议院gui
 #席位计算
	ENG_Seat_calculation = {
		set_temp_variable = {
			##工党
			red_total = ROOT.VAR_ENG_lhzx_xw
		}
		set_temp_variable = {
			##王党
			yellow_total = ROOT.VAR_ENG_sbhs_xw
		}
		set_temp_variable = {
			##保守党
			blue_total = ROOT.VAR_ENG_gdbsd_xw
		}
		set_temp_variable = {
			##圣杯前进联盟
			green_total = ROOT.VAR_ENG_qjlm_xw
		}
		set_temp_variable = {
			red_end = red_total
		}
		set_temp_variable = {
			blue_end = red_total
		}
		add_to_temp_variable = {
			blue_end = blue_total
		}
		set_temp_variable = {
			yellow_end = blue_end
		}
		add_to_temp_variable = {
			yellow_end = yellow_total
		}
		set_temp_variable = {
			green_end = yellow_end
		}
		add_to_temp_variable = {
			green_end = green_total
		}
		#数组
		clear_array = ROOT.ENG_hounse_of_commons_window_array
		resize_array = {
			array = ENG_hounse_of_commons_window_array
			value = 1
			size = red_end
		}
		resize_array = {
			array = ENG_hounse_of_commons_window_array
			value = 3
			size = blue_end
		}
		resize_array = {
			array = ENG_hounse_of_commons_window_array
			value = 2
			size = yellow_end
		}
		resize_array = {
			array = ENG_hounse_of_commons_window_array
			value = 7
			size = green_end
		}
		resize_array = {
			array = ENG_hounse_of_commons_window_array
			value = 7
			size = 600
		}
		ENG_Support_rate_pie_chart_calculation = yes
		ENG_Support_rate_progress_bar_calculation = yes
	}

 #支持率饼图计算
	ENG_Support_rate_pie_chart_calculation = {
		set_variable = {
			Labour_party_support_var = ROOT.ENG_lianhezhenxian_support
		}
		set_variable = {
			Conservative_party_support_var = ROOT.Labour_party_support_var
		}
		add_to_variable = {
			Conservative_party_support_var = ENG_gongdang_baoshoudang_support
		}
		set_variable = {
			Kings_Party_support_var = ROOT.Conservative_party_support_var
		}
		add_to_variable = {
			Kings_Party_support_var = ENG_sbhs_support
		}
		multiply_variable = {
			var = Labour_party_support_var
			value = 100
		}
		multiply_variable = {
			var = Conservative_party_support_var
			value = 100
		}
		multiply_variable = {
			var = Kings_Party_support_var
			value = 100
		}
		set_variable = {
			Holy_Grail_Forward_Alliance_support_var = 100
		}
	}

 #支持率进度条计算
	ENG_Support_rate_progress_bar_calculation = {
		set_variable = {
			Labour_party_Support_rate_var = ROOT.ENG_lianhezhenxian_support
		}
		multiply_variable = {
			var = Labour_party_Support_rate_var
			value = 100
		}
		set_variable = {
			Conservative_party_Support_rate_var = ROOT.ENG_gongdang_baoshoudang_support
		}
		multiply_variable = {
			var = Conservative_party_Support_rate_var
			value = 100
		}
		set_variable = {
			Kings_Party_Support_rate_var = ROOT.ENG_sbhs_support
		}
		multiply_variable = {
			var = Kings_Party_Support_rate_var
			value = 100
		}
		set_variable = {
			Holy_Grail_Forward_Alliance_Support_rate_var = ROOT.ENG_qjlm_support
		}
		multiply_variable = {
			var = Holy_Grail_Forward_Alliance_Support_rate_var
			value = 100
		}
		set_variable = {
			Conservative_party_Support_rate_progress_x = Labour_party_Support_rate_var
		}
		multiply_variable = {
			var = Conservative_party_Support_rate_progress_x
			value = 10
		}
		add_to_variable = {
			Conservative_party_Support_rate_progress_x = 300
		}
		set_variable = {
			Kings_Party_Support_rate_progress_x = Conservative_party_Support_rate_var
		}
		multiply_variable = {
			var = Kings_Party_Support_rate_progress_x
			value = 10
		}
		add_to_variable = {
			Kings_Party_Support_rate_progress_x = Conservative_party_Support_rate_progress_x
		}
		set_variable = {
			Holy_Grail_Forward_Alliance_Support_rate_progress_x = Kings_Party_Support_rate_var
		}
		multiply_variable = {
			var = Holy_Grail_Forward_Alliance_Support_rate_progress_x
			value = 10
		}
		add_to_variable = {
			Holy_Grail_Forward_Alliance_Support_rate_progress_x = Kings_Party_Support_rate_progress_x
		}
	}

 #加入历史议案
	ENG_add_to_his_motion_and_change_to_none = {
		add_to_array = {
			ENG_Parliament_past_motion = ENG_Parliament_num_of_motion_going
		}
		add_to_array = {
			ENG_Parliament_past_motion_state^ENG_Parliament_past_motion_i = ENG_Parliament_motion_going^ENG_Parliament_num_of_motion_going
		}
		set_variable = {
			ENG_Parliament_motion_going^ENG_Parliament_num_of_motion_going = 0
		}
		set_variable = {
			ENG_Parliament_num_of_motion_going = 0
		}
	}	

#
#圣杯解体
ENG_JIETI = {
	hidden_effect = {
		every_country = {
			limit = {
				is_in_faction_with = ENG
				not = {
					tag = ENG
				}
			}
			set_country_flag = former_eng_country
			add_to_temp_array = {
				global.former_eng_members = THIS
			}
		}
		ENG = {
			dismantle_faction = yes
			set_country_flag = has_capitulated
		}
		ENG = {
			every_subject_country = {
				PREV = {
					set_autonomy = {
						target = PREV
						autonomy_state = autonomy_free
					}
				}
			}
		}
		every_country = {
			limit = {
				has_country_flag = former_eng_country
			}
			# ENG = {
			# 	set_autonomy = {
			# 		target = PREV
			# 		autonomy_state = autonomy_free
			# 	}
			# }
			leave_faction = yes
		}
		every_country = {
			limit = {
				has_country_flag = former_eng_country
				has_capitulated = yes
			}
			# ENG = {
			# 	set_autonomy = {
			# 		target = PREV
			# 		autonomy_state = autonomy_free
			# 	}
			# }
			country_event = {
				id = eng.668
				days = 4
			}
		}
		for_each_scope_loop = {
			array = global.former_eng_members
			for_each_scope_loop = {
				array = global.former_eng_members
				if = {
					limit = {
						NOT = {
							tag = PREV
						}
					}
					give_military_access = PREV
				}
			}
		}
		every_country = {
			limit = {
				has_country_flag = former_eng_country
				NOT = {
					surrender_progress>0
				}
				not = {
					capital_scope = {
						is_on_continent = europe
					}
				}
			}
			every_enemy_country = {
				white_peace = PREV
			}
		}
		LIB = {
			limit = {
				has_country_flag = former_eng_country
				NOT = {
					surrender_progress>0
				}
			}
			every_enemy_country = {
				white_peace = PREV
			}
		}
		# every_country = {
		# 	limit = {
		# 		has_country_flag = former_eng_country
		# 		NOT = {
		# 			surrender_progress>0
		# 		}
		# 	}
		# 	faction_collapse_member_peace_effect = yes
		# }
	}
}