###  计算经济  ###
DVL_Calculate_Undead_Economy = {
	hidden_effect = {
	###  消费品  ###
		if = {
			limit = { not = { check_variable = { undead_substitution_rate > 19 } } }
			set_variable = { Undead_economy_consumer_goods_expected_value = 0.3 }
		}
		else_if = {
			limit = { check_variable = { undead_substitution_rate > 19 } }
			set_variable = { Undead_economy_consumer_goods_expected_value = 0.25 }
		}
		else_if = {
			limit = { check_variable = { undead_substitution_rate > 39 } }
			set_variable = { Undead_economy_consumer_goods_expected_value = 0.2 }
		}
		else_if = {
			limit = { check_variable = { undead_substitution_rate > 59 } }
			set_variable = { Undead_economy_consumer_goods_expected_value = 0.15 }
		}
		else_if = {
			limit = { check_variable = { undead_substitution_rate > 79 } }
			set_variable = { Undead_economy_consumer_goods_expected_value = 0.1 }
		}
	###  建造速度  ###
		set_variable = { production_speed_buildings_factor = undead_substitution_rate }
		divide_variable = { production_speed_buildings_factor = 400 }
	###  失业率  ###
		set_variable = { Undead_economy_conscription_factor = jobless_rate }
		divide_variable = { Undead_economy_conscription_factor = 100 }
		set_variable = { Undead_economy_stability_factor = jobless_rate }
		subtract_from_variable = { Undead_economy_stability_factor = 30 }
		clamp_variable = { var = Undead_economy_stability_factor min = 0 }
		divide_variable = { Undead_economy_stability_factor = -100 }
	###  刷新  ###
		force_update_dynamic_modifier = yes
	}
}

###  计算亚托莉  ###
DVL_Calculate_ARTI = {
	clamp_variable = {
		var = temp_Army_capabilities_of_ARTI
		max = 160
		min = 0
	}
	clamp_variable = {
		var = temp_Naval_capabilities_of_ARTI
		max = 160
		min = 0
	}
	clamp_variable = {
		var = temp_AirForce_capabilities_of_ARTI
		max = 160
		min = 0
	}
	clamp_variable = {
		var = temp_Financial_capabilities_of_ARTI
		max = 160
		min = 0
	}
	clamp_variable = {
		var = temp_Political_capabilities_of_ARTI
		max = 160
		min = 0
	}
	clamp_variable = {
		var = temp_mood_of_ARTI
		max = 160
		min = 0
	}
	clamp_variable = {
		var = Army_capabilities_of_ARTI
		max = 160
		min = 0
	}
	clamp_variable = {
		var = Naval_capabilities_of_ARTI
		max = 160
		min = 0
	}
	clamp_variable = {
		var = AirForce_capabilities_of_ARTI
		max = 160
		min = 0
	}
	clamp_variable = {
		var = Financial_capabilities_of_ARTI
		max = 160
		min = 0
	}
	clamp_variable = {
		var = Political_capabilities_of_ARTI
		max = 160
		min = 0
	}
	clamp_variable = {
		var = mood_of_ARTI
		max = 160
		min = 0
	}
	set_variable = { DVL_mood_of_ARTI_percent = temp_mood_of_ARTI }
	divide_variable = { DVL_mood_of_ARTI_percent = 1.6 }
}

