
ENG_great_peace = {
	if = {
		limit = {
			FRA = {
				is_in_faction_with = ENG
			}
		}
		FRA = {
			leave_faction = yes
		}
	}
	if = {
		limit = {
			FRA = {
				has_capitulated = yes
			}
		}
		DVL_ENG_GUAFEN_FRA = yes
	}
	ENG = {
		white_peace = {
			tag = DVL
			message = ENG_great_peace_ENG
		}
	}
	every_country = {
		limit = {
			is_subject = no
			is_in_faction_with = ENG
			NOT = {
				tag = ENG
			}
		}
		country_event = {
			id = deviluke.56
		}
	}
}

DVL_ENG_GUAFEN_FRA = {
	983 = {
		limit = {
			or = {
				DVL = {
					controls_state = PREV
				}
				any_country = {
					is_subject_of = DVL
					controls_state = PREV
				}
			}
		}
		ENF = {
			transfer_state = PREV
		}
	}
	14 = {
		limit = {
			or = {
				DVL = {
					controls_state = PREV
				}
				any_country = {
					is_subject_of = DVL
					controls_state = PREV
				}
			}
		}
		ENF = {
			transfer_state = PREV
		}
	}
	30 = {
		limit = {
			or = {
				DVL = {
					controls_state = PREV
				}
				any_country = {
					is_subject_of = DVL
					controls_state = PREV
				}
			}
		}
		ENF = {
			transfer_state = PREV
		}
	}
	23 = {
		limit = {
			or = {
				DVL = {
					controls_state = PREV
				}
				any_country = {
					is_subject_of = DVL
					controls_state = PREV
				}
			}
		}
		ENF = {
			transfer_state = PREV
		}
	}
	25 = {
		limit = {
			or = {
				DVL = {
					controls_state = PREV
				}
				any_country = {
					is_subject_of = DVL
					controls_state = PREV
				}
			}
		}
		ENF = {
			transfer_state = PREV
		}
	}
	26 = {
		limit = {
			or = {
				DVL = {
					controls_state = PREV
				}
				any_country = {
					is_subject_of = DVL
					controls_state = PREV
				}
			}
		}
		ENF = {
			transfer_state = PREV
		}
	}
	19 = {
		limit = {
			or = {
				DVL = {
					controls_state = PREV
				}
				any_country = {
					is_subject_of = DVL
					controls_state = PREV
				}
			}
		}
		ENF = {
			transfer_state = PREV
		}
	}
	31 = {
		limit = {
			or = {
				DVL = {
					controls_state = PREV
				}
				any_country = {
					is_subject_of = DVL
					controls_state = PREV
				}
			}
		}
		ENF = {
			transfer_state = PREV
		}
	}
	22 = {
		limit = {
			or = {
				DVL = {
					controls_state = PREV
				}
				any_country = {
					is_subject_of = DVL
					controls_state = PREV
				}
			}
		}
		ENF = {
			transfer_state = PREV
		}
	}
	779 = {
		limit = {
			or = {
				DVL = {
					controls_state = PREV
				}
				any_country = {
					is_subject_of = DVL
					controls_state = PREV
				}
			}
		}
		ENF = {
			transfer_state = PREV
		}
	}
	984 = {
		limit = {
			or = {
				DVL = {
					controls_state = PREV
				}
				any_country = {
					is_subject_of = DVL
					controls_state = PREV
				}
			}
		}
		ENF = {
			transfer_state = PREV
		}
	}
	817 = {
		limit = {
			or = {
				DVL = {
					controls_state = PREV
				}
				any_country = {
					is_subject_of = DVL
					controls_state = PREV
				}
			}
		}
		ENF = {
			transfer_state = PREV
		}
	}
	every_state = {
		limit = {
			has_state_flag = FRAZDQ
		}
		add_core_of = ENF
	}
	every_state = {
		limit = {
			is_controlled_by = ENG
			is_core_of = ENF
		}
		ENF = {
			transfer_state = PREV
		}
	}
	ENG = {
		set_autonomy = {
			target = ENF
			autonomy_state = autonomy_reichskommissariat
		}
	}
	ENF = {
		inherit_technology = ENG
	}
}

DVL_Planned_launch_effect = {
	while_loop_effect = {
		limit = {
			check_variable = {
				not = {
					num_of_army_01 > num_of_Heavenly_Soldiers
				}
			}
		}
		127 = {
			create_unit = {
				division = "name = \"戴比路克突击队\" division_template = \"戴比路克突击队\" start_experience_factor = 1 start_equipment_factor = 0.8 "
				owner = DVL
				count = 1
				allow_spawning_on_enemy_provs = yes
			}
		}
		add_to_variable = {
			num_of_army_01 = 1
		}
	}
}